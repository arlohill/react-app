{"ast":null,"code":"var _objectSpread = require(\"/Users/arlosb/Documents/GitHub/new react app/test5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nvar _classCallCheck = require(\"/Users/arlosb/Documents/GitHub/new react app/test5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/arlosb/Documents/GitHub/new react app/test5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/arlosb/Documents/GitHub/new react app/test5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _assertThisInitialized = require(\"/Users/arlosb/Documents/GitHub/new react app/test5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/arlosb/Documents/GitHub/new react app/test5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/arlosb/Documents/GitHub/new react app/test5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\n/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_config\", \"_tokenId\", \"_secret\"] }] */\nvar axios = require('axios');\n\nvar EventEmitter = require('events');\n\nvar pkg = require('../package.json');\n/**\n * Mux Base Class - Simple base class to be extended by all child modules.\n *\n * @ignore\n * @property {string} tokenId - The ID for the access token.\n * @property {string} tokenSecret - The secret for the access token.\n * @property {object} config - The configuration for the Base object.\n * @property {Object} requestOptions - The HTTP request options for Mux Assets\n * @property {string} requestOptions.auth.username - HTTP basic auth username (access token)\n * @property {string} requestOptions.auth.password - HTTP basic auth password (secret)\n *\n */\n\n\nvar Base = /*#__PURE__*/function (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(Base, _EventEmitter);\n\n  var _super = _createSuper(Base);\n\n  function Base() {\n    var _this;\n\n    _classCallCheck(this, Base);\n\n    _this = _super.call(this);\n\n    if ((arguments.length <= 0 ? undefined : arguments[0]) instanceof Base) {\n      return _possibleConstructorReturn(_this, Object.assign(_assertThisInitialized(_this), arguments.length <= 0 ? undefined : arguments[0]));\n    }\n\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'object') {\n      _this.config = arguments.length <= 0 ? undefined : arguments[0]; // eslint-disable-line prefer-destructuring\n\n      _this.tokenId = undefined;\n      _this.tokenSecret = undefined;\n    } else {\n      _this.tokenId = arguments.length <= 0 ? undefined : arguments[0]; // eslint-disable-line prefer-destructuring\n\n      _this.tokenSecret = arguments.length <= 1 ? undefined : arguments[1]; // eslint-disable-line prefer-destructuring\n\n      _this.config = arguments.length <= 2 ? undefined : arguments[2]; // eslint-disable-line prefer-destructuring\n    }\n\n    _this.http = axios.create({\n      baseURL: _this.config.baseUrl,\n      headers: {\n        'User-Agent': \"Mux Node | \".concat(pkg.version),\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      },\n      mode: 'cors',\n      withCredentials: false,\n      auth: {\n        username: _this.tokenId,\n        password: _this.tokenSecret\n      }\n    });\n\n    _this.http.interceptors.request.use(function (req) {\n      _this.emit('request', req);\n\n      return req;\n    });\n\n    _this.http.interceptors.response.use(function (res) {\n      _this.emit('response', res);\n\n      if (_this.isVideoUrl(res.config.url)) {\n        return res.data && res.data.data;\n      }\n\n      return res.data;\n    }, function (errorRes) {\n      return Promise.reject(errorRes.response && errorRes.response.data.error || errorRes);\n    });\n\n    return _this;\n  } // eslint-disable-next-line class-methods-use-this\n\n\n  _createClass(Base, [{\n    key: \"isVideoUrl\",\n    value: function isVideoUrl(url) {\n      return url.startsWith(\"/video/v1/\");\n    }\n  }, {\n    key: \"config\",\n    set: function set() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this._config = _objectSpread({\n        baseUrl: 'https://api.mux.com'\n      }, options);\n    },\n    get: function get() {\n      return this._config;\n    }\n  }, {\n    key: \"tokenId\",\n    set: function set() {\n      var token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : process.env.MUX_TOKEN_ID;\n      this._tokenId = token;\n\n      if (typeof this._tokenId === 'undefined') {\n        throw new Error('API Access Token must be provided.');\n      }\n    },\n    get: function get() {\n      return this._tokenId;\n    }\n  }, {\n    key: \"tokenSecret\",\n    set: function set() {\n      var secret = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : process.env.MUX_TOKEN_SECRET;\n      this._secret = secret;\n\n      if (typeof this._secret === 'undefined' || this._secret === '') {\n        throw new Error('API secret key must be provided');\n      }\n    },\n    get: function get() {\n      return this._secret;\n    }\n  }]);\n\n  return Base;\n}(EventEmitter);\n\nmodule.exports = Base;","map":null,"metadata":{},"sourceType":"script"}