{"code":"(this[\"webpackJsonpreact-demo\"]=this[\"webpackJsonpreact-demo\"]||[]).push([[0],Array(46).concat([function(e,t,a){e.exports=a.p+\"static/media/LivestormSecondBody.0bc4f703.png\"},,,,,,,function(e,t,a){e.exports=a.p+\"static/media/record.1765a274.svg\"},function(e,t,a){e.exports=a.p+\"static/media/record.1765a274.svg\"},function(e,t,a){e.exports=a.p+\"static/media/record.1765a274.svg\"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+\"static/media/recording.dfc29629.svg\"},function(e,t,a){e.exports=a.p+\"static/media/recording.dfc29629.svg\"},function(e,t,a){e.exports=a.p+\"static/media/SecondBody_Logo.06a4b9c5.png\"},function(e,t,a){e.exports=a.p+\"static/media/recording.dfc29629.svg\"},function(e,t,a){e.exports=a(196)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){\"use strict\";a.r(t);var n=a(1),o=a.n(n),r=a(93),c=a.n(r),i=a(40),l=(a(103),a(24)),s=a(25),u=a(36),d=a(35),m=a(6),f=a(9),p=a(3),b=a(2);a(104),a(105);function h(e,t){if(t)switch(t.state){case\"blocked\":return t.blocked.byPermissions?\"\".concat(e,\" permission denied\"):t.blocked.byDeviceMissing?\"\".concat(e,\" device missing\"):\"\".concat(e,\" blocked\");case\"off\":return t.off.byUser?\"\".concat(e,\" muted\"):t.off.byBandwidth?\"\".concat(e,\" muted to save bandwidth\"):\"\".concat(e,\" off\");case\"sendable\":return\"\".concat(e,\" not subscribed\");case\"loading\":return\"\".concat(e,\" loading...\");case\"interrupted\":return\"\".concat(e,\" interrupted\");case\"playable\":return null}}function v(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null),r=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}();window.updateTile=function(){r()};var c=Object(n.useMemo)((function(){return e.videoTrackState&&\"playable\"===e.videoTrackState.state&&(e.isLocalPerson||!0===e.videoTrackState.subscribed)?e.videoTrackState.track:null}),[e.videoTrackState]),i=Object(n.useMemo)((function(){return e.audioTrackState&&e.audioTrackState.track&&\"playable\"===e.audioTrackState.state&&!1!==e.audioTrackState.subscribed?(e.isAudioOnly?e.audioTrackState.track.isFiltered=!0:e.audioTrackState.track.isFiltered=!1,e.isScreenShare?e.audioTrackState.track.isScreenShare=!0:e.audioTrackState.track.isScreenShare=!1,e.audioTrackState.track):null}),[e.audioTrackState]),l=Object(n.useMemo)((function(){return h(\"video\",e.videoTrackState)}),[e.videoTrackState]),s=Object(n.useMemo)((function(){return h(\"audio\",e.audioTrackState)}),[e.audioTrackState]);return Object(n.useEffect)((function(){t.current&&(t.current.srcObject=new MediaStream([c]))}),[c]),Object(n.useEffect)((function(){a.current&&(i.isFiltered?(console.log(\"**FILTERING LIVE TRACK**\"),window.stream=new MediaStream([i]),window.mutedAudio=window.mutedAudio||new Audio,window.mutedAudio.muted=!0,window.mutedAudio.srcObject||(window.mutedAudio.srcObject=window.stream),window.mutedAudio.paused&&window.mutedAudio.play(),window.audioCtx=window.audioCtx||new(window.AudioContext||window.webkitAudioContext),window.audioSourceNode=window.audioCtx.createMediaStreamSource(window.stream),\"undefined\"==typeof window.destination&&(window.destination=window.audioCtx.createMediaStreamDestination()),\"undefined\"==typeof window.gainNode&&(window.gainNode=window.audioCtx.createGain()),\"undefined\"==typeof window.panNode&&(window.panNode=window.audioCtx.createStereoPanner()),window.gainNode.gain.value=1,window.panNode.pan.value=1,window.audioSourceNode.connect(window.gainNode).connect(window.panNode).connect(window.destination),a.current.srcObject=window.destination.stream):i.isScreenShare?(console.log(\"***GETTING SCREENSHARE AUDIO\"),a.current.srcObject=new MediaStream([i])):(console.log(\"***NOT FILTERING: LIVE TRACK***\"),a.current.srcObject=new MediaStream([i])))}),[i,window.sessionState]),o.a.createElement(\"div\",{className:function(){var t=\"tile\";return t+=e.isLarge?\" large\":\" small\",e.isLocalPerson&&(t+=\" local\"),t}(),onClick:e.onClick,style:{display:c?\"block\":\"none\"}},o.a.createElement(\"div\",{className:\"background\"}),c&&l&&o.a.createElement(\"p\",{className:\"overlay\"},l),c&&o.a.createElement(\"video\",{autoPlay:!0,muted:!0,playsInline:!0,ref:t}),c&&!e.disableCornerMessage&&s&&!l&&o.a.createElement(\"p\",{className:\"corner\"},s),!e.isLocalPerson&&i&&o.a.createElement(\"audio\",{autoPlay:!0,playsInline:!0,ref:a},\" \"))}var w=o.a.createContext(),O=o.a.createContext(),g=o.a.createContext();a(106);function S(e){return o.a.createElement(\"div\",{className:\"call-message\"+(e.isError?\" error\":\"\")},o.a.createElement(\"p\",{className:\"call-message-header\"},e.header),o.a.createElement(\"p\",null,e.detail))}var E={callItems:{local:{videoTrackState:null,audioTrackState:null}},clickAllowTimeoutFired:!1,camOrMicError:null,fatalError:null};function y(e,t){switch(t.type){case\"CLICK_ALLOW_TIMEOUT\":return Object(p.a)(Object(p.a)({},e),{},{clickAllowTimeoutFired:!0});case\"PARTICIPANTS_CHANGE\":var a=function(e){for(var t=Object(p.a)({},E.callItems),a=0,n=Object.entries(e);a<n.length;a++){var o=Object(b.a)(n[a],2),r=o[0],c=o[1];t[r]={videoTrackState:c.tracks.video,audioTrackState:c.tracks.audio},j(c)&&(t[r+\"-screen\"]={videoTrackState:c.tracks.screenVideo,audioTrackState:c.tracks.screenAudio})}return t}(t.participants);return Object(p.a)(Object(p.a)({},e),{},{callItems:a});case\"CAM_OR_MIC_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{camOrMicError:t.message});case\"FATAL_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{fatalError:t.message});default:throw new Error}}function j(e){var t=[\"loading\",\"playable\",\"interrupted\"];return t.includes(e.tracks.screenVideo.state)||t.includes(e.tracks.screenAudio.state)}function A(e){return\"local\"===e}function k(e){return e.endsWith(\"-screen\")}function C(e){return Object.keys(e).some((function(e){return k(e)}))}function T(e){console.log(\"[daily.co event]\",e.action)}var N=function(){var e=Object(n.useContext)(w),t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),o=a[0],r=(a[1],Object(n.useContext)(O).myStateArray),c=Object(b.a)(r,2),i=c[0];c[1],Object(n.useEffect)((function(){var t=i.role,a=[],n=i.viewMode;if(o){(!o.isActive||t.includes(\"Seller\")||t.includes(\"Buyer\")||t.includes(\"Shadow\"))&&(n=null),console.log(\"Setting subscriptions...\");if(!n&&o.isActive){switch(t){case\"Buyer1\":a=[],o.roleOf.Shadow1&&a.push(o.roleOf.Shadow1),!o.roleOf.Shadow1&&o.roleOf.Seller&&a.push(o.roleOf.Seller),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"Buyer2\":a=[],o.roleOf.Shadow1&&a.push(o.roleOf.Shadow1),!o.roleOf.Shadow1&&o.roleOf.Seller&&a.push(o.roleOf.Seller),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"Buyer3\":a=[],o.roleOf.Shadow1&&a.push(o.roleOf.Shadow1),!o.roleOf.Shadow1&&o.roleOf.Seller&&a.push(o.roleOf.Seller),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"Buyer4\":a=[],o.roleOf.Shadow1&&a.push(o.roleOf.Shadow1),!o.roleOf.Shadow1&&o.roleOf.Seller&&a.push(o.roleOf.Seller),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3);break;case\"Seller\":a=[],o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"Shadow1\":case\"Shadow2\":case\"Shadow3\":case\"Shadow4\":a=[],o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4),o.roleOf.Seller&&a.push(o.roleOf.Seller+\"_AUDIO\");break;case\"Attendee\":default:a=[]}o.AdminVisible&&a.push(\"Admin\"),a.filter((function(e){return-1===e.indexOf(i.name)}))}if(n){switch(n){case\"Seller\":a=[],o.roleOf.Seller&&a.push(o.roleOf.Seller),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"Shadow1\":a=[],o.roleOf.Shadow1&&a.push(o.roleOf.Shadow1),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"Shadow2\":a=[],o.roleOf.Shadow2&&a.push(o.roleOf.Shadow2),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3);break;case\"Shadow3\":o.roleOf.Shadow3&&a.push(o.roleOf.Shadow3),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"Shadow4\":a=[],o.roleOf.Shadow4&&a.push(o.roleOf.Shadow4),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;case\"All\":a=[],o.roleOf.Seller&&a.push(o.roleOf.Seller),o.roleOf.Shadow1&&a.push(o.roleOf.Shadow1),o.roleOf.Shadow2&&a.push(o.roleOf.Shadow2),o.roleOf.Shadow3&&a.push(o.roleOf.Shadow3),o.roleOf.Shadow4&&a.push(o.roleOf.Shadow4),o.roleOf.Buyer1&&a.push(o.roleOf.Buyer1),o.roleOf.Buyer2&&a.push(o.roleOf.Buyer2),o.roleOf.Buyer3&&a.push(o.roleOf.Buyer3),o.roleOf.Buyer4&&a.push(o.roleOf.Buyer4);break;default:a=[]}a.filter((function(e){return-1===e.indexOf(i.name)}))}new Promise((function(t){var r=e.participants();Object.keys(r).forEach((function(t){var c=r[t],l=c.user_name;\"local\"!==t&&l!=i.name&&(o.isKnown?o.isActive?(o.isActive||n)&&(a.includes(l+\"_AUDIO\")?(console.log(\"Subscribing to audio only for: \"+l),e.updateParticipant(c.session_id,{setSubscribedTracks:{audio:!0,video:!1,screenVideo:!0}})):a.includes(l)?(console.log(\"Subscribing to: \"+l),e.updateParticipant(c.session_id,{setSubscribedTracks:!0})):a.includes(l)||(console.log(\"NOT subscribing to: \"+l+\", sessionID: \"+c.session_id),e.updateParticipant(c.session_id,{setSubscribedTracks:{audio:!1,video:!1,screenVideo:!0}}))):\"InvisibleScreenShareWidget\"==l?(console.log(\"Not subscribing to: \"+l),e.updateParticipant(c.session_id,{setSubscribedTracks:{audio:!1,video:!1,screenVideo:!0,screenAudio:!0}})):(console.log(\"Subscribing to: \"+l),a.push(l),e.updateParticipant(c.session_id,{setSubscribedTracks:!0})):e.updateParticipant(c.session_id,{setSubscribedTracks:!1}))})),t()})).then((function(){var e=a.indexOf(\"InvisibleScreenShareWidget\");e>-1&&a.splice(e,1),a.filter((function(e){return-1===e.indexOf(window.myName)}));var t=a.values();console.log(\"Currently subscribed to:\");var o,r=Object(f.a)(t);try{for(r.s();!(o=r.n()).done;){var c=o.value;console.log(c)}}catch(i){r.e(i)}finally{r.f()}a.length<1&&console.log(\"No one.\"),window.viewMode=n,window.currentSubs=a,window.numberOfSubs=window.currentSubs&&window.currentSubs.filter((function(e){return-1===e.indexOf(\"_AUDIO\")})).filter((function(e){return-1===e.indexOf(\"_AUDIO\")})).filter((function(e){return-1===e.indexOf(window.myName)})).length}))}}),[o.isActive,o.roleOf,o.isKnown,o.AdminVisible,i.role,i.viewMode,i.name,i.userList])};function x(){N();var e=Object(n.useContext)(w),t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=Object(n.useReducer)(y,E),l=Object(b.a)(i,2),s=l[0],u=l[1],d=Object(n.useContext)(O),m=d.myStateArray,h=(d.setName,d.setRole),j=d.setUserList,x=d.setViewMode,I=d.setCamOnAtSessionStart,L=d.setMicOnAtSessionStart,R=d.setAdminPresent,M=(d.setAmAdmin,d.setNumber),_=Object(b.a)(m,2),P=_[0];_[1];Object(n.useEffect)((function(){if(r.isActive)switch(P.role){case\"Attendee\":case\"Admin\":r.roleOf.Shadow1?x(\"Shadow1\"):r.roleOf.Shadow2?x(\"Shadow2\"):r.roleOf.Shadow3?x(\"Shadow3\"):r.roleOf.Shadow4?x(\"Shadow4\"):x(\"Seller\"),P.camOnAtSessionStart&&null===P.camOnAtSessionStart&&(L(e.localAudio()),I(e.localVideo())),e.setLocalAudio(!1),e.setLocalVideo(!1);break;case\"Seller\":case\"Buyer1\":case\"Buyer2\":case\"Buyer3\":case\"Buyer4\":case\"Shadow1\":case\"Shadow2\":case\"Shadow3\":case\"Shadow4\":null===P.camOnAtSessionStart&&(L(e.localAudio()),I(e.localVideo())),e.setLocalAudio(!0),e.setLocalVideo(!0)}else r.isActive||(!e.localAudio()&&e.setLocalAudio(P.micOnAtSessionStart),!e.localVideo()&&e.setLocalVideo(P.camOnAtSessionStart),L(null),I(null))}),[r.isActive,P.role]),Object(n.useEffect)((function(){var e=\"Attendee\";for(var t in r.roleOf)r.roleOf[t]==P.name&&(e=t);e!==P.role&&(h(e),e.includes(\"1\")?M(1):e.includes(\"2\")&&M(2))}),[r.roleOf]);var B=Object(n.useCallback)((function(){return new Promise((function(t){console.log(\"*****UPDATING PARTICIPANT LIST******\");var a=!1,n=e.participants(),o={names:[P.name],sessionIdFor:{}};for(var r in n)if(\"local\"!==r){var c=n[r].user_name,i=n[r].session_id;o.names.push(c),o.sessionIdFor[c]=i,console.log(\"***ADDING: \"+c),c.includes(\"_Admin\")&&(a=!0)}a?console.log(\"Admin IS present\"):console.log(\"Admin IS NOT present\"),o.names.sort(),console.log(\"here's the userList: \".concat(o.names)),t([o,a])}))}),[e,P]),D=Object(n.useCallback)((function(){return new Promise((function(t){var a=!1,n=e.participants(),o=setInterval((function(){if(Object.keys(n).length>1||Object.keys(n).length<=1&&n.local.user_name==P.name){for(var e in clearInterval(o),n){var r=n[e].user_name;r.includes(\"_Admin\")&&\"local\"!==e&&(a=!0),console.log(\"Participant present: \".concat(r))}t(a)}}),500)}))}),[e,P]);Object(n.useEffect)((function(){if(e){var t=[\"participant-joined\",\"participant-updated\",\"participant-left\",\"joined-meeting\"];r();for(var a=0,n=t;a<n.length;a++){var o=n[a];e.on(o,r)}return function(){var a,n=Object(f.a)(t);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.off(o,r)}}catch(c){n.e(c)}finally{n.f()}}}function r(t){if(t&&T(t),u({type:\"PARTICIPANTS_CHANGE\",participants:e.participants()}),t&&\"participant-updated\"!=t.action)if(\"participant-joined\"==t.action||\"participant-left\"==t.action){window.event=t,setTimeout((function(){B().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];j(a),R(n)}))}),50)}else\"joined-meeting\"==t.action&&(console.log(\"*****I JOINED THE MEETING\"),\"Arlo_Admin\"===P.name&&(e.startRecording(),console.log(\"***STARTING TO RECORD***\")),B().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];j(a),P.amAdmin&&!n&&D().then((function(e){c((function(t){return Object(p.a)(Object(p.a)({},t),{},{isKnown:!e})}))}))})))}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"camera-error\",t),function(){e.off(\"camera-error\",t)};function t(e){T(e),u({type:\"CAM_OR_MIC_ERROR\",message:e&&e.errorMsg&&e.errorMsg.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"error\",t),function(){e.off(\"error\",t)};function t(e){T(e),u({type:\"FATAL_ERROR\",message:e&&e.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){var e=setTimeout((function(){u({type:\"CLICK_ALLOW_TIMEOUT\"})}),2500);return function(){clearTimeout(e)}}),[]);var V=function(){var e=[],t=[];return Object.entries(s.callItems).forEach((function(a){var n=Object(b.a)(a,2),r=n[0],c=n[1],i=k(r)||!A(r)&&!C(s.callItems)||A(r)&&window.numberOfSubs&&window.numberOfSubs>1&&!C(s.callItems),l=o.a.createElement(v,{key:r,videoTrackState:c.videoTrackState,audioTrackState:c.audioTrackState,isLocalPerson:A(r),isAudioOnly:function(){if(c.audioTrackState&&c.videoTrackState)return c.audioTrackState.subscribed&&!c.videoTrackState.subscribed}(),isLarge:i,disableCornerMessage:k(r),isScreenShare:k(r)});i?e.push(l):t.push(l)})),[e,t]}(),U=Object(b.a)(V,2),F=U[0],G=U[1];Object(n.useEffect)((function(){window.largeTiles=F,window.smallTales=G,window.add=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=0;a<t;a++)e.addFakeParticipant()}})),Object(n.useEffect)((function(){window.callState=s}),[s]);var z=function(e){var t=null,a=null,n=!1;return e.fatalError?(t=\"Fatal error: \".concat(e.fatalError),n=!0):e.camOrMicError?(t=\"Error: This page can't access your camera or mic.\",a=\"To troubleshoot in Chrome: To the right in your address bar, click the picture of the camera and select 'Always allow.' Hit enter and then refresh this page.\",n=!0):!function(){var t=e.callItems.local;return!(t&&!t.isLoading)&&e.clickAllowTimeoutFired}()?1===Object.keys(e.callItems).length&&(t=\"You're here! \\ud83d\\udc4b \",a=\"Waiting for everyone else...\"):t='Click \"Allow\" to enable camera and mic access',t||a?{header:t,detail:a,isError:n}:null}(s);return o.a.createElement(\"div\",{className:P.amAdmin?\"call-with-sidebar\":\"call\"},o.a.createElement(\"div\",{className:\"large-tiles \".concat(C(s.callItems)&&\"screenshare\",\" count-\").concat(C(s.callItems)?\"1\":window.numberOfSubs&&window.numberOfSubs+1)},z?null:F),o.a.createElement(\"div\",{className:\"small-tiles\"},G),z&&o.a.createElement(S,{header:z.header,detail:z.detail,isError:z.isError}))}var I=a(11),L=(a(107),a(108),o.a.forwardRef((function(e,t){var a=Object(n.useContext)(w),r=o.a.createRef(),c=o.a.createRef(),i=e.type,l=e.page,s=function(t){if(t.target.value){var n=t.target.value;if(\"audio\"==i&&\"main\"==l&&t.target.key.includes(\"audioinput\")&&a.setInputDevicesAsync({audioSource:n}),\"video\"==i&&\"main\"==l&&a.setInputDevicesAsync({videoSource:n}),\"audio\"==i&&\"intro\"==l){var o=Object(b.a)(e.inputs,2),r=(o[0],o[1]),c={deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({audio:c}).then((function(e){var t=e.getAudioTracks()[0];r((function(e){return[t,e[1]]}))}))}if(\"video\"==i&&\"intro\"==l){var s=Object(b.a)(e.inputs,2),u=(s[0],s[1]),d={width:1280,height:720,deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({video:d}).then((function(e){var t=e.getVideoTracks()[0];u((function(e){return[e[0],t]}))}))}t.target.key.includes(\"input\")&&console.log(\"New input: \"+t.target.text)}};return Object(n.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then((function(e){if(\"audio\"==i&&r.current){if(r.current.hasChildNodes())return;for(var t=[],a=0;a!==e.length;++a){var n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"audioinput\"===n.kind&&(s.key=\"audioinput\"+r.length+1,s.text=n.label||\"Microphone \"+(r.length+1),t.push(s))}window.audioOutputs=[];var o=document.createElement(\"option\");o.label=\"-Select Microphone-\",o.className=\"item-heading\";document.createElement(\"option\");r.current.appendChild(o);for(a=0;a!==t.length;++a)r.current.appendChild(t[a])}else if(\"video\"==i&&c.current){if(c.current.hasChildNodes())return;var l=document.createElement(\"option\");l.label=\"-Select Camera-\",l.className=\"item-heading\",c.current.appendChild(l);for(a=0;a!==e.length;++a){var s;n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"videoinput\"===n.kind&&(s.key=\"videooutput\"+c.length+1,s.text=n.label||\"Camera \"+(c.length+1),c.current&&c.current.appendChild(s))}}})).catch((function(e){console.log(e.name+\": \"+e.message)}))})),o.a.createElement(\"div\",{className:\"dropdown-selector\",ref:t},\"audio\"==i&&o.a.createElement(\"ul\",{ref:r,onClick:s}),\"video\"==i&&o.a.createElement(\"ul\",{ref:c,onClick:s}))})));function R(e){var t,a=Object(n.useRef)(null),r=Object(n.useState)(!1),c=Object(b.a)(r,2),i=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(b.a)(s,2),d=u[0],m=u[1],f=e.onClick,p=Object(n.useRef)(null),h=o.a.createRef(),v=o.a.createRef(),w=o.a.createRef(),g=o.a.createRef(),S=Object(n.useState)(null),E=Object(b.a)(S,2),y=E[0],j=E[1],A=Object(n.useState)(!0),k=Object(b.a)(A,2),C=k[0],T=k[1],N=Object(n.useContext)(O),x=N.myStateArray,R=N.setName,M=(N.setRole,N.setUserList,N.setViewMode,N.setCamOnAtSessionStart,N.setMicOnAtSessionStart,N.setAmAdmin,N.setNumber,Object(b.a)(x,2)),_=M[0];M[1];Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",P),function(){document.removeEventListener(\"mousedown\",P)}}));var P=function(e){console.log(\"handling click\"),!v.current||v.current.contains(e.target)||h.current.contains(e.target)?!g.current||g.current.contains(e.target)||w.current.contains(e.target)||m(!1):l(!1)};Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1280,height:720}}).then((function(e){if(e){window.mediaStream=e;var t=e.getAudioTracks()[0],a=e.getVideoTracks()[0];j([t,a]),window.localAudio=t,T(!0)}else T(!1)})).catch((function(e){console.log(\"You got an error:\"+e),T(!1)}))}),[]),Object(n.useEffect)((function(){y&&p.current&&(p.current.srcObject=new MediaStream(y)),p.current.muted=!0,window.initialInputs=y}),[y]);return o.a.createElement(\"div\",{className:\"container\"},o.a.createElement(\"div\",{className:\"start-screen-background\"}),o.a.createElement(\"div\",{className:\"instructions\"},o.a.createElement(\"div\",{className:\"fixed-width\"},o.a.createElement(\"h2\",null,\"Welcome to SecondBody.\"),o.a.createElement(\"div\",{style:{position:\"relative\",marginLeft:\"180px\",marginRight:\"180px\",padding:\"20px\",paddingTop:\"40px\",border:\"4px solid whitesmoke\",backgroundColor:\"white\"}},o.a.createElement(\"div\",{style:{background:\"white\",opacity:\"1\",zIndex:\"1000\"}},C?o.a.createElement(\"video\",{className:\"lobby-video\",autoPlay:!0,ref:p}):o.a.createElement(\"p\",{style:{height:\"198px\",width:\"352px\",borderRadius:\"20px\",background:\"black\",margin:\"auto\",color:\"white\",fontWeight:\"bolder\",boxSizing:\"border-box\",padding:\"24px\",border:\"2px yellow solid\"}},\"\\u274c Your camera / mic is blocked \\u274c\",o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then \",o.a.createElement(\"u\",{style:{cursor:\"pointer\"},onClick:function(){window.location.reload()}},\"refresh the page.\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"How?\",o.a.createElement(\"br\",null),o.a.createElement(\"ul\",null,o.a.createElement(\"li\",null,o.a.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),o.a.createElement(\"li\",null,o.a.createElement(\"a\",{href:\"https://youtu.be/GceAjizU5WU?t=39\",target:\"_blank\"},\"Option 2\")))),p.current&&C&&o.a.createElement(\"div\",{style:{position:\"relative\",display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",bottom:\"40px\",width:\"250px\",height:\"0px\",margin:\"auto\"}},o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){m(!d)},ref:w},\"Select Camera ^\"),d?o.a.createElement(\"div\",{onClick:function(){return m(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"80px\"}},o.a.createElement(L,{type:\"video\",page:\"intro\",inputs:[y,j],ref:g})):null),o.a.createElement(\"div\",{style:{width:\"15px\"}}),o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){l(!i)},ref:h},\"Select Mic ^\"),i?o.a.createElement(\"div\",{onClick:function(){return l(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"72px\",overflowY:\"visible\"}},o.a.createElement(L,{type:\"audio\",page:\"intro\",ref:v,inputs:[y,j]})):null))),C&&o.a.createElement(\"h4\",{className:\"signin\"},o.a.createElement(\"form\",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:\"rgb(230, 240, 249)\",fontSize:\"15px\",width:\"200px\",height:\"30px\",textAlign:\"center\",fontFamily:\"poppins\"},ref:a,value:_.name,onFocus:function(){\"Your first name\"===_.name&&R(\"\")},onChange:function(e){return function(e){var t=e.target.value;R(t)}(e)}}),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"input\",(t={className:\"new-card\",style:{width:\"150px\",color:\"#1b8bc4\",fontSize:\"17px\"},type:\"submit\"},Object(I.a)(t,\"type\",\"submit\"),Object(I.a)(t,\"value\",\"Enter session\"),Object(I.a)(t,\"onClick\",(function(){console.log(\"setting user ID as \"+_.name),\"\"===_.name||\"Your first name\"===_.name||_.name.length<=1?alert(\"Please enter your name to help your partner identify you.\"):(_.name=\"Admin\"===_.role?_.name+\"_Admin\":_.name,window.myName=_.name,f())})),t))),o.a.createElement(\"br\",null))))))}var M=a(5),_=a.n(M),P=a(10);function B(){return(B=Object(P.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{url:\"https://secondbody.daily.co/react-test-room-2\"});case 1:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var D={createRoom:function(){return B.apply(this,arguments)}};a(110),a(111),a(112);function V(e){function t(){return e.highlighted?\"#fb5554\":\"#000000\"}return o.a.createElement(\"svg\",{width:\"28px\",height:\"28px\",viewBox:\"0 0 24 24\",className:e.className,xmlns:\"http://www.w3.org/2000/svg\"},function(){switch(e.type){case\"camera\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-24.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Camera-Off-24px\",transform:\"translate(24.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M13.7573593,6 L4.00585866,6 C2.89706013,6 2,6.8992496 2,8.0085302 L2,15.9914698 C2,16.4835828 2.17760958,16.9352259 2.47229113,17.2850682 L13.7573593,6 Z M16,12.2426407 L16,15.9914698 C16,17.1007504 15.1029399,18 13.9941413,18 L10.2426407,18 L16,12.2426407 Z M16,12.2426407 L16,14.499966 L21.0756492,16.6148096 C21.586154,16.8275189 22,16.5442917 22,16.0045612 L22,7.99539512 C22,7.44565489 21.5875957,7.17183667 21.0756492,7.38514669 L20.7016702,7.54097052 L16,12.2426407 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"mute-mic\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-120.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Microphone-Off-24px\",transform:\"translate(120.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M15.8931049,12.3495358 L15.8883757,12.354265 C15.7702192,12.7237203 15.5976472,13.0928313 15.3634551,13.4334743 C14.9080287,14.0959127 14.281481,14.5761112 13.4232304,14.8194102 L11,17.2426407 L11,18.9906311 C11,18.9937578 11.0000137,18.9968808 11.0000409,19 L9.99077797,19 C9.45097518,19 9,19.4477153 9,20 C9,20.5561352 9.44358641,21 9.99077797,21 L14.009222,21 C14.5490248,21 15,20.5522847 15,20 C15,19.4438648 14.5564136,19 14.009222,19 L12.9999626,19 C12.999986,18.9968804 13,18.9937574 13,18.9906311 L13,16.9383953 C14.793746,16.7093537 16.1268712,15.8533183 17.0115375,14.566531 C17.631941,13.6641258 17.9116422,12.769082 17.9922726,12.124039 C18.0567667,11.6080864 17.715976,11.1348845 17.2185349,11.0241058 L17.2162194,11.0264213 C17.1758852,11.0160463 17.1430789,11.0101085 17.12403,11.0077274 C16.5760096,10.9392248 16.076219,11.3279514 16.0077165,11.8759725 C15.9990827,11.9450424 15.9659776,12.1062504 15.8970768,12.3267333 C15.8944966,12.3349898 15.8931939,12.3425837 15.8931049,12.3495358 Z M14.8100942,4.94726512 C14.3837386,3.80970165 13.2864273,3 12,3 C10.3431458,3 9,4.34314575 9,6 L9,10.7573593 L14.8100942,4.94726512 Z M7.97590142,11.7814579 C7.86511978,11.2840207 7.39191988,10.9432336 6.87596978,11.0077274 C6.32795032,11.0762298 5.93922497,11.5760196 6.0077274,12.124039 C6.05291889,12.4855709 6.16064541,12.9256367 6.35584336,13.401516 L7.97590142,11.7814579 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"screen\":return o.a.createElement(\"path\",{fill:t(),fillRule:\"evenodd\",d:\"M2 5.006C2 3.898 2.898 3 3.99 3h16.02C21.108 3 22 3.897 22 5.006v9.988A2.003 2.003 0 0 1 20.01 17H3.99C2.892 17 2 16.103 2 14.994V5.006zm2 .99v8.009c0 .54.448.995 1 .995h14c.555 0 1-.446 1-.995v-8.01c0-.54-.448-.995-1-.995H5c-.555 0-1 .446-1 .995zM7 20c0-.552.456-1 .995-1h8.01c.55 0 .995.444.995 1 0 .552-.456 1-.995 1h-8.01A.995.995 0 0 1 7 20z\"});case\"leave\":return o.a.createElement(\"path\",{d:\"M19.347 11l-1.71-1.638a.832.832 0 0 1 0-1.222l.03-.03a.922.922 0 0 1 1.27-.003l3.34 3.2a.95.95 0 0 1 0 1.386l-3.34 3.2a.918.918 0 0 1-1.27-.003l-.03-.03a.842.842 0 0 1 0-1.221L19.348 13h-7.352A.995.995 0 0 1 11 12c0-.552.456-1 .995-1h7.352zM16 10h-2V7.995c0-.54-.446-.995-.997-.995H6.997A1 1 0 0 0 6 7.995v8.01c0 .54.446.995.997.995h6.006a1 1 0 0 0 .997-.995V14h2v2.994A2.009 2.009 0 0 1 13.991 19H6.01A2.007 2.007 0 0 1 4 16.994V7.006C4 5.898 4.902 5 6.009 5h7.982C15.101 5 16 5.897 16 7.006V10z\",fill:t(),fillRule:\"evenodd\"});case\"chat\":return o.a.createElement(\"path\",{d:\"M8.984 17.522c.93.308 1.949.478 3.016.478 4.418 0 8-2.91 8-6.5S16.418 5 12 5s-8 2.91-8 6.5c0 1.65.756 3.156 2.003 4.302a8.751 8.751 0 0 1-.71 2.187c-.317.606-.457 1.011 0 1.011 1.727 0 1.99-1.236 3.691-1.478z\",fill:t(),fillRule:\"evenodd\"});default:throw new Error}}())}function U(e){return o.a.createElement(\"button\",{disabled:e.disabled,onClick:e.onClick,className:\"tray-button\"+(e.newButtonGroup?\" new-group\":\"\")},o.a.createElement(V,{type:e.type,highlighted:e.highlighted}))}var F=a(29);a(113);function G(e){var t=Object(n.useContext)(w),a=Object(n.useState)(\"\"),r=Object(b.a)(a,2),c=r[0],i=r[1],l=Object(n.useContext)(g).session,s=Object(b.a)(l,2),u=s[0],d=s[1],m=Object(n.useContext)(O).myStateArray,f=Object(b.a)(m,1)[0],h=u.chatHistory,v=function(e){d((function(t){return Object(p.a)(Object(p.a)({},t),{},{chatHistory:[].concat(Object(F.a)(t.chatHistory),[e])})}))},S=o.a.createRef();return Object(n.useEffect)((function(){if(t)return t.on(\"app-message\",a),function(){t.off(\"app-message\",a)};function a(a){var n=t.participants(),o=n[a.fromId].user_name.includes(\"_Admin\")?n[a.fromId].user_name.split(\"_Admin\").join(\"\"):n[a.fromId].user_name;\"chat\"==a.data.type&&v({sender:o,message:a.data.message}),\"chat\"==a.data.type&&e.notification()}}),[t,h]),Object(n.useEffect)((function(){}),[h]),Object(n.useEffect)((function(){S.current&&S.current.scrollIntoView({behavior:\"smooth\"})}),[h]),e.onClickDisplay?o.a.createElement(\"div\",{className:\"chat\"},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:\"chat-history\"},h.map((function(e,t,a){return e.sender==f.Name||e.sender==f.name.split(\"_Admin\").join(\"\")?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"my message\"},e.message):a[t-1]&&e.sender==a[t-1].sender?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"additional message\"},e.message):o.a.createElement(\"div\",null,o.a.createElement(\"div\",{key:\"name-label-\".concat(t),className:\"name-label\"},o.a.createElement(\"b\",null,e.sender),\":\"),o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"received message\"},e.message))})),o.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:S}))),o.a.createElement(\"form\",{onSubmit:function(e){if(e.preventDefault(),c){t.sendAppMessage({type:\"chat\",message:c},\"*\");var a=t.participants().local.user_name.includes(\"_Admin\")?t.participants().local.user_name.split(\"_Admin\").join(\"\"):t.participants().local.user_name;v({sender:a,message:c}),i(\"\")}}},o.a.createElement(\"label\",{htmlFor:\"chatInput\"}),o.a.createElement(\"input\",{id:\"chatInput\",className:\"chat-input\",type:\"text\",autoComplete:\"off\",placeholder:\"Type your message here..\",value:c,onChange:function(e){i(e.target.value)}}),o.a.createElement(\"button\",{type:\"submit\",className:\"send-chat-button\"},\"Send\"))):null}var z=a(19);function H(e){var t=Object(n.useContext)(w),a=Object(n.useContext)(g).session,r=Object(b.a)(a,2),c=r[0],i=(r[1],Object(n.useContext)(O)),l=i.myStateArray,s=(i.setName,i.setRole,i.setUserList,i.setViewMode),u=i.setCamOnAtSessionStart,d=i.setMicOnAtSessionStart,m=(i.setAmAdmin,Object(b.a)(l,2)),f=m[0],p=(m[1],Object(n.useState)(!1)),h=Object(b.a)(p,2),v=h[0],S=h[1],E=Object(n.useState)(!1),y=Object(b.a)(E,2),j=y[0],A=y[1],k=Object(n.useState)(!1),C=Object(b.a)(k,2),N=C[0],x=C[1],I=Object(n.useState)(!1),R=Object(b.a)(I,2),M=R[0],_=R[1],P=Object(n.useState)(!1),B=Object(b.a)(P,2),D=B[0],V=B[1],F=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}(),H=o.a.createRef(),K=o.a.createRef(),Z=o.a.createRef(),W=o.a.createRef();window.updateTray=function(){F()};var J=Object(n.useState)(!1),Y=Object(b.a)(J,2),q=Y[0],X=Y[1],Q=Object(n.useState)(!1),$=Object(b.a)(Q,2),ee=$[0],te=$[1];Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",ae),function(){document.removeEventListener(\"mousedown\",ae)}}));var ae=function(e){console.log(\"handling click\"),!K.current||K.current.contains(e.target)||H.current.contains(e.target)?!W.current||W.current.contains(e.target)||Z.current.contains(e.target)||te(!1):X(!1)};return Object(n.useEffect)((function(){c.isActive?f.role.includes(\"Shadow\")||f.role.includes(\"Seller\")||f.role.includes(\"Buyer\")||(d(t.localAudio()),u(t.localVideo()),t.setLocalAudio(!1),t.setLocalVideo(!1)):c.isActive||(!t.localAudio()&&t.setLocalAudio(f.micOnAtSessionStart),!t.localVideo()&&t.setLocalVideo(f.camOnAtSessionStart),d(null),u(null))}),[c.isActive,f.role]),Object(n.useEffect)((function(){if(t)return e(),t.on(\"participant-updated\",e),function(){t.off(\"participant-updated\",e)};function e(e){e&&T(e);var a=function(e){var t,a,n=!1;if(e&&e.participants()&&e.participants().local){var o=e.participants().local;t=!o.video,a=!o.audio,n=o.screen}return[t,a,n]}(t),n=Object(b.a)(a,3),o=n[0],r=n[1],c=n[2];S(o),A(r),x(c)}}),[t]),o.a.createElement(\"div\",{className:f.amAdmin?\"tray-with-sidebar\":\"tray\"},o.a.createElement(U,{type:\"camera\",highlighted:v,onClick:function(){t.setLocalVideo(v)}}),o.a.createElement(\"div\",{onClick:function(){te(!ee)},style:{position:\"absolute\",left:\"57px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:Z},\"^\"),ee?o.a.createElement(L,{type:\"video\",page:\"main\",ref:W}):null),o.a.createElement(U,{type:\"mute-mic\",highlighted:j,onClick:function(){t.setLocalAudio(j)}}),o.a.createElement(\"div\",{onClick:function(){X(!q)},style:{position:\"absolute\",left:\"123px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:H},\"^\"),q?o.a.createElement(L,{type:\"audio\",page:\"main\",ref:K}):null),z.a.supportedBrowser().supportsScreenShare&&f.amAdmin&&o.a.createElement(U,{type:\"screen\",highlighted:N,onClick:function(){window.open(\"http://\"+window.location.host+\"/share\",\"test\",\"width=300, height=300\")}}),o.a.createElement(U,{type:\"chat\",highlighted:D,onClick:function(){_(!M),D&&V(!D)}}),o.a.createElement(G,{onClickDisplay:M,notification:function(){V(!D)}}),o.a.createElement(\"div\",{className:\"status-display\"},o.a.createElement(\"div\",{style:{height:\"30px\"}},\"Roleplay:  \\xa0\",c.isActive?o.a.createElement(\"div\",{className:\"display-card active\"},\"Live\"):o.a.createElement(\"div\",{className:\"display-card paused\"},\"Paused\")),o.a.createElement(\"div\",{className:\"vertical-line\"}),!c.isActive||\"Admin\"!==f.role&&\"Attendee\"!==f.role?o.a.createElement(\"div\",{style:{height:\"30px\"}},\"My Role: \\xa0\",\"Admin\"==f.role||\"Attendee\"==f.role?o.a.createElement(\"span\",{className:\"display-card role\"},\"Viewer\"):o.a.createElement(\"span\",{className:\"display-card role\"},f.role.match(/\\D/g).join(\"\"))):o.a.createElement(\"div\",{className:\"my-view\"},\"My View: \\xa0\",o.a.createElement(\"span\",null,o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{className:\"my-view-selector\",value:f.viewMode,onChange:function(e){return s(e.target.value)}},o.a.createElement(\"option\",{value:\"Seller\"},\"Seller\"),c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"Shadow1\",selected:!0},\"Shadow 1\"),c.roleOf.Shadow2&&o.a.createElement(\"option\",{value:\"Shadow2\"},\"Shadow 2\"),c.roleOf.Shadow3&&o.a.createElement(\"option\",{value:\"Shadow3\"},\"Shadow 3\"),c.roleOf.Shadow4&&o.a.createElement(\"option\",{value:\"Shadow4\"},\"Shadow 4\"),c.roleOf.Seller&&c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"All\"},\"All\"),c.roleOf.Shadow1||c.roleOf.Shadow2||c.roleOf.Shadow3||c.roleOf.Shadow4&&o.a.createElement(\"option\",{value:\"All\"},\"All\"))))))),o.a.createElement(U,{type:\"leave\",disabled:e.disabled,newButtonGroup:!0,highlighted:!0,onClick:function(){e.onClickLeaveCall&&e.onClickLeaveCall()}}))}function K(){var e=window.location.search.match(/roomUrl=([^&]+)/i);return e&&e[1]?decodeURIComponent(e[1]):null}function Z(e){return window.location.href.split(\"?\")[0]+(e?\"?roomUrl=\".concat(encodeURIComponent(e)):\"\")}function W(e,t){window.audio.src={monologue1:\"https://storage.googleapis.com/secondbodyuploads/What%20Makes%20CEB%20Different%20(Mono).mp3\",monologue2:\"https://storage.googleapis.com/secondbodyuploads/PAGA%20Claims%20(mono).mp3\",monologue3:\"https://storage.googleapis.com/secondbodyuploads/AudioEngineer.mp3\",monologue4:\"https://storage.googleapis.com/secondbodyuploads/IBM%20Garage.mp3\",monologue5:\"https://storage.googleapis.com/secondbodyuploads/Livestorm1.m4a\",monologue6:\"https://storage.googleapis.com/secondbodyuploads/Livestorm2.m4a\",monologue7:\"https://storage.googleapis.com/secondbodyuploads/Sublet.mp3\",monologue8:\"https://storage.googleapis.com/secondbodyuploads/Zombies.mp3\",monologue9:\"https://storage.googleapis.com/secondbodyuploads/Excellence.mp3\",monologue10:\"https://storage.googleapis.com/secondbodyuploads/Gertens.mp3\",monologue11:\"https://storage.googleapis.com/secondbodyuploads/Raymond.mp3\",monologue12:\"https://storage.googleapis.com/secondbodyuploads/Listening.m4a\",monologue13:\"https://storage.googleapis.com/secondbodyuploads/Telum%20Processor.m4a\",dialogue1:\"https://storage.googleapis.com/secondbodyuploads/EthicsA%20(dialogue).mp3\",dialogue1B:\"https://storage.googleapis.com/secondbodyuploads/EthicsB%20(dialogue).mp3\",dialogue2:\"https://storage.googleapis.com/secondbodyuploads/CoursePass(A)%20(dialogue).mp3\",dialogue2B:\"https://storage.googleapis.com/secondbodyuploads/CoursePass(B)%20(dialogue).mp3\",dialogue3:\"https://storage.googleapis.com/secondbodyuploads/S_2Weeks.mp3\",dialogue3B:\"https://storage.googleapis.com/secondbodyuploads/M_2Weeks.mp3\",dialogue4:\"https://storage.googleapis.com/secondbodyuploads/S_MyLife.mp3\",dialogue4B:\"https://storage.googleapis.com/secondbodyuploads/M_MyLife.mp3\",dialogue5:\"https://storage.googleapis.com/secondbodyuploads/L.mp3\",dialogue5B:\"https://storage.googleapis.com/secondbodyuploads/B.mp3\",dialogue6:\"\",dialogue6B:\"\"}[e],console.log(\"going to \".concat(t,\" \").concat(e)),window.audio[t]()}a(115),a(116);function J(e){Object(n.useContext)(w);var t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=e.role,l=Object(n.useContext)(O),s=l.myStateArray,u=(l.setNumber,Object(b.a)(s,2)),d=u[0];u[1];return o.a.createElement(\"form\",{className:\"dropdown\"},o.a.createElement(\"select\",{className:\"selector\",id:i,onChange:function(e){window.role=i;var t=e.target.id,a=e.target.value;c((function(e){return Object(p.a)(Object(p.a)({},e),{},{roleOf:Object(p.a)(Object(p.a)({},e.roleOf),{},Object(I.a)({},t,a))})})),console.log(e.target.id+\" is now: \"+e.target.value),c((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))},value:r.roleOf[i]},o.a.createElement(\"option\",{value:null}),d.userList.names&&d.userList.names.length>0&&d.userList.names.map((function(e){return o.a.createElement(\"option\",{value:e},e.includes(\"_Admin\")?e.split(\"_Admin\").join(\"\"):e)}))))}function Y(e){var t=Object(n.useContext)(w),a=Object(n.useState)(!1),r=Object(b.a)(a,2),c=(r[0],r[1]),i=Object(n.useState)(!1),l=Object(b.a)(i,2),s=(l[0],l[1]),u=Object(n.useState)(!1),d=Object(b.a)(u,2),m=(d[0],d[1]),h=Object(n.useState)(!1),v=Object(b.a)(h,2),S=(v[0],v[1],Object(n.useState)(!1)),E=Object(b.a)(S,2),y=(E[0],E[1],Object(n.useContext)(g).session),j=Object(b.a)(y,2),A=j[0],k=j[1],C=Object(n.useContext)(O),N=C.myStateArray,x=(C.setName,C.setRole,C.setUserList,C.setViewMode,C.setCamOnAtSessionStart,C.setMicOnAtSessionStart,C.setAdminPresent,C.setAmAdmin,Object(b.a)(N,2)),I=x[0],L=(x[1],function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}());window.updateAdminPanel=L;var R=Object(n.useState)(\"Play\"),M=Object(b.a)(R,2),_=M[0],P=M[1],B=Object(n.useState)(\"monologue1\"),D=Object(b.a)(B,2),V=D[0],U=D[1],F=o.a.createRef(),G=o.a.createRef();Object(n.useEffect)((function(){if(t){for(var e=[\"participant-joined\",\"participant-left\",\"joined-meeting\"],a=0,n=e;a<n.length;a++){var o=n[a];t.on(o,(function(){return setTimeout((function(){return L()}),100)}))}return function(){var a,n=Object(f.a)(e);try{for(n.s();!(a=n.n()).done;){var o=a.value;t.off(o,(function(){return setTimeout((function(){return L()}),100)}))}}catch(r){n.e(r)}finally{n.f()}}}}),[t]),Object(n.useEffect)((function(){A.hasAnUpdate&&(console.log(\"****HAS AN UPDATE\"),z(),k((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!1})})))}),[A.hasAnUpdate]);var z=function(){console.log(\"Sending current state...\"),t.sendAppMessage(A,\"*\")};return Object(n.useEffect)((function(){if(t)return e(),t.on(\"participant-updated\",e),function(){t.off(\"participant-updated\",e)};function e(e){e&&T(e);var a=function(e){var t,a,n=!1;if(e&&e.participants()&&e.participants().local){var o=e.participants().local;t=!o.video,a=!o.audio,n=o.screen}return[t,a,n]}(t),n=Object(b.a)(a,3),o=n[0],r=n[1],i=n[2];c(o),s(r),m(i)}}),[t]),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:\"admin-panel\"},o.a.createElement(\"div\",{className:\"role-selector-section\"},o.a.createElement(\"div\",{className:\"selector-box\"},\"Buyer(s)\",o.a.createElement(J,{role:\"Buyer1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(J,{role:\"Buyer2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(J,{role:\"Buyer3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(J,{role:\"Buyer4\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller\",o.a.createElement(J,{role:\"Seller\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller's shadow(s)\",o.a.createElement(J,{role:\"Shadow1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(J,{role:\"Shadow2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(J,{role:\"Shadow3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(J,{role:\"Shadow4\",selectedRoles:\"selectedRoles\"}))),o.a.createElement(\"div\",{className:\"session-toggle\"},o.a.createElement(\"label\",{class:\"switch\"},o.a.createElement(\"input\",{type:\"checkbox\",id:\"state\",checked:A.isActive,onChange:function(){k((function(e){return Object(p.a)(Object(p.a)({},e),{},{isActive:!e.isActive})})),k((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))}}),o.a.createElement(\"span\",{class:\"slider round\"})),o.a.createElement(\"p\",null,\"Session active\"))),\"// ***End admin panel***\",o.a.createElement(\"div\",{className:\"practice-audio hidden\",ref:F},\"Practice audio\",o.a.createElement(\"div\",{style:{height:\"30px\",margin:\"auto\"}},o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{class:\"practice-audio-dropdown\",onChange:function(e){U(e.target.value),console.log(\"***CHANGED TO \"+e.target.value)}},o.a.createElement(\"option\",{value:\"monologue1\"},\"What makes CEB different (mono)\"),o.a.createElement(\"option\",{value:\"monologue2\"},\"Searching for PAGA Claims (mono)\"),o.a.createElement(\"option\",{value:\"monologue3\"},\"Audio Engineer (mono)\"),o.a.createElement(\"option\",{value:\"monologue4\"},\"IBM Garage (mono)\"),o.a.createElement(\"option\",{value:\"monologue5\"},\"Livestorm 1 (mono)\"),o.a.createElement(\"option\",{value:\"monologue6\"},\"Livestorm 2 (mono)\"),o.a.createElement(\"option\",{value:\"monologue7\"},\"Sublet (mono)\"),o.a.createElement(\"option\",{value:\"monologue8\"},\"Zombies (mono)\"),o.a.createElement(\"option\",{value:\"monologue9\"},\"Excellence (mono)\"),o.a.createElement(\"option\",{value:\"monologue10\"},\"Gertens (mono)\"),o.a.createElement(\"option\",{value:\"monologue11\"},\"Raymond (mono)\"),o.a.createElement(\"option\",{value:\"monologue12\"},\"IBM Listening (mono)\"),o.a.createElement(\"option\",{value:\"monologue13\"},\"IBM Telum Processor (mono)\"),o.a.createElement(\"option\",{value:\"dialogue1\"},\"Ethics (dia)\"),o.a.createElement(\"option\",{value:\"dialogue2\"},\"CoursePass (dia)\"),o.a.createElement(\"option\",{value:\"dialogue3\"},\"M&S 2 weeks (dia)\"),o.a.createElement(\"option\",{value:\"dialogue4\"},\"M&S Doing with your life (dia)\"),o.a.createElement(\"option\",{value:\"dialogue5\"},\"L&B (dia)\"))))),o.a.createElement(\"span\",{style:{color:\"green\",fontSize:\"16px\",fontFamily:\"Verdana, Geneva, Tahoma, sans-serif\"}},o.a.createElement(\"button\",{onClick:function(){var e=A.roleOf.Shadow1&&I.userList.sessionIdFor[A.roleOf.Shadow1],a=A.roleOf.Shadow2&&I.userList.sessionIdFor[A.roleOf.Shadow2];if(A.roleOf.Shadow1==I.name&&(e=\"me\"),A.roleOf.Shadow2==I.name&&(a=\"me\"),e||a){var n=window.audioIsPlaying?\"pause\":\"play\",o={type:\"instructions\",target:V,action:n,recipient:e},r={type:\"instructions\",target:V+\"B\",action:n,recipient:a};e&&(\"me\"!=e?t.sendAppMessage(o,e):\"me\"==e&&W(V,n),console.log(\"Sent \".concat(n,\" request to \").concat(A.roleOf.Shadow1))),a&&(\"me\"!=a?t.sendAppMessage(r,a):\"me\"==a&&W(V+\"B\",n),console.log(\"Sent \".concat(n,\" request to \").concat(A.roleOf.Shadow2))),window.audioIsPlaying=!window.audioIsPlaying,P(window.audioIsPlaying?\"Pause\":\"Play\")}else console.log(\"no recipients.\")},id:\"play-pause\"},_))),o.a.createElement(\"div\",{className:\"training-toggle\",ref:G,onClick:function(){F.current.classList.toggle(\"hidden\"),G.current.innerText=F.current.classList.contains(\"hidden\")?\"Show Practice\":\"X\"}},\"Show Practice\"))}var q=\"STATE_JOINING\",X=\"STATE_JOINED\",Q=\"STATE_ERROR\",$=[\"SB\",\"Prep\",\"Anthony\"];function ee(){var e=Object(n.useState)(\"STATE_IDLE\"),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=Object(b.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(null),d=Object(b.a)(u,2),m=d[0],h=d[1],v=Object(n.useState)({type:\"sessionState\",isKnown:!1,isActive:!1,AdminVisible:!1,hasAnUpdate:!1,roleOf:{Buyer1:\"\",Buyer2:\"\",Buyer3:\"\",Buyer4:\"\",Seller:\"\",Shadow1:\"\",Shadow2:\"\",Shadow3:\"\",Shadow4:\"\"},chatHistory:[]}),S=Object(b.a)(v,2),E=S[0],y=S[1],j=Object(n.useState)({name:\"Your first name\",role:window.myRole,amAdmin:window.amAdmin,userList:{names:[],sessionIdFor:{}},adminPresent:!1,viewMode:null,audioIsPlaying:!1,camOnAtSessionStart:null,micOnAtSessionStart:null,number:null}),A=Object(b.a)(j,2),k=A[0],C=A[1];$.includes(window.myP)||(window.location.href=\"http://secondbody.co\");var N=Object(n.useCallback)((function(){return r(\"STATE_CREATING\"),D.createRoom().then((function(e){return e.url})).catch((function(e){console.log(\"Error creating room\",e),s(null),r(\"STATE_IDLE\")}))}),[]),I=Object(n.useCallback)((function(e){var t=z.a.createCallObject({subscribeToTracksAutomatically:!1});s(e),h(t),r(q),window.initialInputs?(console.log(\"initial audio: \"+window.initialInputs[0]+\". Initial video: \"+window.initialInputs[1]),t.join({userName:k.name,url:e,audioSource:window.initialInputs[0],videoSource:window.initialInputs[1]})):navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(a){if(a){var n=a.getAudioTracks(),o=a.getVideoTracks();n&&n.length>0&&o&&o.length>0&&t.join({userName:k.name,url:e,audioSource:n[0],videoSource:o[0]})}})),console.log(\"joining the call as \"+k.name);Z(l),k.name,k.role}),[k.name]),L=Object(n.useCallback)((function(){m&&(m.stopRecording(),a===Q?m.destroy().then((function(){s(null),h(null),r(\"STATE_IDLE\"),window.initialize()})):(r(\"STATE_LEAVING\"),m.leave(),window.initialize()))}),[m,a]);Object(n.useEffect)((function(){var e=K();e&&window.initialInputs&&I(e)}),[I]),Object(n.useEffect)((function(){var e=Z(l);window.pageUrl=e,k.role&&(e.indexOf(\"?\")>-1?e+=\"&R=\"+window.myRole:e+=\"?R=\"+window.myRole),window.myP&&(e.indexOf(\"?\")>-1?e+=\"&P=\"+window.myP:e+=\"?P=\"+window.myP),e!==window.location.href&&window.history.replaceState(null,null,e)}),[l]),Object(n.useEffect)((function(){window.callObject=m}),[m]),Object(n.useEffect)((function(){window.myState=k}),[k]),Object(n.useEffect)((function(){window.userList=k.userList}),[k.userList]),Object(n.useEffect)((function(){window.sessionState=E}),[E]),Object(n.useEffect)((function(){m&&(window.record=function(){m.startRecording()},window.stop=function(){m.stopRecording()})}),[a]),Object(n.useEffect)((function(){var e;if(m){if(!E.isKnown&&k.adminPresent){e=setInterval((function(){E.isKnown?clearInterval(e):(m.sendAppMessage(\"State please?\",\"*\"),console.log(\"Requesting meeting state...\"))}),1e3)}return function(){e&&clearInterval(e)}}}),[E.isKnown,k.adminPresent]),Object(n.useEffect)((function(){if(m){var e=[\"joined-meeting\",\"left-meeting\",\"error\",\"participant-joined\"];o();for(var t=0,a=e;t<a.length;t++){var n=a[t];m.on(n,o)}return function(){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;m.off(n,o)}}catch(r){a.e(r)}finally{a.f()}}}function o(e){switch(e&&T(e),m.meetingState()){case\"joined-meeting\":r(X),m.setNetworkTopology({topology:\"sfu\"}),console.log(\"*****JOINED MEETING\"),\"\"==k.name&&m.leave(),window.sessionState.isKnown;break;case\"left-meeting\":m.destroy().then((function(){s(null),h(null),r(\"STATE_IDLE\"),clearInterval(window.stateRequest),window.initialize()}));break;case\"participant-joined\":break;case\"error\":r(Q)}}}),[m]),Object(n.useEffect)((function(){if(m)return m.on(\"app-message\",e),function(){m.off(\"app-message\",e)};function e(e){if(e)if(T(e),console.log(\"received app message from \".concat(e.fromId,\": \"),e.data),e.data.constructor===Object&&\"sessionState\"==e.data.type){var t=e.data;t.hasAnUpdate=!1,y(t)}else e.data.constructor===Object&&\"instructions\"==e.data.type&&e.data.recipient==m.participants().local.session_id?W(e.data.target,e.data.action):\"State please?\"==e.data&&(console.log(\"*******Received state request, and sessionState.isKnown: \"+E.isKnown),k.amAdmin&&E.isKnown&&(console.log(\"Sending current state...\"),m.sendAppMessage(E,\"*\")))}}),[m,E]);var M=[q,X,Q].includes(a);return o.a.createElement(\"div\",{className:\"app\"},o.a.createElement(g.Provider,{value:{session:[E,y]}},o.a.createElement(O.Provider,{value:{myStateArray:[k,C],setName:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e})}))},setRole:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{role:e})}))},setUserList:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{userList:e})}))},setViewMode:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{viewMode:e})}))},setCamOnAtSessionStart:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{camOnAtSessionStart:e})}))},setMicOnAtSessionStart:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{micOnAtSessionStart:e})}))},setAdminPresent:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{adminPresent:e})}))},setAmAdmin:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{amAdmin:e})}))},setNumber:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{number:e})}))}}},M?o.a.createElement(w.Provider,{value:m},o.a.createElement(x,{roomUrl:l}),o.a.createElement(H,{onClickLeaveCall:L}),k.amAdmin&&o.a.createElement(Y,null)):o.a.createElement(R,{onClick:function(){N().then((function(e){return I(e)}))}}))))}a(117);var te=a(34),ae=a(28);a(118);function ne(e,t){if(t)switch(t.state){case\"blocked\":return t.blocked.byPermissions?\"\".concat(e,\" permission denied\"):t.blocked.byDeviceMissing?\"\".concat(e,\" device missing\"):\"\".concat(e,\" blocked\");case\"off\":return t.off.byUser?\"\".concat(e,\" muted\"):t.off.byBandwidth?\"\".concat(e,\" muted to save bandwidth\"):\"\".concat(e,\" off\");case\"sendable\":return\"\".concat(e,\" not subscribed\");case\"loading\":return\"\".concat(e,\" loading...\");case\"interrupted\":return\"\".concat(e,\" interrupted\");case\"playable\":return null}}function oe(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null),r=(function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1])}(),Object(n.useMemo)((function(){return e.videoTrackState&&\"playable\"===e.videoTrackState.state&&(e.isLocalPerson||!0===e.videoTrackState.subscribed||e.isScreenShare)?e.videoTrackState.track:null}),[e.videoTrackState])),c=Object(n.useMemo)((function(){return e.videoTrackState&&(e.isLocalPerson&&\"playable\"===e.videoTrackState.state||e.videoTrackState.subscribed)||e.isScreenShare}),[e.videoTrackState]),i=Object(n.useMemo)((function(){return e.audioTrackState&&e.audioTrackState.track&&\"playable\"===e.audioTrackState.state&&!1!==e.audioTrackState.subscribed?(e.isAudioOnly?e.audioTrackState.track.isFiltered=!0:e.audioTrackState.track.isFiltered=!1,e.isScreenShare?e.audioTrackState.track.isScreenShare=!0:e.audioTrackState.track.isScreenShare=!1,e.audioTrackState.track):null}),[e.audioTrackState]),l=Object(n.useMemo)((function(){return ne(\"video\",e.videoTrackState)}),[e.videoTrackState]),s=Object(n.useMemo)((function(){return ne(\"audio\",e.audioTrackState)}),[e.audioTrackState]);return Object(n.useEffect)((function(){t.current&&(t.current.srcObject=new MediaStream([r]))}),[r]),Object(n.useEffect)((function(){a.current&&(i.isFiltered?(console.log(\"**FILTERING LIVE TRACK**\"),window.stream=new MediaStream([i]),window.mutedAudio=window.mutedAudio||new Audio,window.mutedAudio.muted=!0,window.mutedAudio.srcObject||(window.mutedAudio.srcObject=window.stream),window.mutedAudio.paused&&window.mutedAudio.play(),window.audioCtx=window.audioCtx||new(window.AudioContext||window.webkitAudioContext),window.audioSourceNode=window.audioCtx.createMediaStreamSource(window.stream),\"undefined\"==typeof window.destination&&(window.destination=window.audioCtx.createMediaStreamDestination()),\"undefined\"==typeof window.gainNode&&(window.gainNode=window.audioCtx.createGain()),\"undefined\"==typeof window.panNode&&(window.panNode=window.audioCtx.createStereoPanner()),window.gainNode.gain.value=1,window.panNode.pan.value=1,window.audioSourceNode.connect(window.gainNode).connect(window.panNode).connect(window.destination),a.current.srcObject=window.destination.stream):i.isScreenShare?(console.log(\"***GETTING SCREENSHARE AUDIO\"),a.current.srcObject=new MediaStream([i])):(console.log(\"***NOT FILTERING: LIVE TRACK***\"),a.current.srcObject=new MediaStream([i])))}),[i,window.sessionState]),o.a.createElement(\"div\",{className:function(){var t=\"tile\";return t+=e.isLarge?\" large\":\" small\",e.isLocalPerson&&(t+=\" local\"),e.isScreenShare&&(t+=\" screen-share\"),t}(),onClick:e.onClick,style:{display:c?\"block\":\"none\"}},o.a.createElement(\"div\",{className:\"background\"}),r&&l&&o.a.createElement(\"p\",{className:\"overlay\"},l),r&&o.a.createElement(\"video\",{autoPlay:!0,muted:!0,playsInline:!0,ref:t}),r&&!e.disableCornerMessage&&s&&!l&&o.a.createElement(\"p\",{className:\"corner\"},s),!e.isLocalPerson&&i&&o.a.createElement(\"audio\",{autoPlay:!0,playsInline:!0,ref:a},\" \"))}a(119);function re(e){return o.a.createElement(\"div\",{className:\"call-message\"+(e.isError?\" error\":\"\")},o.a.createElement(\"p\",{className:\"call-message-header\"},e.header),o.a.createElement(\"p\",null,e.detail))}var ce={callItems:{local:{videoTrackState:null,audioTrackState:null}},clickAllowTimeoutFired:!1,camOrMicError:null,fatalError:null};function ie(e,t){switch(t.type){case\"CLICK_ALLOW_TIMEOUT\":return Object(p.a)(Object(p.a)({},e),{},{clickAllowTimeoutFired:!0});case\"PARTICIPANTS_CHANGE\":var a=function(e){for(var t=Object(p.a)({},ce.callItems),a=0,n=Object.entries(e);a<n.length;a++){var o=Object(b.a)(n[a],2),r=o[0],c=o[1];t[r]={videoTrackState:c.tracks.video,audioTrackState:c.tracks.audio},le(c)&&(t[r+\"-screen\"]={videoTrackState:c.tracks.screenVideo,audioTrackState:c.tracks.screenAudio})}return t}(t.participants);return Object(p.a)(Object(p.a)({},e),{},{callItems:a});case\"CAM_OR_MIC_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{camOrMicError:t.message});case\"FATAL_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{fatalError:t.message});default:throw new Error}}function le(e){var t=[\"loading\",\"playable\",\"interrupted\"];return t.includes(e.tracks.screenVideo.state)||t.includes(e.tracks.screenAudio.state)}function se(e){return\"local\"===e}function ue(e){return e.endsWith(\"-screen\")}function de(e){return Object.keys(e).some((function(e){return ue(e)}))}function me(){N();var e=Object(n.useContext)(w),t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=Object(n.useReducer)(ie,ce),l=Object(b.a)(i,2),s=l[0],u=l[1],d=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}(),m=Object(n.useContext)(O),h=m.myStateArray,v=(m.setName,m.setRole),S=m.setSidebar,E=m.setUserList,y=m.setViewMode,j=m.setCamOnAtSessionStart,A=m.setMicOnAtSessionStart,k=m.setAdminPresent,C=(m.setAmAdmin,m.setNumber),x=Object(b.a)(h,2),I=x[0],L=(x[1],function(){return S(!I.sidebar)});window.toggleSidebar=L,window.updateCall=function(){d()},Object(n.useEffect)((function(){if(r.isActive)switch(I.role){case\"Attendee\":case\"Admin\":r.roleOf.Shadow1?y(\"Shadow1\"):r.roleOf.Shadow2?y(\"Shadow2\"):r.roleOf.Shadow3?y(\"Shadow3\"):r.roleOf.Shadow4?y(\"Shadow4\"):r.roleOf.Shadow5?y(\"Shadow5\"):r.roleOf.Shadow6?y(\"Shadow6\"):y(\"Seller\"),I.camOnAtSessionStart&&null===I.camOnAtSessionStart&&(A(e.localAudio()),j(e.localVideo())),e.setLocalAudio(!1),e.setLocalVideo(!1);break;case\"Seller\":case\"Buyer1\":case\"Buyer2\":case\"Buyer3\":case\"Buyer4\":case\"Shadow1\":case\"Shadow2\":case\"Shadow3\":case\"Shadow4\":case\"Shadow5\":case\"Shadow6\":null===I.camOnAtSessionStart&&(A(e.localAudio()),j(e.localVideo())),e.setLocalAudio(!0),e.setLocalVideo(!0)}else r.isActive||(!e.localAudio()&&e.setLocalAudio(I.micOnAtSessionStart),!e.localVideo()&&e.setLocalVideo(I.camOnAtSessionStart),A(null),j(null))}),[r.isActive,I.role]),Object(n.useEffect)((function(){var e=\"Attendee\";for(var t in r.roleOf)r.roleOf[t]==I.name&&(e=t);e!==I.role&&(v(e),e.includes(\"1\")?C(1):e.includes(\"2\")&&C(2))}),[r.roleOf]);var R=Object(n.useCallback)((function(){return new Promise((function(t){console.log(\"*****UPDATING PARTICIPANT LIST******\");var a=!1,n=e.participants(),o={names:[I.name],sessionIdFor:{}};for(var r in n)if(\"local\"!==r){var c=n[r].user_name,i=n[r].session_id;o.names.push(c),o.sessionIdFor[c]=i,console.log(\"***ADDING: \"+c),c.includes(\"_Admin\")&&(a=!0)}a?console.log(\"Admin IS present\"):console.log(\"Admin IS NOT present\"),o.names.sort(),console.log(\"here's the userList: \".concat(o.names)),t([o,a])}))}),[e,I]),M=Object(n.useCallback)((function(){return new Promise((function(t){var a=!1,n=e.participants(),o=setInterval((function(){if(Object.keys(n).length>1||Object.keys(n).length<=1&&n.local.user_name==I.name){for(var e in clearInterval(o),n){var r=n[e].user_name;r.includes(\"_Admin\")&&\"local\"!==e&&(a=!0),console.log(\"Participant present: \".concat(r))}t(a)}}),500)}))}),[e,I]);Object(n.useEffect)((function(){if(e){var t=[\"participant-joined\",\"participant-updated\",\"participant-left\",\"joined-meeting\"];r();for(var a=0,n=t;a<n.length;a++){var o=n[a];e.on(o,r)}return function(){var a,n=Object(f.a)(t);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.off(o,r)}}catch(c){n.e(c)}finally{n.f()}}}function r(t){if(t&&T(t),u({type:\"PARTICIPANTS_CHANGE\",participants:e.participants()}),t&&\"participant-updated\"!=t.action)if(window.updated=t,\"participant-joined\"==t.action||\"participant-left\"==t.action){window.event=t,setTimeout((function(){R().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];E(a),k(n)}))}),50)}else\"joined-meeting\"==t.action&&(console.log(\"*****I JOINED THE MEETING\"),\"Arlo_Admin\"===I.name&&(e.startRecording(),console.log(\"***STARTING TO RECORD***\")),R().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];E(a),I.amAdmin&&!n&&M().then((function(e){c((function(t){return Object(p.a)(Object(p.a)({},t),{},{isKnown:!e})}))}))})))}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"camera-error\",t),function(){e.off(\"camera-error\",t)};function t(e){T(e),u({type:\"CAM_OR_MIC_ERROR\",message:e&&e.errorMsg&&e.errorMsg.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"error\",t),function(){e.off(\"error\",t)};function t(e){T(e),u({type:\"FATAL_ERROR\",message:e&&e.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){var e=setTimeout((function(){u({type:\"CLICK_ALLOW_TIMEOUT\"})}),2500);return function(){clearTimeout(e)}}),[]);var _=function(){var e=[],t=[];return Object.entries(s.callItems).forEach((function(a){var n=Object(b.a)(a,2),r=n[0],c=n[1],i=ue(r)||!se(r)&&!de(s.callItems)||se(r)&&window.numberOfSubs&&window.numberOfSubs>1&&!de(s.callItems),l=o.a.createElement(oe,{key:r,videoTrackState:c.videoTrackState,audioTrackState:c.audioTrackState,isLocalPerson:se(r),isAudioOnly:function(){if(c.audioTrackState&&c.videoTrackState)return c.audioTrackState.subscribed&&!c.videoTrackState.subscribed}(),isLarge:i,disableCornerMessage:ue(r),isScreenShare:ue(r)});i?e.push(l):t.push(l)})),[e,t]}(),P=Object(b.a)(_,2),B=P[0],D=P[1];Object(n.useEffect)((function(){window.largeTiles=B,window.smallTales=D,window.add=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=0;a<t;a++)e.addFakeParticipant()}})),Object(n.useEffect)((function(){window.callState=s}),[s]);var V=function(e){var t=null,a=null,n=!1;return e.fatalError?(t=\"Fatal error: \".concat(e.fatalError),n=!0):e.camOrMicError?(t=\"Error: This page can't access your camera or mic.\",a=\"To troubleshoot in Chrome: To the right in your address bar, click the picture of the camera and select 'Always allow.' Hit enter and then refresh this page.\",n=!0):!function(){var t=e.callItems.local;return!(t&&!t.isLoading)&&e.clickAllowTimeoutFired}()?1===Object.keys(e.callItems).length&&(t=\"You're here! \\ud83d\\udc4b \",a=\"Waiting for everyone else...\"):t='Click \"Allow\" to enable camera and mic access',t||a?{header:t,detail:a,isError:n}:null}(s);return o.a.createElement(\"div\",{className:I.amAdmin&&I.sidebar?\"call-with-sidebar\":\"call\"},I.amAdmin&&o.a.createElement(\"div\",{className:\"sidebar-toggle\",onClick:L},I.sidebar?o.a.createElement(ae.a,{size:\"25px\"}):o.a.createElement(te.a,{size:\"19px\",style:{marginTop:\"3px\"}})),o.a.createElement(\"div\",{className:\"large-tiles \".concat(de(s.callItems)?\"screenshare\":\"\",\" \").concat(de(s.callItems)&&I.sidebar?\"with-sidebar\":\"\",\" count-\").concat(de(s.callItems)?\"1\":window.numberOfSubs&&window.numberOfSubs+1)},V?null:B),o.a.createElement(\"div\",{className:\"small-tiles\"},D),V&&o.a.createElement(re,{header:V.header,detail:V.detail,isError:V.isError}))}a(120),a(121);var fe=o.a.forwardRef((function(e,t){var a=Object(n.useContext)(w),r=o.a.createRef(),c=o.a.createRef(),i=e.type,l=e.page,s=function(t){if(t.target.value){var n=t.target.value;if(\"audio\"==i&&\"main\"==l&&t.target.key.includes(\"audioinput\")&&a.setInputDevicesAsync({audioSource:n}),\"video\"==i&&\"main\"==l&&a.setInputDevicesAsync({videoSource:n}),\"audio\"==i&&\"intro\"==l){var o=Object(b.a)(e.inputs,2),r=(o[0],o[1]),c={deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({audio:c}).then((function(e){var t=e.getAudioTracks()[0];r((function(e){return[t,e[1]]}))}))}if(\"video\"==i&&\"intro\"==l){var s=Object(b.a)(e.inputs,2),u=(s[0],s[1]),d={width:1280,height:720,deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({video:d}).then((function(e){var t=e.getVideoTracks()[0];u((function(e){return[e[0],t]}))}))}t.target.key.includes(\"input\")&&console.log(\"New input: \"+t.target.text)}};return Object(n.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then((function(e){if(\"audio\"==i&&r.current){if(r.current.hasChildNodes())return;for(var t=[],a=0;a!==e.length;++a){var n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"audioinput\"===n.kind&&(s.key=\"audioinput\"+r.length+1,s.text=n.label||\"Microphone \"+(r.length+1),t.push(s))}window.audioOutputs=[];var o=document.createElement(\"option\");o.label=\"-Select Microphone-\",o.className=\"item-heading\";document.createElement(\"option\");r.current.appendChild(o);for(a=0;a!==t.length;++a)r.current.appendChild(t[a])}else if(\"video\"==i&&c.current){if(c.current.hasChildNodes())return;var l=document.createElement(\"option\");l.label=\"-Select Camera-\",l.className=\"item-heading\",c.current.appendChild(l);for(a=0;a!==e.length;++a){var s;n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"videoinput\"===n.kind&&(s.key=\"videooutput\"+c.length+1,s.text=n.label||\"Camera \"+(c.length+1),c.current&&c.current.appendChild(s))}}})).catch((function(e){console.log(e.name+\": \"+e.message)}))})),o.a.createElement(\"div\",{className:\"dropdown-selector\",ref:t},\"audio\"==i&&o.a.createElement(\"ul\",{ref:r,onClick:s}),\"video\"==i&&o.a.createElement(\"ul\",{ref:c,onClick:s}))})),pe=a(46),be=a.n(pe);function he(e){var t,a=Object(n.useRef)(null),r=Object(n.useState)(!1),c=Object(b.a)(r,2),i=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(b.a)(s,2),d=u[0],m=u[1],f=e.onClick,p=Object(n.useRef)(null),h=o.a.createRef(),v=o.a.createRef(),w=o.a.createRef(),g=o.a.createRef(),S=Object(n.useState)(null),E=Object(b.a)(S,2),y=E[0],j=E[1],A=Object(n.useState)(!0),k=Object(b.a)(A,2),C=k[0],T=k[1],N=Object(n.useContext)(O),x=N.myStateArray,L=N.setName,R=(N.setRole,N.setUserList,N.setViewMode,N.setCamOnAtSessionStart,N.setMicOnAtSessionStart,N.setAmAdmin,N.setNumber,Object(b.a)(x,2)),M=R[0],_=(R[1],[\"Arlo\",\"Omid\",\"Jennifer\",\"Sam\",\"Julia\",\"Marissa\",\"Benjamin\",\"S\\xe9bastien\",\"Bryan\"]);Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",P),function(){document.removeEventListener(\"mousedown\",P)}}));var P=function(e){console.log(\"handling click\"),!v.current||v.current.contains(e.target)||h.current.contains(e.target)?!g.current||g.current.contains(e.target)||w.current.contains(e.target)||m(!1):l(!1)};Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1280,height:720}}).then((function(e){if(e){window.mediaStream=e;var t=e.getAudioTracks()[0],a=e.getVideoTracks()[0];j([t,a]),window.localAudio=t,T(!0)}else T(!1)})).catch((function(e){console.log(\"You got an error:\"+e),T(!1)}))}),[]),Object(n.useEffect)((function(){y&&p.current&&(p.current.srcObject=new MediaStream(y)),p.current.muted=!0,window.initialInputs=y}),[y]);return o.a.createElement(\"div\",{className:\"container\"},o.a.createElement(\"div\",{className:\"start-screen-background\"}),o.a.createElement(\"div\",{className:\"instructions\"},o.a.createElement(\"div\",{className:\"fixed-width\"},o.a.createElement(\"div\",{style:{position:\"relative\",marginLeft:\"180px\",marginTop:\"50px\",marginRight:\"180px\",padding:\"20px\",paddingTop:\"40px\",border:\"4px solid whitesmoke\",backgroundColor:\"white\"}},o.a.createElement(\"img\",{src:be.a,style:{width:\"220px\",paddingBottom:\"25px\"}}),o.a.createElement(\"div\",{style:{background:\"white\",opacity:\"1\",zIndex:\"1000\"}},C?o.a.createElement(\"video\",{className:\"lobby-video\",autoPlay:!0,ref:p}):o.a.createElement(\"p\",{style:{height:\"198px\",width:\"352px\",borderRadius:\"20px\",background:\"black\",margin:\"auto\",color:\"white\",fontWeight:\"bolder\",boxSizing:\"border-box\",padding:\"24px\",border:\"2px yellow solid\"}},\"\\u274c Your camera / mic is blocked \\u274c\",o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then \",o.a.createElement(\"u\",{style:{cursor:\"pointer\"},onClick:function(){window.location.reload()}},\"refresh the page.\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"How?\",o.a.createElement(\"br\",null),o.a.createElement(\"ul\",null,o.a.createElement(\"li\",null,o.a.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),o.a.createElement(\"li\",null,o.a.createElement(\"a\",{href:\"https://youtu.be/GceAjizU5WU?t=39\",target:\"_blank\"},\"Option 2\")))),p.current&&C&&o.a.createElement(\"div\",{style:{position:\"relative\",display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",bottom:\"40px\",width:\"250px\",height:\"0px\",margin:\"auto\"}},o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){m(!d)},ref:w},\"Select Camera ^\"),d?o.a.createElement(\"div\",{onClick:function(){return m(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"80px\"}},o.a.createElement(fe,{type:\"video\",page:\"intro\",inputs:[y,j],ref:g})):null),o.a.createElement(\"div\",{style:{width:\"15px\"}}),o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){l(!i)},ref:h},\"Select Mic ^\"),i?o.a.createElement(\"div\",{onClick:function(){return l(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"72px\",overflowY:\"visible\"}},o.a.createElement(fe,{type:\"audio\",page:\"intro\",ref:v,inputs:[y,j]})):null))),C&&o.a.createElement(\"h4\",{className:\"signin\"},o.a.createElement(\"form\",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:\"rgb(230, 240, 249)\",fontSize:\"15px\",width:\"200px\",height:\"30px\",textAlign:\"center\",fontFamily:\"poppins\"},ref:a,value:M.name,onFocus:function(){\"Username\"===M.name&&L(\"\")},onChange:function(e){return function(e){var t=e.target.value;L(t)}(e)}}),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"input\",(t={className:\"new-card\",style:{width:\"150px\",color:\"#1b8bc4\",fontSize:\"17px\"},type:\"submit\"},Object(I.a)(t,\"type\",\"submit\"),Object(I.a)(t,\"value\",\"Enter session\"),Object(I.a)(t,\"onClick\",(function(){console.log(\"setting user ID as \"+M.name),_.includes(M.name)?(M.name=\"Admin\"===M.role?M.name+\"_Admin\":M.name,window.myName=M.name,f()):\"Username\"===M.name||\"\"===M.name?alert(\"Please enter your username.\"):alert('Sorry, username \"'.concat(M.name,'\" does not have access to this meeting.'))})),t))),o.a.createElement(\"br\",null))))))}function ve(){return(ve=Object(P.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{url:\"https://secondbody.daily.co/Livestorm\",token:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyIjoiTGl2ZXN0b3JtIiwibyI6dHJ1ZSwiZXIiOiJsb2NhbCIsImQiOiJlMjU1MmE0Yy02OGM4LTRlYmEtYTYyMS1mZThjZTk4ODA5ZTciLCJpYXQiOjE2MzgzMDE3Nzl9.cYC0TgizVI8xBArYjJf-FBvVV8Je_FraoHpXkq9l2uw\"});case 1:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var we={createRoom:function(){return ve.apply(this,arguments)}};a(122),a(123),a(124);function Oe(e){function t(){return e.highlighted?\"#fb5554\":\"#000000\"}return o.a.createElement(\"svg\",{width:\"28px\",height:\"28px\",viewBox:\"0 0 24 24\",className:e.className,xmlns:\"http://www.w3.org/2000/svg\"},function(){switch(e.type){case\"camera\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-24.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Camera-Off-24px\",transform:\"translate(24.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M13.7573593,6 L4.00585866,6 C2.89706013,6 2,6.8992496 2,8.0085302 L2,15.9914698 C2,16.4835828 2.17760958,16.9352259 2.47229113,17.2850682 L13.7573593,6 Z M16,12.2426407 L16,15.9914698 C16,17.1007504 15.1029399,18 13.9941413,18 L10.2426407,18 L16,12.2426407 Z M16,12.2426407 L16,14.499966 L21.0756492,16.6148096 C21.586154,16.8275189 22,16.5442917 22,16.0045612 L22,7.99539512 C22,7.44565489 21.5875957,7.17183667 21.0756492,7.38514669 L20.7016702,7.54097052 L16,12.2426407 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"mute-mic\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-120.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Microphone-Off-24px\",transform:\"translate(120.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M15.8931049,12.3495358 L15.8883757,12.354265 C15.7702192,12.7237203 15.5976472,13.0928313 15.3634551,13.4334743 C14.9080287,14.0959127 14.281481,14.5761112 13.4232304,14.8194102 L11,17.2426407 L11,18.9906311 C11,18.9937578 11.0000137,18.9968808 11.0000409,19 L9.99077797,19 C9.45097518,19 9,19.4477153 9,20 C9,20.5561352 9.44358641,21 9.99077797,21 L14.009222,21 C14.5490248,21 15,20.5522847 15,20 C15,19.4438648 14.5564136,19 14.009222,19 L12.9999626,19 C12.999986,18.9968804 13,18.9937574 13,18.9906311 L13,16.9383953 C14.793746,16.7093537 16.1268712,15.8533183 17.0115375,14.566531 C17.631941,13.6641258 17.9116422,12.769082 17.9922726,12.124039 C18.0567667,11.6080864 17.715976,11.1348845 17.2185349,11.0241058 L17.2162194,11.0264213 C17.1758852,11.0160463 17.1430789,11.0101085 17.12403,11.0077274 C16.5760096,10.9392248 16.076219,11.3279514 16.0077165,11.8759725 C15.9990827,11.9450424 15.9659776,12.1062504 15.8970768,12.3267333 C15.8944966,12.3349898 15.8931939,12.3425837 15.8931049,12.3495358 Z M14.8100942,4.94726512 C14.3837386,3.80970165 13.2864273,3 12,3 C10.3431458,3 9,4.34314575 9,6 L9,10.7573593 L14.8100942,4.94726512 Z M7.97590142,11.7814579 C7.86511978,11.2840207 7.39191988,10.9432336 6.87596978,11.0077274 C6.32795032,11.0762298 5.93922497,11.5760196 6.0077274,12.124039 C6.05291889,12.4855709 6.16064541,12.9256367 6.35584336,13.401516 L7.97590142,11.7814579 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"screen\":return o.a.createElement(\"path\",{fill:t(),fillRule:\"evenodd\",d:\"M2 5.006C2 3.898 2.898 3 3.99 3h16.02C21.108 3 22 3.897 22 5.006v9.988A2.003 2.003 0 0 1 20.01 17H3.99C2.892 17 2 16.103 2 14.994V5.006zm2 .99v8.009c0 .54.448.995 1 .995h14c.555 0 1-.446 1-.995v-8.01c0-.54-.448-.995-1-.995H5c-.555 0-1 .446-1 .995zM7 20c0-.552.456-1 .995-1h8.01c.55 0 .995.444.995 1 0 .552-.456 1-.995 1h-8.01A.995.995 0 0 1 7 20z\"});case\"leave\":return o.a.createElement(\"path\",{d:\"M19.347 11l-1.71-1.638a.832.832 0 0 1 0-1.222l.03-.03a.922.922 0 0 1 1.27-.003l3.34 3.2a.95.95 0 0 1 0 1.386l-3.34 3.2a.918.918 0 0 1-1.27-.003l-.03-.03a.842.842 0 0 1 0-1.221L19.348 13h-7.352A.995.995 0 0 1 11 12c0-.552.456-1 .995-1h7.352zM16 10h-2V7.995c0-.54-.446-.995-.997-.995H6.997A1 1 0 0 0 6 7.995v8.01c0 .54.446.995.997.995h6.006a1 1 0 0 0 .997-.995V14h2v2.994A2.009 2.009 0 0 1 13.991 19H6.01A2.007 2.007 0 0 1 4 16.994V7.006C4 5.898 4.902 5 6.009 5h7.982C15.101 5 16 5.897 16 7.006V10z\",fill:t(),fillRule:\"evenodd\"});case\"chat\":return o.a.createElement(\"path\",{d:\"M8.984 17.522c.93.308 1.949.478 3.016.478 4.418 0 8-2.91 8-6.5S16.418 5 12 5s-8 2.91-8 6.5c0 1.65.756 3.156 2.003 4.302a8.751 8.751 0 0 1-.71 2.187c-.317.606-.457 1.011 0 1.011 1.727 0 1.99-1.236 3.691-1.478z\",fill:t(),fillRule:\"evenodd\"});default:throw new Error}}())}function ge(e){return o.a.createElement(\"button\",{disabled:e.disabled,onClick:e.onClick,className:\"tray-button\"+(e.newButtonGroup?\" new-group\":\"\")},o.a.createElement(Oe,{type:e.type,highlighted:e.highlighted}))}var Se=a(53),Ee=a.n(Se),ye=a(94),je=a.n(ye);a(125);function Ae(e){var t=Object(n.useContext)(w),a=Object(n.useState)(\"\"),r=Object(b.a)(a,2),c=r[0],i=r[1],l=Object(n.useContext)(g).session,s=Object(b.a)(l,2),u=s[0],d=s[1],m=Object(n.useContext)(O).myStateArray,f=Object(b.a)(m,1)[0],h=u.chatHistory,v=function(e){d((function(t){return Object(p.a)(Object(p.a)({},t),{},{chatHistory:[].concat(Object(F.a)(t.chatHistory),[e])})}))},S=o.a.createRef();return Object(n.useEffect)((function(){if(t)return t.on(\"app-message\",a),function(){t.off(\"app-message\",a)};function a(a){var n=t.participants(),o=n[a.fromId].user_name.includes(\"_Admin\")?n[a.fromId].user_name.split(\"_Admin\").join(\"\"):n[a.fromId].user_name;\"chat\"==a.data.type&&v({sender:o,message:a.data.message}),\"chat\"==a.data.type&&e.notification()}}),[t,h]),Object(n.useEffect)((function(){}),[h]),Object(n.useEffect)((function(){S.current&&S.current.scrollIntoView({behavior:\"smooth\"})}),[h]),e.onClickDisplay?o.a.createElement(\"div\",{className:\"chat\"},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:\"chat-history\"},h.map((function(e,t,a){return e.sender==f.Name||e.sender==f.name.split(\"_Admin\").join(\"\")?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"my message\"},e.message):a[t-1]&&e.sender==a[t-1].sender?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"additional message\"},e.message):o.a.createElement(\"div\",null,o.a.createElement(\"div\",{key:\"name-label-\".concat(t),className:\"name-label\"},o.a.createElement(\"b\",null,e.sender),\":\"),o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"received message\"},e.message))})),o.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:S}))),o.a.createElement(\"form\",{onSubmit:function(e){if(e.preventDefault(),c){t.sendAppMessage({type:\"chat\",message:c},\"*\");var a=t.participants().local.user_name.includes(\"_Admin\")?t.participants().local.user_name.split(\"_Admin\").join(\"\"):t.participants().local.user_name;v({sender:a,message:c}),i(\"\")}}},o.a.createElement(\"label\",{htmlFor:\"chatInput\"}),o.a.createElement(\"input\",{id:\"chatInput\",className:\"chat-input\",type:\"text\",autoComplete:\"off\",placeholder:\"Type your message here..\",value:c,onChange:function(e){i(e.target.value)}}),o.a.createElement(\"button\",{type:\"submit\",className:\"send-chat-button\"},\"Send\"))):null}function ke(e){var t=Object(n.useContext)(w),a=Object(n.useContext)(g).session,r=Object(b.a)(a,2),c=r[0],i=(r[1],Object(n.useContext)(O)),l=i.myStateArray,s=(i.setName,i.setRole,i.setUserList,i.setViewMode),u=i.setCamOnAtSessionStart,d=i.setMicOnAtSessionStart,m=(i.setAmAdmin,Object(b.a)(l,2)),f=m[0],p=(m[1],Object(n.useState)(!1)),h=Object(b.a)(p,2),v=h[0],S=h[1],E=Object(n.useState)(!1),y=Object(b.a)(E,2),j=y[0],A=y[1],k=Object(n.useState)(!1),C=Object(b.a)(k,2),N=C[0],x=C[1],I=Object(n.useState)(!1),L=Object(b.a)(I,2),R=L[0],M=L[1],_=Object(n.useState)(!1),P=Object(b.a)(_,2),B=P[0],D=P[1],V=Object(n.useState)(!1),U=Object(b.a)(V,2),F=U[0],G=U[1],H=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}(),K=o.a.createRef(),Z=o.a.createRef(),W=o.a.createRef(),J=o.a.createRef(),Y=o.a.createRef();window.updateTray=function(){H()};var q=Object(n.useState)(!1),X=Object(b.a)(q,2),Q=X[0],$=X[1],ee=Object(n.useState)(!1),te=Object(b.a)(ee,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",oe),function(){document.removeEventListener(\"mousedown\",oe)}}));var oe=function(e){console.log(\"handling click\"),!Z.current||Z.current.contains(e.target)||K.current.contains(e.target)?!J.current||J.current.contains(e.target)||W.current.contains(e.target)||ne(!1):$(!1)};return Object(n.useEffect)((function(){c.isActive?f.role.includes(\"Shadow\")||f.role.includes(\"Seller\")||f.role.includes(\"Buyer\")||(d(t.localAudio()),u(t.localVideo()),t.setLocalAudio(!1),t.setLocalVideo(!1)):c.isActive||(!t.localAudio()&&t.setLocalAudio(f.micOnAtSessionStart),!t.localVideo()&&t.setLocalVideo(f.camOnAtSessionStart),d(null),u(null))}),[c.isActive,f.role]),Object(n.useEffect)((function(){if(t)return e(),t.on(\"participant-updated\",e),function(){t.off(\"participant-updated\",e)};function e(e){e&&T(e);var a=function(e){var t,a,n,o=!1;if(e&&e.participants()&&e.participants().local){var r=e.participants().local;t=!r.video,a=!r.audio,n=r.screen,o=r.record}return[t,a,n,o]}(t),n=Object(b.a)(a,4),o=n[0],r=n[1],c=n[2],i=n[3];S(o),A(r),x(c),M(i)}}),[t]),o.a.createElement(\"div\",{className:f.amAdmin&&f.sidebar?\"tray-with-sidebar\":\"tray\"},o.a.createElement(ge,{type:\"camera\",highlighted:v,onClick:function(){t.setLocalVideo(v)}}),o.a.createElement(\"div\",{onClick:function(){ne(!ae)},style:{position:\"absolute\",left:\"57px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:W},\"^\"),ae?o.a.createElement(fe,{type:\"video\",page:\"main\",ref:J}):null),o.a.createElement(ge,{type:\"mute-mic\",highlighted:j,onClick:function(){t.setLocalAudio(j)}}),o.a.createElement(\"div\",{onClick:function(){$(!Q)},style:{position:\"absolute\",left:\"123px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:K},\"^\"),Q?o.a.createElement(fe,{type:\"audio\",page:\"main\",ref:Z}):null),z.a.supportedBrowser().supportsScreenShare&&f.amAdmin&&o.a.createElement(ge,{type:\"screen\",highlighted:N,onClick:function(){N||!function(){var e=!1,a=t.participants();for(var n in a)a[n].screenVideoTrack&&(e=!0);return e}()?N?t.stopScreenShare():t.startScreenShare():alert(\"There is already a screenshare in progress\")}}),o.a.createElement(ge,{type:\"chat\",highlighted:F,onClick:function(){D(!B),F&&G(!F)}}),o.a.createElement(Ae,{onClickDisplay:B,notification:function(){G(!F)}}),o.a.createElement(\"div\",{className:\"status-display\"},o.a.createElement(\"div\",{style:{height:\"30px\"}},\"Roleplay:  \\xa0\",c.isActive?o.a.createElement(\"div\",{className:\"display-card active\"},\"Live\"):o.a.createElement(\"div\",{className:\"display-card paused\"},\"Paused\")),o.a.createElement(\"div\",{className:\"vertical-line\"}),!c.isActive||\"Admin\"!==f.role&&\"Attendee\"!==f.role?o.a.createElement(\"div\",{style:{height:\"30px\"}},\"My Role: \\xa0\",\"Admin\"==f.role||\"Attendee\"==f.role?o.a.createElement(\"span\",{className:\"display-card role\"},\"Viewer\"):o.a.createElement(\"span\",{className:\"display-card role\"},f.role.match(/\\D/g).join(\"\"))):o.a.createElement(\"div\",{className:\"my-view\"},\"My View: \\xa0\",o.a.createElement(\"span\",null,o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{className:\"my-view-selector\",value:f.viewMode,onChange:function(e){return s(e.target.value)}},o.a.createElement(\"option\",{value:\"Seller\"},\"Seller\"),c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"Shadow1\",selected:!0},\"Shadow 1\"),c.roleOf.Shadow2&&o.a.createElement(\"option\",{value:\"Shadow2\"},\"Shadow 2\"),c.roleOf.Shadow3&&o.a.createElement(\"option\",{value:\"Shadow3\"},\"Shadow 3\"),c.roleOf.Shadow4&&o.a.createElement(\"option\",{value:\"Shadow4\"},\"Shadow 4\"),c.roleOf.Shadow5&&o.a.createElement(\"option\",{value:\"Shadow5\"},\"Shadow 5\"),c.roleOf.Shadow6&&o.a.createElement(\"option\",{value:\"Shadow6\"},\"Shadow 6\"),c.roleOf.Seller&&c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"All\"},\"All\"),c.roleOf.Shadow1||c.roleOf.Shadow2||c.roleOf.Shadow3||c.roleOf.Shadow4||c.roleOf.Shadow5||c.roleOf.Shadow6&&o.a.createElement(\"option\",{value:\"All\"},\"All\"))))))),o.a.createElement(\"img\",{ref:Y,src:Ee.a,onClick:function(){Y.current.src=R?Ee.a:je.a,R?t.stopRecording():t.startRecording()},width:55,height:37,className:\"recording-button\"}),o.a.createElement(ge,{type:\"leave\",disabled:e.disabled,newButtonGroup:!1,highlighted:!0,onClick:function(){e.onClickLeaveCall&&e.onClickLeaveCall()}}))}a(126),a(127);function Ce(e){Object(n.useContext)(w);var t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=e.role,l=Object(n.useContext)(O),s=l.myStateArray,u=(l.setNumber,Object(b.a)(s,2)),d=u[0];u[1];return o.a.createElement(\"form\",{className:\"dropdown\"},o.a.createElement(\"select\",{className:\"selector\",id:i,onChange:function(e){window.role=i;var t=e.target.id,a=e.target.value;c((function(e){return Object(p.a)(Object(p.a)({},e),{},{roleOf:Object(p.a)(Object(p.a)({},e.roleOf),{},Object(I.a)({},t,a))})})),console.log(e.target.id+\" is now: \"+e.target.value),c((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))},value:r.roleOf[i]},o.a.createElement(\"option\",{value:null}),d.userList.names&&d.userList.names.length>0&&d.userList.names.map((function(e){return o.a.createElement(\"option\",{value:e},e.includes(\"_Admin\")?e.split(\"_Admin\").join(\"\"):e)}))))}function Te(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),r=(a[0],a[1],Object(n.useContext)(w)),c=Object(n.useState)(!1),i=Object(b.a)(c,2),l=(i[0],i[1]),s=Object(n.useState)(!1),u=Object(b.a)(s,2),d=(u[0],u[1]),m=Object(n.useState)(!1),h=Object(b.a)(m,2),v=(h[0],h[1]),S=Object(n.useState)(!1),E=Object(b.a)(S,2),y=(E[0],E[1],Object(n.useState)(!1)),j=Object(b.a)(y,2),A=(j[0],j[1],Object(n.useContext)(g).session),k=Object(b.a)(A,2),C=k[0],N=k[1],x=Object(n.useContext)(O),I=x.myStateArray,L=(x.setName,x.setRole,x.setUserList,x.setViewMode,x.setCamOnAtSessionStart,x.setMicOnAtSessionStart,x.setAdminPresent,x.setAmAdmin,Object(b.a)(I,2)),R=L[0],M=(L[1],function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}());window.updateAdminPanel=M;var _=Object(n.useState)(\"Play\"),P=Object(b.a)(_,2),B=P[0],D=P[1],V=Object(n.useState)(\"monologue3\"),U=Object(b.a)(V,2),F=U[0],G=U[1],z=o.a.createRef(),H=o.a.createRef();Object(n.useEffect)((function(){if(r){for(var e=[\"participant-joined\",\"participant-left\",\"joined-meeting\"],t=0,a=e;t<a.length;t++){var n=a[t];r.on(n,(function(){return setTimeout((function(){return M()}),100)}))}return function(){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.off(n,(function(){return setTimeout((function(){return M()}),100)}))}}catch(o){a.e(o)}finally{a.f()}}}}),[r]),Object(n.useEffect)((function(){C.hasAnUpdate&&(console.log(\"****HAS AN UPDATE\"),K(),N((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!1})})))}),[C.hasAnUpdate]);var K=function(){console.log(\"Sending current state...\"),r.sendAppMessage(C,\"*\")};return Object(n.useEffect)((function(){if(r)return e(),r.on(\"participant-updated\",e),function(){r.off(\"participant-updated\",e)};function e(e){e&&T(e);var t=function(e){var t,a,n=!1;if(e&&e.participants()&&e.participants().local){var o=e.participants().local;t=!o.video,a=!o.audio,n=o.screen}return[t,a,n]}(r),a=Object(b.a)(t,3),n=a[0],o=a[1],c=a[2];l(n),d(o),v(c)}}),[r]),o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:R.sidebar?\"admin-panel on\":\"admin-panel off\"},o.a.createElement(\"div\",{className:\"role-selector-section\"},o.a.createElement(\"div\",{className:\"selector-box\"},\"Buyer(s)\",o.a.createElement(Ce,{role:\"Buyer1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Buyer2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Buyer3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Buyer4\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller\",o.a.createElement(Ce,{role:\"Seller\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller's shadow(s)\",o.a.createElement(Ce,{role:\"Shadow1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Shadow2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Shadow3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Shadow4\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Shadow5\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Ce,{role:\"Shadow6\",selectedRoles:\"selectedRoles\"}))),o.a.createElement(\"div\",{className:\"session-toggle\"},o.a.createElement(\"label\",{class:\"switch\"},o.a.createElement(\"input\",{type:\"checkbox\",id:\"state\",checked:C.isActive,onChange:function(){N((function(e){return Object(p.a)(Object(p.a)({},e),{},{isActive:!e.isActive})})),N((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))}}),o.a.createElement(\"span\",{class:\"slider round\"})),o.a.createElement(\"p\",null,\"Session active\")),o.a.createElement(\"div\",{className:\"practice-audio hidden\",ref:z},\"Practice audio\",o.a.createElement(\"div\",{style:{height:\"30px\",margin:\"auto\",marginTop:\"5px\"}},o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{class:\"practice-audio-dropdown\",onChange:function(e){G(e.target.value),console.log(\"***CHANGED TO \"+e.target.value)}},o.a.createElement(\"option\",{value:\"monologue3\"},\"Anna\"),o.a.createElement(\"option\",{value:\"monologue5\"},\"Livestorm A\"),o.a.createElement(\"option\",{value:\"monologue6\"},\"Livestorm B\"),o.a.createElement(\"option\",{value:\"monologue4\"},\"IBM Garage \"))))),o.a.createElement(\"span\",{style:{color:\"green\",fontSize:\"16px\",fontFamily:\"Verdana, Geneva, Tahoma, sans-serif\"}},o.a.createElement(\"button\",{onClick:function(){var e=C.roleOf.Shadow1&&R.userList.sessionIdFor[C.roleOf.Shadow1],t=C.roleOf.Shadow2&&R.userList.sessionIdFor[C.roleOf.Shadow2];if(C.roleOf.Shadow1==R.name&&(e=\"me\"),C.roleOf.Shadow2==R.name&&(t=\"me\"),e||t){var a=window.audioIsPlaying?\"pause\":\"play\",n={type:\"instructions\",target:F,action:a,recipient:e},o={type:\"instructions\",target:F+\"B\",action:a,recipient:t};e&&(\"me\"!=e?r.sendAppMessage(n,e):\"me\"==e&&W(F,a),console.log(\"Sent \".concat(a,\" request to \").concat(C.roleOf.Shadow1))),t&&(\"me\"!=t?r.sendAppMessage(o,t):\"me\"==t&&W(F+\"B\",a),console.log(\"Sent \".concat(a,\" request to \").concat(C.roleOf.Shadow2))),window.audioIsPlaying=!window.audioIsPlaying,D(window.audioIsPlaying?\"Pause\":\"Play\")}else console.log(\"no recipients.\")},id:\"play-pause\"},B))),o.a.createElement(\"div\",{className:\"training-toggle\",ref:H,onClick:function(){z.current.classList.toggle(\"hidden\"),H.current.innerText=z.current.classList.contains(\"hidden\")?\"Show Practice\":\"X\"}},\"Show Practice\")))}var Ne=\"STATE_JOINING\",xe=\"STATE_JOINED\",Ie=\"STATE_ERROR\";function Le(){var e=Object(n.useState)(\"STATE_IDLE\"),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=Object(b.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(null),d=Object(b.a)(u,2),m=d[0],h=d[1],v=Object(n.useState)({type:\"sessionState\",isKnown:!1,isActive:!1,AdminVisible:!1,hasAnUpdate:!1,roleOf:{Buyer1:\"\",Buyer2:\"\",Buyer3:\"\",Buyer4:\"\",Seller:\"\",Shadow1:\"\",Shadow2:\"\",Shadow3:\"\",Shadow4:\"\",Shadow5:\"\",Shadow6:\"\"},chatHistory:[]}),S=Object(b.a)(v,2),E=S[0],y=S[1],j=Object(n.useState)({name:\"Username\",role:window.myRole,sidebar:!0,amAdmin:!0,userList:{names:[],sessionIdFor:{}},adminPresent:!1,viewMode:null,audioIsPlaying:!1,camOnAtSessionStart:null,micOnAtSessionStart:null,number:null}),A=Object(b.a)(j,2),k=A[0],C=A[1],N=Object(n.useCallback)((function(){return r(\"STATE_CREATING\"),we.createRoom().then((function(e){return e})).catch((function(e){console.log(\"Error creating room\",e),s(null),r(\"STATE_IDLE\")}))}),[]),x=Object(n.useCallback)((function(e,t){(function(){var a=Object(P.a)(_.a.mark((function a(){var n;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=z.a.createCallObject({subscribeToTracksAutomatically:!1,url:e,token:t}),s(e),h(n),r(Ne),a.next=6,n.startCamera();case 6:return a.next=8,n.setUserName(k.name);case 8:window.initialInputs?(console.log(\"initial audio: \"+window.initialInputs[0]+\". Initial video: \"+window.initialInputs[1]),n.join({audioSource:window.initialInputs[0],videoSource:window.initialInputs[1]})):navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){if(e){var t=e.getAudioTracks(),a=e.getVideoTracks();t&&t.length>0&&a&&a.length>0&&n.join({audioSource:t[0],videoSource:a[0]})}})),console.log(\"joining the call as \"+k.name),Z(l)+\"&N=\"+k.name+\"&R=\"+k.role;case 11:case\"end\":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[k.name]),I=Object(n.useCallback)((function(){m&&(m.stopRecording(),a===Ie?m.destroy().then((function(){s(null),h(null),r(\"STATE_IDLE\"),window.initialize()})):(r(\"STATE_LEAVING\"),m.leave(),window.initialize()))}),[m,a]);Object(n.useEffect)((function(){var e=K();e&&window.initialInputs&&x(e)}),[x]),Object(n.useEffect)((function(){var e=Z(l);window.pageUrl=e,window.myP&&(e.indexOf(\"?\")>-1?e+=\"&P=\"+window.myP:e+=\"?P=\"+window.myP),e!==window.location.href&&window.history.replaceState(null,null,e)}),[l]),Object(n.useEffect)((function(){window.callObject=m}),[m]),Object(n.useEffect)((function(){window.myState=k}),[k]),Object(n.useEffect)((function(){window.userList=k.userList}),[k.userList]),Object(n.useEffect)((function(){window.sessionState=E}),[E]),Object(n.useEffect)((function(){m&&(window.record=function(){m.startRecording()},window.stop=function(){m.stopRecording()})}),[a]),Object(n.useEffect)((function(){var e;if(m){if(!E.isKnown&&k.adminPresent){e=setInterval((function(){E.isKnown?clearInterval(e):(m.sendAppMessage(\"State please?\",\"*\"),console.log(\"Requesting meeting state...\"))}),1e3)}return function(){e&&clearInterval(e)}}}),[E.isKnown,k.adminPresent]),Object(n.useEffect)((function(){if(m){var e=[\"joined-meeting\",\"left-meeting\",\"error\",\"participant-joined\"];o();for(var t=0,a=e;t<a.length;t++){var n=a[t];m.on(n,o)}return function(){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;m.off(n,o)}}catch(r){a.e(r)}finally{a.f()}}}function o(e){switch(e&&T(e),m.meetingState()){case\"joined-meeting\":r(xe),m.setNetworkTopology({topology:\"sfu\"}),console.log(\"*****JOINED MEETING\"),\"\"==k.name&&m.leave(),window.sessionState.isKnown;break;case\"left-meeting\":m.destroy().then((function(){s(null),h(null),r(\"STATE_IDLE\"),clearInterval(window.stateRequest),window.initialize()}));break;case\"participant-joined\":break;case\"error\":r(Ie)}}}),[m]),Object(n.useEffect)((function(){if(m)return m.on(\"app-message\",e),function(){m.off(\"app-message\",e)};function e(e){if(e)if(T(e),console.log(\"received app message from \".concat(e.fromId,\": \"),e.data),e.data.constructor===Object&&\"sessionState\"==e.data.type){var t=e.data;t.hasAnUpdate=!1,y(t)}else e.data.constructor===Object&&\"instructions\"==e.data.type&&e.data.recipient==m.participants().local.session_id?W(e.data.target,e.data.action):\"State please?\"==e.data&&(console.log(\"*******Received state request, and sessionState.isKnown: \"+E.isKnown),k.amAdmin&&E.isKnown&&(console.log(\"Sending current state...\"),m.sendAppMessage(E,\"*\")))}}),[m,E]);var L=[Ne,xe,Ie].includes(a);return o.a.createElement(\"div\",{className:\"app\"},o.a.createElement(g.Provider,{value:{session:[E,y]}},o.a.createElement(O.Provider,{value:{myStateArray:[k,C],setName:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e})}))},setRole:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{role:e})}))},setSidebar:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{sidebar:e})}))},setUserList:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{userList:e})}))},setViewMode:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{viewMode:e})}))},setCamOnAtSessionStart:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{camOnAtSessionStart:e})}))},setMicOnAtSessionStart:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{micOnAtSessionStart:e})}))},setAdminPresent:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{adminPresent:e})}))},setAmAdmin:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{amAdmin:e})}))},setNumber:function(e){C((function(t){return Object(p.a)(Object(p.a)({},t),{},{number:e})}))}}},L?o.a.createElement(w.Provider,{value:m},o.a.createElement(me,{roomUrl:l}),o.a.createElement(ke,{onClickLeaveCall:I}),k.amAdmin&&o.a.createElement(Te,null)):o.a.createElement(he,{onClick:function(){N().then((function(e){return x(e.url,e.token)}))}}))))}a(128),a(129);function Re(e,t){if(t)switch(t.state){case\"blocked\":return t.blocked.byPermissions?\"\".concat(e,\" permission denied\"):t.blocked.byDeviceMissing?\"\".concat(e,\" device missing\"):\"\".concat(e,\" blocked\");case\"off\":return t.off.byUser?\"\".concat(e,\" muted\"):t.off.byBandwidth?\"\".concat(e,\" muted to save bandwidth\"):\"\".concat(e,\" off\");case\"sendable\":return\"\".concat(e,\" not subscribed\");case\"loading\":return\"\".concat(e,\" loading...\");case\"interrupted\":return\"\".concat(e,\" interrupted\");case\"playable\":return null}}function Me(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null),r=(function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1])}(),Object(n.useMemo)((function(){return e.videoTrackState&&\"playable\"===e.videoTrackState.state&&(e.isLocalPerson||!0===e.videoTrackState.subscribed||e.isScreenShare)?e.videoTrackState.track:null}),[e.videoTrackState])),c=Object(n.useMemo)((function(){return e.videoTrackState&&(e.isLocalPerson&&\"playable\"===e.videoTrackState.state||e.videoTrackState.subscribed)||e.isScreenShare}),[e.videoTrackState]),i=Object(n.useMemo)((function(){return e.audioTrackState&&e.audioTrackState.track&&\"playable\"===e.audioTrackState.state&&!1!==e.audioTrackState.subscribed?(e.isAudioOnly?e.audioTrackState.track.isFiltered=!0:e.audioTrackState.track.isFiltered=!1,e.isScreenShare?e.audioTrackState.track.isScreenShare=!0:e.audioTrackState.track.isScreenShare=!1,e.audioTrackState.track):null}),[e.audioTrackState]),l=Object(n.useMemo)((function(){return Re(\"video\",e.videoTrackState)}),[e.videoTrackState]),s=Object(n.useMemo)((function(){return Re(\"audio\",e.audioTrackState)}),[e.audioTrackState]);return Object(n.useEffect)((function(){t.current&&(t.current.srcObject=new MediaStream([r]))}),[r]),Object(n.useEffect)((function(){a.current&&(i.isFiltered?(console.log(\"**FILTERING LIVE TRACK**\"),window.stream=new MediaStream([i]),window.mutedAudio=window.mutedAudio||new Audio,window.mutedAudio.muted=!0,window.mutedAudio.srcObject||(window.mutedAudio.srcObject=window.stream),window.mutedAudio.paused&&window.mutedAudio.play(),window.audioCtx=window.audioCtx||new(window.AudioContext||window.webkitAudioContext),window.audioSourceNode=window.audioCtx.createMediaStreamSource(window.stream),\"undefined\"==typeof window.destination&&(window.destination=window.audioCtx.createMediaStreamDestination()),\"undefined\"==typeof window.gainNode&&(window.gainNode=window.audioCtx.createGain()),\"undefined\"==typeof window.panNode&&(window.panNode=window.audioCtx.createStereoPanner()),window.gainNode.gain.value=1,window.panNode.pan.value=1,window.audioSourceNode.connect(window.gainNode).connect(window.panNode).connect(window.destination),a.current.srcObject=window.destination.stream):i.isScreenShare?(console.log(\"***GETTING SCREENSHARE AUDIO\"),a.current.srcObject=new MediaStream([i])):(console.log(\"***NOT FILTERING: LIVE TRACK***\"),a.current.srcObject=new MediaStream([i])))}),[i,window.sessionState]),o.a.createElement(\"div\",{className:function(){var t=\"tile\";return t+=e.isLarge?\" large\":\" small\",e.isLocalPerson&&(t+=\" local\"),e.isScreenShare&&(t+=\" screen-share\"),t}(),onClick:e.onClick,style:{display:c?\"block\":\"none\"}},o.a.createElement(\"div\",{className:\"background\"}),r&&l&&o.a.createElement(\"p\",{className:\"overlay\"},l),r&&o.a.createElement(\"video\",{autoPlay:!0,muted:!0,playsInline:!0,ref:t}),r&&!e.disableCornerMessage&&s&&!l&&o.a.createElement(\"p\",{className:\"corner\"},s),!e.isLocalPerson&&i&&o.a.createElement(\"audio\",{autoPlay:!0,playsInline:!0,ref:a},\" \"))}a(130);function _e(e){return o.a.createElement(\"div\",{className:\"call-message\"+(e.isError?\" error\":\"\")},o.a.createElement(\"p\",{className:\"call-message-header\"},e.header),o.a.createElement(\"p\",null,e.detail))}var Pe={callItems:{local:{videoTrackState:null,audioTrackState:null}},clickAllowTimeoutFired:!1,camOrMicError:null,fatalError:null};function Be(e,t){switch(t.type){case\"CLICK_ALLOW_TIMEOUT\":return Object(p.a)(Object(p.a)({},e),{},{clickAllowTimeoutFired:!0});case\"PARTICIPANTS_CHANGE\":var a=function(e){for(var t=Object(p.a)({},Pe.callItems),a=0,n=Object.entries(e);a<n.length;a++){var o=Object(b.a)(n[a],2),r=o[0],c=o[1];t[r]={videoTrackState:c.tracks.video,audioTrackState:c.tracks.audio},De(c)&&(t[r+\"-screen\"]={videoTrackState:c.tracks.screenVideo,audioTrackState:c.tracks.screenAudio})}return t}(t.participants);return Object(p.a)(Object(p.a)({},e),{},{callItems:a});case\"CAM_OR_MIC_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{camOrMicError:t.message});case\"FATAL_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{fatalError:t.message});default:throw new Error}}function De(e){var t=[\"loading\",\"playable\",\"interrupted\"];return t.includes(e.tracks.screenVideo.state)||t.includes(e.tracks.screenAudio.state)}function Ve(e){return\"local\"===e}function Ue(e){return e.endsWith(\"-screen\")}function Fe(e){return Object.keys(e).some((function(e){return Ue(e)}))}function Ge(){N();var e=Object(n.useContext)(w),t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=Object(n.useReducer)(Be,Pe),l=Object(b.a)(i,2),s=l[0],u=l[1],d=(function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1])}(),Object(n.useContext)(O)),m=d.myStateArray,h=d.setRole,v=d.setSidebar,S=d.setUserList,E=d.setViewMode,y=d.setCamOnAtSessionStart,j=d.setMicOnAtSessionStart,A=d.setAdminPresent,k=d.setNumber,C=Object(b.a)(m,1)[0],x=function(){return v(!C.sidebar)};window.toggleSidebar=x,Object(n.useEffect)((function(){if(r.isActive)switch(C.role){case\"Attendee\":case\"Admin\":r.roleOf.Shadow1?E(\"Shadow1\"):r.roleOf.Shadow2?E(\"Shadow2\"):r.roleOf.Shadow3?E(\"Shadow3\"):r.roleOf.Shadow4?E(\"Shadow4\"):r.roleOf.Shadow5?E(\"Shadow5\"):r.roleOf.Shadow6?E(\"Shadow6\"):E(\"Seller\"),C.camOnAtSessionStart&&null===C.camOnAtSessionStart&&(j(e.localAudio()),y(e.localVideo())),e.setLocalAudio(!1),e.setLocalVideo(!1);break;case\"Seller\":case\"Buyer1\":case\"Buyer2\":case\"Buyer3\":case\"Buyer4\":case\"Shadow1\":case\"Shadow2\":case\"Shadow3\":case\"Shadow4\":case\"Shadow5\":case\"Shadow6\":null===C.camOnAtSessionStart&&(j(e.localAudio()),y(e.localVideo())),e.setLocalAudio(!0),e.setLocalVideo(!0)}else r.isActive||(!e.localAudio()&&e.setLocalAudio(C.micOnAtSessionStart),!e.localVideo()&&e.setLocalVideo(C.camOnAtSessionStart),j(null),y(null))}),[r.isActive,C.role]),Object(n.useEffect)((function(){var e=\"Attendee\";for(var t in r.roleOf)r.roleOf[t]==C.name&&(e=t);e!==C.role&&(h(e),e.includes(\"1\")?k(1):e.includes(\"2\")&&k(2))}),[r.roleOf]);var I=Object(n.useCallback)((function(){return new Promise((function(t){console.log(\"*****UPDATING PARTICIPANT LIST******\");var a=!1,n=e.participants(),o={names:[C.name],sessionIdFor:{}};for(var r in n)if(\"local\"!==r){var c=n[r].user_name,i=n[r].session_id;o.names.push(c),o.sessionIdFor[c]=i,console.log(\"***ADDING: \"+c),c.includes(\"_Admin\")&&(a=!0)}a?console.log(\"Admin IS present\"):console.log(\"Admin IS NOT present\"),o.names.sort(),console.log(\"here's the userList: \".concat(o.names)),t([o,a])}))}),[e,C]),L=Object(n.useCallback)((function(){return new Promise((function(t){var a=!1,n=e.participants(),o=setInterval((function(){if(Object.keys(n).length>1||Object.keys(n).length<=1&&n.local.user_name==C.name){for(var e in clearInterval(o),n){var r=n[e].user_name;r.includes(\"_Admin\")&&\"local\"!==e&&(a=!0),console.log(\"Participant present: \".concat(r))}t(a)}}),500)}))}),[e,C]);Object(n.useEffect)((function(){if(e){var t=[\"participant-joined\",\"participant-updated\",\"participant-left\",\"joined-meeting\"];r();for(var a=0,n=t;a<n.length;a++){var o=n[a];e.on(o,r)}return function(){var a,n=Object(f.a)(t);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.off(o,r)}}catch(c){n.e(c)}finally{n.f()}}}function r(t){if(t&&T(t),u({type:\"PARTICIPANTS_CHANGE\",participants:e.participants()}),t&&\"participant-updated\"!=t.action)if(window.updated=t,\"participant-joined\"==t.action||\"participant-left\"==t.action){window.event=t,setTimeout((function(){I().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];S(a),A(n)}))}),50)}else\"joined-meeting\"==t.action&&(console.log(\"*****I JOINED THE MEETING\"),I().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];S(a),C.amAdmin&&!n&&L().then((function(e){c((function(t){return Object(p.a)(Object(p.a)({},t),{},{isKnown:!e})}))}))})))}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"camera-error\",t),function(){e.off(\"camera-error\",t)};function t(e){T(e),u({type:\"CAM_OR_MIC_ERROR\",message:e&&e.errorMsg&&e.errorMsg.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"error\",t),function(){e.off(\"error\",t)};function t(e){T(e),u({type:\"FATAL_ERROR\",message:e&&e.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){var e=setTimeout((function(){u({type:\"CLICK_ALLOW_TIMEOUT\"})}),2500);return function(){clearTimeout(e)}}),[]);var R=function(){var e=[],t=[];return Object.entries(s.callItems).forEach((function(a){var n=Object(b.a)(a,2),r=n[0],c=n[1],i=Ue(r)||!Ve(r)&&!Fe(s.callItems)||Ve(r)&&window.numberOfSubs&&window.numberOfSubs>1&&!Fe(s.callItems),l=o.a.createElement(Me,{key:r,videoTrackState:c.videoTrackState,audioTrackState:c.audioTrackState,isLocalPerson:Ve(r),isAudioOnly:function(){if(c.audioTrackState&&c.videoTrackState)return c.audioTrackState.subscribed&&!c.videoTrackState.subscribed}(),isLarge:i,disableCornerMessage:Ue(r),isScreenShare:Ue(r)});i?e.push(l):t.push(l)})),[e,t]}(),M=Object(b.a)(R,2),_=M[0],P=M[1];Object(n.useEffect)((function(){window.largeTiles=_,window.smallTales=P,window.add=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=0;a<t;a++)e.addFakeParticipant()}})),Object(n.useEffect)((function(){window.callState=s}),[s]);var B=function(e){var t=null,a=null,n=!1;return e.fatalError?(t=\"Fatal error: \".concat(e.fatalError),n=!0):e.camOrMicError?(t=\"Error: This page can't access your camera or mic.\",a=\"To troubleshoot in Chrome: To the right in your address bar, click the picture of the camera and select 'Always allow.' Hit enter and then refresh this page.\",n=!0):!function(){var t=e.callItems.local;return!(t&&!t.isLoading)&&e.clickAllowTimeoutFired}()?1===Object.keys(e.callItems).length&&(t=\"You're here! \\ud83d\\udc4b \",a=\"Waiting for everyone else...\"):t='Click \"Allow\" to enable camera and mic access',t||a?{header:t,detail:a,isError:n}:null}(s);return o.a.createElement(\"div\",{className:C.amAdmin&&C.sidebar?\"call-with-sidebar\":\"call\"},C.amAdmin&&o.a.createElement(\"div\",{className:\"sidebar-toggle\",onClick:x},C.sidebar?o.a.createElement(ae.a,{size:\"25px\"}):o.a.createElement(te.a,{size:\"19px\",style:{marginTop:\"3px\"}})),o.a.createElement(\"div\",{className:\"large-tiles \".concat(Fe(s.callItems)?\"screenshare\":\"\",\" \").concat(Fe(s.callItems)&&C.sidebar?\"with-sidebar\":\"\",\" count-\").concat(Fe(s.callItems)?\"1\":window.numberOfSubs&&window.numberOfSubs+1)},B?null:_),o.a.createElement(\"div\",{className:\"small-tiles\"},P),B&&o.a.createElement(_e,{header:B.header,detail:B.detail,isError:B.isError}))}a(131),a(132);var ze=o.a.forwardRef((function(e,t){var a=Object(n.useContext)(w),r=o.a.createRef(),c=o.a.createRef(),i=e.type,l=e.page,s=function(t){if(t.target.value){var n=t.target.value;if(\"audio\"==i&&\"main\"==l&&t.target.key.includes(\"audioinput\")&&a.setInputDevicesAsync({audioSource:n}),\"video\"==i&&\"main\"==l&&a.setInputDevicesAsync({videoSource:n}),\"audio\"==i&&\"intro\"==l){var o=Object(b.a)(e.inputs,2),r=(o[0],o[1]),c={deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({audio:c}).then((function(e){var t=e.getAudioTracks()[0];r((function(e){return[t,e[1]]}))}))}if(\"video\"==i&&\"intro\"==l){var s=Object(b.a)(e.inputs,2),u=(s[0],s[1]),d={width:1280,height:720,deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({video:d}).then((function(e){var t=e.getVideoTracks()[0];u((function(e){return[e[0],t]}))}))}t.target.key.includes(\"input\")&&console.log(\"New input: \"+t.target.text)}};return Object(n.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then((function(e){if(\"audio\"==i&&r.current){if(r.current.hasChildNodes())return;for(var t=[],a=0;a!==e.length;++a){var n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"audioinput\"===n.kind&&(s.key=\"audioinput\"+r.length+1,s.text=n.label||\"Microphone \"+(r.length+1),t.push(s))}window.audioOutputs=[];var o=document.createElement(\"option\");o.label=\"-Select Microphone-\",o.className=\"item-heading\";document.createElement(\"option\");r.current.appendChild(o);for(a=0;a!==t.length;++a)r.current.appendChild(t[a])}else if(\"video\"==i&&c.current){if(c.current.hasChildNodes())return;var l=document.createElement(\"option\");l.label=\"-Select Camera-\",l.className=\"item-heading\",c.current.appendChild(l);for(a=0;a!==e.length;++a){var s;n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"videoinput\"===n.kind&&(s.key=\"videooutput\"+c.length+1,s.text=n.label||\"Camera \"+(c.length+1),c.current&&c.current.appendChild(s))}}})).catch((function(e){console.log(e.name+\": \"+e.message)}))})),o.a.createElement(\"div\",{className:\"dropdown-selector\",ref:t},\"audio\"==i&&o.a.createElement(\"ul\",{ref:r,onClick:s}),\"video\"==i&&o.a.createElement(\"ul\",{ref:c,onClick:s}))}));function He(e){var t,a=Object(n.useRef)(null),r=Object(n.useState)(!1),c=Object(b.a)(r,2),i=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(b.a)(s,2),d=u[0],m=u[1],f=e.onClick,p=Object(n.useRef)(null),h=o.a.createRef(),v=o.a.createRef(),w=o.a.createRef(),g=o.a.createRef(),S=Object(n.useState)(null),E=Object(b.a)(S,2),y=E[0],j=E[1],A=Object(n.useState)(!0),k=Object(b.a)(A,2),C=k[0],T=k[1],N=Object(n.useContext)(O),x=N.myStateArray,L=N.setName,R=(N.setRole,N.setUserList,N.setViewMode,N.setCamOnAtSessionStart,N.setMicOnAtSessionStart,N.setAmAdmin,N.setNumber,Object(b.a)(x,2)),M=R[0],_=(R[1],[\"Arlo\",\"Omid\",\"Jennifer\",\"Sam\",\"Julia\",\"Marissa\",\"Benjamin\"]);Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",P),function(){document.removeEventListener(\"mousedown\",P)}}));var P=function(e){console.log(\"handling click\"),!v.current||v.current.contains(e.target)||h.current.contains(e.target)?!g.current||g.current.contains(e.target)||w.current.contains(e.target)||m(!1):l(!1)};Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1280,height:720}}).then((function(e){if(e){window.mediaStream=e;var t=e.getAudioTracks()[0],a=e.getVideoTracks()[0];j([t,a]),window.localAudio=t,T(!0)}else T(!1)})).catch((function(e){console.log(\"You got an error:\"+e),T(!1)}))}),[]),Object(n.useEffect)((function(){y&&p.current&&(p.current.srcObject=new MediaStream(y)),p.current.muted=!0,window.initialInputs=y}),[y]);return o.a.createElement(\"div\",{className:\"container\"},o.a.createElement(\"div\",{className:\"start-screen-background\"}),o.a.createElement(\"div\",{className:\"instructions\"},o.a.createElement(\"div\",{className:\"fixed-width\"},o.a.createElement(\"div\",{style:{position:\"relative\",marginLeft:\"180px\",marginTop:\"50px\",marginRight:\"180px\",padding:\"20px\",paddingTop:\"40px\",border:\"4px solid whitesmoke\",backgroundColor:\"white\"}},o.a.createElement(\"img\",{src:be.a,style:{width:\"220px\",paddingBottom:\"25px\"}}),o.a.createElement(\"div\",{style:{background:\"white\",opacity:\"1\",zIndex:\"1000\"}},C?o.a.createElement(\"video\",{className:\"lobby-video\",autoPlay:!0,ref:p}):o.a.createElement(\"p\",{style:{height:\"198px\",width:\"352px\",borderRadius:\"20px\",background:\"black\",margin:\"auto\",color:\"white\",fontWeight:\"bolder\",boxSizing:\"border-box\",padding:\"24px\",border:\"2px yellow solid\"}},\"\\u274c Your camera / mic is blocked \\u274c\",o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then \",o.a.createElement(\"u\",{style:{cursor:\"pointer\"},onClick:function(){window.location.reload()}},\"refresh the page.\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"How?\",o.a.createElement(\"br\",null),o.a.createElement(\"ul\",null,o.a.createElement(\"li\",null,o.a.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),o.a.createElement(\"li\",null,o.a.createElement(\"a\",{href:\"https://youtu.be/GceAjizU5WU?t=39\",target:\"_blank\"},\"Option 2\")))),p.current&&C&&o.a.createElement(\"div\",{style:{position:\"relative\",display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",bottom:\"40px\",width:\"250px\",height:\"0px\",margin:\"auto\"}},o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){m(!d)},ref:w},\"Select Camera ^\"),d?o.a.createElement(\"div\",{onClick:function(){return m(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"80px\"}},o.a.createElement(ze,{type:\"video\",page:\"intro\",inputs:[y,j],ref:g})):null),o.a.createElement(\"div\",{style:{width:\"15px\"}}),o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){l(!i)},ref:h},\"Select Mic ^\"),i?o.a.createElement(\"div\",{onClick:function(){return l(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"72px\",overflowY:\"visible\"}},o.a.createElement(ze,{type:\"audio\",page:\"intro\",ref:v,inputs:[y,j]})):null))),C&&o.a.createElement(\"h4\",{className:\"signin\"},o.a.createElement(\"form\",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:\"rgb(230, 240, 249)\",fontSize:\"15px\",width:\"200px\",height:\"30px\",textAlign:\"center\",fontFamily:\"poppins\"},ref:a,value:M.name,onFocus:function(){\"Username\"===M.name&&L(\"\")},onChange:function(e){return function(e){var t=e.target.value;L(t)}(e)}}),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"input\",(t={className:\"new-card\",style:{width:\"150px\",color:\"#1b8bc4\",fontSize:\"17px\"},type:\"submit\"},Object(I.a)(t,\"type\",\"submit\"),Object(I.a)(t,\"value\",\"Enter session\"),Object(I.a)(t,\"onClick\",(function(){console.log(\"setting user ID as \"+M.name),_.includes(M.name)?(M.name=\"Admin\"===M.role?M.name+\"_Admin\":M.name,window.myName=M.name,f()):\"Username\"===M.name||\"\"===M.name?alert(\"Please enter your username.\"):alert('Sorry, username \"'.concat(M.name,'\" does not have access to this meeting.'))})),t))),o.a.createElement(\"br\",null))))))}function Ke(){return(Ke=Object(P.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{url:\"https://secondbody.daily.co/Livestorm-testing\",token:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyIjoiTGl2ZXN0b3JtIiwibyI6dHJ1ZSwiZXIiOiJsb2NhbCIsImQiOiJlMjU1MmE0Yy02OGM4LTRlYmEtYTYyMS1mZThjZTk4ODA5ZTciLCJpYXQiOjE2MzgzMDE3Nzl9.cYC0TgizVI8xBArYjJf-FBvVV8Je_FraoHpXkq9l2uw\"});case 1:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var Ze={createRoom:function(){return Ke.apply(this,arguments)}},We=(a(133),a(32)),Je=a.n(We);a(134),a(135);function Ye(e){function t(){return e.highlighted?\"#fb5554\":\"#000000\"}return o.a.createElement(\"svg\",{width:\"28px\",height:\"28px\",viewBox:\"0 0 24 24\",className:e.className,xmlns:\"http://www.w3.org/2000/svg\"},function(){switch(e.type){case\"camera\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-24.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Camera-Off-24px\",transform:\"translate(24.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M13.7573593,6 L4.00585866,6 C2.89706013,6 2,6.8992496 2,8.0085302 L2,15.9914698 C2,16.4835828 2.17760958,16.9352259 2.47229113,17.2850682 L13.7573593,6 Z M16,12.2426407 L16,15.9914698 C16,17.1007504 15.1029399,18 13.9941413,18 L10.2426407,18 L16,12.2426407 Z M16,12.2426407 L16,14.499966 L21.0756492,16.6148096 C21.586154,16.8275189 22,16.5442917 22,16.0045612 L22,7.99539512 C22,7.44565489 21.5875957,7.17183667 21.0756492,7.38514669 L20.7016702,7.54097052 L16,12.2426407 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"mute-mic\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-120.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Microphone-Off-24px\",transform:\"translate(120.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M15.8931049,12.3495358 L15.8883757,12.354265 C15.7702192,12.7237203 15.5976472,13.0928313 15.3634551,13.4334743 C14.9080287,14.0959127 14.281481,14.5761112 13.4232304,14.8194102 L11,17.2426407 L11,18.9906311 C11,18.9937578 11.0000137,18.9968808 11.0000409,19 L9.99077797,19 C9.45097518,19 9,19.4477153 9,20 C9,20.5561352 9.44358641,21 9.99077797,21 L14.009222,21 C14.5490248,21 15,20.5522847 15,20 C15,19.4438648 14.5564136,19 14.009222,19 L12.9999626,19 C12.999986,18.9968804 13,18.9937574 13,18.9906311 L13,16.9383953 C14.793746,16.7093537 16.1268712,15.8533183 17.0115375,14.566531 C17.631941,13.6641258 17.9116422,12.769082 17.9922726,12.124039 C18.0567667,11.6080864 17.715976,11.1348845 17.2185349,11.0241058 L17.2162194,11.0264213 C17.1758852,11.0160463 17.1430789,11.0101085 17.12403,11.0077274 C16.5760096,10.9392248 16.076219,11.3279514 16.0077165,11.8759725 C15.9990827,11.9450424 15.9659776,12.1062504 15.8970768,12.3267333 C15.8944966,12.3349898 15.8931939,12.3425837 15.8931049,12.3495358 Z M14.8100942,4.94726512 C14.3837386,3.80970165 13.2864273,3 12,3 C10.3431458,3 9,4.34314575 9,6 L9,10.7573593 L14.8100942,4.94726512 Z M7.97590142,11.7814579 C7.86511978,11.2840207 7.39191988,10.9432336 6.87596978,11.0077274 C6.32795032,11.0762298 5.93922497,11.5760196 6.0077274,12.124039 C6.05291889,12.4855709 6.16064541,12.9256367 6.35584336,13.401516 L7.97590142,11.7814579 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"screen\":return o.a.createElement(\"path\",{fill:t(),fillRule:\"evenodd\",d:\"M2 5.006C2 3.898 2.898 3 3.99 3h16.02C21.108 3 22 3.897 22 5.006v9.988A2.003 2.003 0 0 1 20.01 17H3.99C2.892 17 2 16.103 2 14.994V5.006zm2 .99v8.009c0 .54.448.995 1 .995h14c.555 0 1-.446 1-.995v-8.01c0-.54-.448-.995-1-.995H5c-.555 0-1 .446-1 .995zM7 20c0-.552.456-1 .995-1h8.01c.55 0 .995.444.995 1 0 .552-.456 1-.995 1h-8.01A.995.995 0 0 1 7 20z\"});case\"leave\":return o.a.createElement(\"path\",{d:\"M19.347 11l-1.71-1.638a.832.832 0 0 1 0-1.222l.03-.03a.922.922 0 0 1 1.27-.003l3.34 3.2a.95.95 0 0 1 0 1.386l-3.34 3.2a.918.918 0 0 1-1.27-.003l-.03-.03a.842.842 0 0 1 0-1.221L19.348 13h-7.352A.995.995 0 0 1 11 12c0-.552.456-1 .995-1h7.352zM16 10h-2V7.995c0-.54-.446-.995-.997-.995H6.997A1 1 0 0 0 6 7.995v8.01c0 .54.446.995.997.995h6.006a1 1 0 0 0 .997-.995V14h2v2.994A2.009 2.009 0 0 1 13.991 19H6.01A2.007 2.007 0 0 1 4 16.994V7.006C4 5.898 4.902 5 6.009 5h7.982C15.101 5 16 5.897 16 7.006V10z\",fill:t(),fillRule:\"evenodd\"});case\"chat\":return o.a.createElement(\"path\",{d:\"M8.984 17.522c.93.308 1.949.478 3.016.478 4.418 0 8-2.91 8-6.5S16.418 5 12 5s-8 2.91-8 6.5c0 1.65.756 3.156 2.003 4.302a8.751 8.751 0 0 1-.71 2.187c-.317.606-.457 1.011 0 1.011 1.727 0 1.99-1.236 3.691-1.478z\",fill:t(),fillRule:\"evenodd\"});case\"record\":return o.a.createElement(\"g\",null,o.a.createElement(\"svg\",{version:\"1.1\",id:\"Layer_1\",xmlns:\"http://www.w3.org/2000/svg\",x:\"0px\",y:\"0px\",viewBox:\"0 0 120 130\"},o.a.createElement(\"g\",null,o.a.createElement(\"path\",{d:\"M56.7,0C25.4,0,0,25.4,0,56.7s25.4,56.7,56.7,56.7c31.3,0,56.7-25.4,56.7-56.7S88.1,0,56.7,0z M56.7,111.1 c-30,0-54.3-24.4-54.3-54.3S26.8,2.4,56.7,2.4c30,0,54.3,24.4,54.3,54.3S86.7,111.1,56.7,111.1z\",fill:t()}),o.a.createElement(\"ellipse\",{transform:\"matrix(0.3569 -0.9341 0.9341 0.3569 -16.5128 89.4864)\",cx:\"56.7\",cy:\"56.7\",rx:\"49.6\",ry:\"49.6\",fill:t()}))));default:throw new Error}}())}function qe(e){return o.a.createElement(\"button\",{disabled:e.disabled,onClick:e.onClick,className:\"tray-button\"+(e.newButtonGroup?\" new-group\":\"\")},o.a.createElement(Ye,{type:e.type,highlighted:e.highlighted}))}var Xe=a(54),Qe=a.n(Xe),$e=a(95),et=a.n($e);a(136);function tt(e){var t=Object(n.useContext)(w),a=Object(n.useState)(\"\"),r=Object(b.a)(a,2),c=r[0],i=r[1],l=Object(n.useContext)(g).session,s=Object(b.a)(l,2),u=s[0],d=s[1],m=Object(n.useContext)(O).myStateArray,f=Object(b.a)(m,1)[0],h=u.chatHistory,v=function(e){d((function(t){return Object(p.a)(Object(p.a)({},t),{},{chatHistory:[].concat(Object(F.a)(t.chatHistory),[e])})}))},S=o.a.createRef();return Object(n.useEffect)((function(){if(t)return t.on(\"app-message\",a),function(){t.off(\"app-message\",a)};function a(a){var n=t.participants(),o=n[a.fromId].user_name.includes(\"_Admin\")?n[a.fromId].user_name.split(\"_Admin\").join(\"\"):n[a.fromId].user_name;\"chat\"==a.data.type&&v({sender:o,message:a.data.message}),\"chat\"==a.data.type&&e.notification()}}),[t,h]),Object(n.useEffect)((function(){}),[h]),Object(n.useEffect)((function(){S.current&&S.current.scrollIntoView({behavior:\"smooth\"})}),[h]),e.onClickDisplay?o.a.createElement(\"div\",{className:\"chat\"},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:\"chat-history\"},h.map((function(e,t,a){return e.sender==f.Name||e.sender==f.name.split(\"_Admin\").join(\"\")?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"my message\"},e.message):a[t-1]&&e.sender==a[t-1].sender?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"additional message\"},e.message):o.a.createElement(\"div\",null,o.a.createElement(\"div\",{key:\"name-label-\".concat(t),className:\"name-label\"},o.a.createElement(\"b\",null,e.sender),\":\"),o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"received message\"},e.message))})),o.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:S}))),o.a.createElement(\"form\",{onSubmit:function(e){if(e.preventDefault(),c){t.sendAppMessage({type:\"chat\",message:c},\"*\");var a=t.participants().local.user_name.includes(\"_Admin\")?t.participants().local.user_name.split(\"_Admin\").join(\"\"):t.participants().local.user_name;v({sender:a,message:c}),i(\"\")}}},o.a.createElement(\"label\",{htmlFor:\"chatInput\"}),o.a.createElement(\"input\",{id:\"chatInput\",className:\"chat-input\",type:\"text\",autoComplete:\"off\",placeholder:\"Type your message here..\",value:c,onChange:function(e){i(e.target.value)}}),o.a.createElement(\"button\",{type:\"submit\",className:\"send-chat-button\"},\"Send\"))):null}var at=a(26),nt=a.n(at);function ot(e){var t=Object(n.useContext)(w),a=Object(n.useContext)(g).session,r=Object(b.a)(a,2),c=r[0],i=(r[1],Object(n.useContext)(O)),l=i.myStateArray,s=(i.setName,i.setRole,i.setUserList,i.setViewMode),u=i.setCamOnAtSessionStart,d=i.setMicOnAtSessionStart,m=(i.setAmAdmin,Object(b.a)(l,2)),f=m[0],p=(m[1],Object(n.useState)(!1)),h=Object(b.a)(p,2),v=h[0],S=h[1],E=Object(n.useState)(!1),y=Object(b.a)(E,2),j=y[0],A=y[1],k=Object(n.useState)(!1),C=Object(b.a)(k,2),N=C[0],x=C[1],I=Object(n.useState)(!1),L=Object(b.a)(I,2),R=L[0],M=L[1],B=Object(n.useState)(!1),D=Object(b.a)(B,2),V=D[0],U=D[1],F=Object(n.useState)(!1),G=Object(b.a)(F,2),H=G[0],K=G[1],Z=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}(),W=o.a.createRef(),J=o.a.createRef(),Y=o.a.createRef(),q=o.a.createRef(),X=o.a.createRef();window.updateTray=function(){Z()};var Q=Object(n.useState)(!1),$=Object(b.a)(Q,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(b.a)(ae,2),oe=ne[0],re=ne[1];Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",ce),function(){document.removeEventListener(\"mousedown\",ce)}}));var ce=function(e){console.log(\"handling click\"),!J.current||J.current.contains(e.target)||W.current.contains(e.target)?!q.current||q.current.contains(e.target)||Y.current.contains(e.target)||re(!1):te(!1)};function ie(){return le.apply(this,arguments)}function le(){return(le=Object(P.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){return(a=Object(P.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=\"https://api.daily.co/v1/recordings/\"+t+\"/download\",e.next=3,nt.a.post(\"/.netlify/functions/uploadToMux\",{input:a});case 3:n=e.sent,alert(n.data.message);case 5:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)},t=function(e){return a.apply(this,arguments)},function(){return new Promise((function(e,t){var a=!1,n=setInterval((function(){Je.a.ajax({url:\"https://api.daily.co/v1/recordings?room_name=Livestorm-testing&limit=1\",beforeSend:function(e){e.setRequestHeader(\"Authorization\",\"Bearer 54d0be1deb0e5ecfebf61207a47cf13689c18a2fd4a695a41b13622d61e5a756\")},type:\"GET\",dataType:\"json\",contentType:\"application/json\",processData:!1,success:function(t){\"finished\"===t.data[0].status&&(a=!0,e(t))}}),a&&clearInterval(n)}),2e3)}))}().then((function(e){return t(e.data[0].share_token)}));case 4:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}return window.uploadRecording=ie,Object(n.useEffect)((function(){c.isActive?f.role.includes(\"Shadow\")||f.role.includes(\"Seller\")||f.role.includes(\"Buyer\")||(d(t.localAudio()),u(t.localVideo()),t.setLocalAudio(!1),t.setLocalVideo(!1)):c.isActive||(!t.localAudio()&&t.setLocalAudio(f.micOnAtSessionStart),!t.localVideo()&&t.setLocalVideo(f.camOnAtSessionStart),d(null),u(null))}),[c.isActive,f.role]),Object(n.useEffect)((function(){if(t)return e(),t.on(\"participant-updated\",e),function(){t.off(\"participant-updated\",e)};function e(e){e&&T(e);var a=function(e){var t,a,n,o=!1;if(e&&e.participants()&&e.participants().local){var r=e.participants().local;t=!r.video,a=!r.audio,n=r.screen,o=r.record}return[t,a,n,o]}(t),n=Object(b.a)(a,4),o=n[0],r=n[1],c=n[2],i=n[3];S(o),A(r),x(c),M(i)}}),[t]),o.a.createElement(\"div\",{className:f.amAdmin&&f.sidebar?\"tray-with-sidebar\":\"tray\"},o.a.createElement(qe,{type:\"camera\",highlighted:v,onClick:function(){t.setLocalVideo(v)}}),o.a.createElement(\"div\",{onClick:function(){re(!oe)},style:{position:\"absolute\",left:\"57px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:Y},\"^\"),oe?o.a.createElement(ze,{type:\"video\",page:\"main\",ref:q}):null),o.a.createElement(qe,{type:\"mute-mic\",highlighted:j,onClick:function(){t.setLocalAudio(j)}}),o.a.createElement(\"div\",{onClick:function(){te(!ee)},style:{position:\"absolute\",left:\"123px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:W},\"^\"),ee?o.a.createElement(ze,{type:\"audio\",page:\"main\",ref:J}):null),z.a.supportedBrowser().supportsScreenShare&&f.amAdmin&&o.a.createElement(qe,{type:\"screen\",highlighted:N,onClick:function(){N||!function(){var e=!1,a=t.participants();for(var n in a)a[n].screenVideoTrack&&(e=!0);return e}()?N?t.stopScreenShare():t.startScreenShare():alert(\"There is already a screenshare in progress\")}}),o.a.createElement(qe,{type:\"chat\",highlighted:H,onClick:function(){U(!V),H&&K(!H)}}),o.a.createElement(tt,{onClickDisplay:V,notification:function(){K(!H)}}),o.a.createElement(\"div\",{className:\"status-display\"},o.a.createElement(\"div\",{style:{height:\"30px\"}},\"Roleplay:  \\xa0\",c.isActive?o.a.createElement(\"div\",{className:\"display-card active\"},\"Live\"):o.a.createElement(\"div\",{className:\"display-card paused\"},\"Paused\")),o.a.createElement(\"div\",{className:\"vertical-line\"}),!c.isActive||\"Admin\"!==f.role&&\"Attendee\"!==f.role?o.a.createElement(\"div\",{style:{height:\"30px\"}},\"My Role: \\xa0\",\"Admin\"==f.role||\"Attendee\"==f.role?o.a.createElement(\"span\",{className:\"display-card role\"},\"Viewer\"):o.a.createElement(\"span\",{className:\"display-card role\"},f.role.match(/\\D/g).join(\"\"))):o.a.createElement(\"div\",{className:\"my-view\"},\"My View: \\xa0\",o.a.createElement(\"span\",null,o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{className:\"my-view-selector\",value:f.viewMode,onChange:function(e){return s(e.target.value)}},o.a.createElement(\"option\",{value:\"Seller\"},\"Seller\"),c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"Shadow1\",selected:!0},\"Shadow 1\"),c.roleOf.Shadow2&&o.a.createElement(\"option\",{value:\"Shadow2\"},\"Shadow 2\"),c.roleOf.Shadow3&&o.a.createElement(\"option\",{value:\"Shadow3\"},\"Shadow 3\"),c.roleOf.Shadow4&&o.a.createElement(\"option\",{value:\"Shadow4\"},\"Shadow 4\"),c.roleOf.Shadow5&&o.a.createElement(\"option\",{value:\"Shadow5\"},\"Shadow 5\"),c.roleOf.Shadow6&&o.a.createElement(\"option\",{value:\"Shadow6\"},\"Shadow 6\"),c.roleOf.Seller&&c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"All\"},\"All\"),c.roleOf.Shadow1||c.roleOf.Shadow2||c.roleOf.Shadow3||c.roleOf.Shadow4||c.roleOf.Shadow5||c.roleOf.Shadow6&&o.a.createElement(\"option\",{value:\"All\"},\"All\"))))))),o.a.createElement(\"img\",{ref:X,src:Qe.a,onClick:function(){X.current.src=R?Qe.a:et.a,R?(t.stopRecording(),ie()):t.startRecording()},width:55,height:37,className:\"recording-button\"}),o.a.createElement(qe,{type:\"leave\",disabled:e.disabled,newButtonGroup:!1,highlighted:!0,onClick:function(){e.onClickLeaveCall&&e.onClickLeaveCall()}}))}a(155),a(156);function rt(e){Object(n.useContext)(w);var t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=e.role,l=Object(n.useContext)(O),s=l.myStateArray,u=(l.setNumber,Object(b.a)(s,2)),d=u[0];u[1];return o.a.createElement(\"form\",{className:\"dropdown\"},o.a.createElement(\"select\",{className:\"selector\",id:i,onChange:function(e){window.role=i;var t=e.target.id,a=e.target.value;c((function(e){return Object(p.a)(Object(p.a)({},e),{},{roleOf:Object(p.a)(Object(p.a)({},e.roleOf),{},Object(I.a)({},t,a))})})),console.log(e.target.id+\" is now: \"+e.target.value),c((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))},value:r.roleOf[i]},o.a.createElement(\"option\",{value:null}),d.userList.names&&d.userList.names.length>0&&d.userList.names.map((function(e){return o.a.createElement(\"option\",{value:e},e.includes(\"_Admin\")?e.split(\"_Admin\").join(\"\"):e)}))))}function ct(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),r=(a[0],a[1],Object(n.useContext)(w)),c=Object(n.useState)(!1),i=Object(b.a)(c,2),l=(i[0],i[1],Object(n.useState)(!1)),s=Object(b.a)(l,2),u=(s[0],s[1],Object(n.useState)(!1)),d=Object(b.a)(u,2),m=(d[0],d[1],Object(n.useState)(!1)),h=Object(b.a)(m,2),v=(h[0],h[1],Object(n.useState)(!1)),S=Object(b.a)(v,2),E=(S[0],S[1],Object(n.useContext)(g).session),y=Object(b.a)(E,2),j=y[0],A=y[1],k=Object(n.useContext)(O),C=k.myStateArray,T=(k.setName,k.setRole,k.setUserList,k.setViewMode,k.setCamOnAtSessionStart,k.setMicOnAtSessionStart,k.setAdminPresent,k.setAmAdmin,Object(b.a)(C,2)),N=T[0],x=(T[1],function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}());window.updateAdminPanel=x;var I=Object(n.useState)(\"Play\"),L=Object(b.a)(I,2),R=L[0],M=L[1],_=Object(n.useState)(\"monologue3\"),P=Object(b.a)(_,2),B=P[0],D=P[1],V=o.a.createRef(),U=o.a.createRef();Object(n.useEffect)((function(){if(r){for(var e=[\"participant-joined\",\"participant-left\",\"joined-meeting\"],t=0,a=e;t<a.length;t++){var n=a[t];r.on(n,(function(){return setTimeout((function(){return x()}),100)}))}return function(){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.off(n,(function(){return setTimeout((function(){return x()}),100)}))}}catch(o){a.e(o)}finally{a.f()}}}}),[r]),Object(n.useEffect)((function(){j.hasAnUpdate&&(console.log(\"****HAS AN UPDATE\"),F(),A((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!1})})))}),[j.hasAnUpdate]);var F=function(){console.log(\"Sending current state...\"),r.sendAppMessage(j,\"*\")};return o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:N.sidebar?\"admin-panel on\":\"admin-panel off\"},o.a.createElement(\"div\",{className:\"role-selector-section\"},o.a.createElement(\"div\",{className:\"selector-box\"},\"Buyer(s)\",o.a.createElement(rt,{role:\"Buyer1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Buyer2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Buyer3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Buyer4\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller\",o.a.createElement(rt,{role:\"Seller\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller's shadow(s)\",o.a.createElement(rt,{role:\"Shadow1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Shadow2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Shadow3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Shadow4\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Shadow5\",selectedRoles:\"selectedRoles\"}),o.a.createElement(rt,{role:\"Shadow6\",selectedRoles:\"selectedRoles\"}))),o.a.createElement(\"div\",{className:\"session-toggle\"},o.a.createElement(\"label\",{class:\"switch\"},o.a.createElement(\"input\",{type:\"checkbox\",id:\"state\",checked:j.isActive,onChange:function(){A((function(e){return Object(p.a)(Object(p.a)({},e),{},{isActive:!e.isActive})})),A((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))}}),o.a.createElement(\"span\",{class:\"slider round\"})),o.a.createElement(\"p\",null,\"Session active\")),o.a.createElement(\"div\",{className:\"practice-audio hidden\",ref:V},\"Practice audio\",o.a.createElement(\"div\",{style:{height:\"30px\",margin:\"auto\",marginTop:\"5px\"}},o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{class:\"practice-audio-dropdown\",onChange:function(e){D(e.target.value),console.log(\"***CHANGED TO \"+e.target.value)}},o.a.createElement(\"option\",{value:\"monologue3\"},\"Anna\"),o.a.createElement(\"option\",{value:\"monologue5\"},\"Livestorm A\"),o.a.createElement(\"option\",{value:\"monologue6\"},\"Livestorm B\"),o.a.createElement(\"option\",{value:\"monologue4\"},\"IBM Garage \"))))),o.a.createElement(\"span\",{style:{color:\"green\",fontSize:\"16px\",fontFamily:\"Verdana, Geneva, Tahoma, sans-serif\"}},o.a.createElement(\"button\",{onClick:function(){var e=j.roleOf.Shadow1&&N.userList.sessionIdFor[j.roleOf.Shadow1],t=j.roleOf.Shadow2&&N.userList.sessionIdFor[j.roleOf.Shadow2];if(j.roleOf.Shadow1==N.name&&(e=\"me\"),j.roleOf.Shadow2==N.name&&(t=\"me\"),e||t){var a=window.audioIsPlaying?\"pause\":\"play\",n={type:\"instructions\",target:B,action:a,recipient:e},o={type:\"instructions\",target:B+\"B\",action:a,recipient:t};e&&(\"me\"!=e?r.sendAppMessage(n,e):\"me\"==e&&W(B,a),console.log(\"Sent \".concat(a,\" request to \").concat(j.roleOf.Shadow1))),t&&(\"me\"!=t?r.sendAppMessage(o,t):\"me\"==t&&W(B+\"B\",a),console.log(\"Sent \".concat(a,\" request to \").concat(j.roleOf.Shadow2))),window.audioIsPlaying=!window.audioIsPlaying,M(window.audioIsPlaying?\"Pause\":\"Play\")}else console.log(\"no recipients.\")},id:\"play-pause\"},R))),o.a.createElement(\"div\",{className:\"training-toggle\",ref:U,onClick:function(){V.current.classList.toggle(\"hidden\"),U.current.innerText=V.current.classList.contains(\"hidden\")?\"Show Practice\":\"X\"}},\"Show Practice\")))}var it=\"STATE_JOINING\",lt=\"STATE_JOINED\",st=\"STATE_ERROR\";function ut(e){var t=Object(b.a)(e.headerState,2),a=(t[0],t[1]),r=Object(n.useState)(\"STATE_IDLE\"),c=Object(b.a)(r,2),i=c[0],l=c[1],s=Object(n.useState)(null),u=Object(b.a)(s,2),d=u[0],m=u[1],h=Object(n.useState)(null),v=Object(b.a)(h,2),S=v[0],E=v[1],y=Object(n.useState)({type:\"sessionState\",isKnown:!1,isActive:!1,AdminVisible:!1,hasAnUpdate:!1,roleOf:{Buyer1:\"\",Buyer2:\"\",Buyer3:\"\",Buyer4:\"\",Seller:\"\",Shadow1:\"\",Shadow2:\"\",Shadow3:\"\",Shadow4:\"\",Shadow5:\"\",Shadow6:\"\"},chatHistory:[]}),j=Object(b.a)(y,2),A=j[0],k=j[1],C=Object(n.useState)({name:\"Username\",role:window.myRole,sidebar:!0,amAdmin:!0,userList:{names:[],sessionIdFor:{}},adminPresent:!1,viewMode:null,audioIsPlaying:!1,camOnAtSessionStart:null,micOnAtSessionStart:null,number:null}),N=Object(b.a)(C,2),x=N[0],I=N[1],L=Object(n.useCallback)((function(){return l(\"STATE_CREATING\"),a(!0),Ze.createRoom().then((function(e){return e})).catch((function(e){console.log(\"Error creating room\",e),m(null),l(\"STATE_IDLE\")}))}),[]),R=Object(n.useCallback)((function(e,t){(function(){var a=Object(P.a)(_.a.mark((function a(){var n;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=z.a.createCallObject({subscribeToTracksAutomatically:!1,url:e,token:t}),m(e),E(n),l(it),a.next=6,n.startCamera();case 6:return a.next=8,n.setUserName(x.name);case 8:window.initialInputs?(console.log(\"initial audio: \"+window.initialInputs[0]+\". Initial video: \"+window.initialInputs[1]),n.join({audioSource:window.initialInputs[0],videoSource:window.initialInputs[1]})):navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){if(e){var t=e.getAudioTracks(),a=e.getVideoTracks();t&&t.length>0&&a&&a.length>0&&n.join({audioSource:t[0],videoSource:a[0]})}})),console.log(\"joining the call as \"+x.name),Z(d)+\"&N=\"+x.name+\"&R=\"+x.role;case 11:case\"end\":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[x.name]),M=Object(n.useCallback)((function(){S&&(S.stopRecording(),i===st?S.destroy().then((function(){m(null),E(null),l(\"STATE_IDLE\"),window.initialize(),a(!1)})):(l(\"STATE_LEAVING\"),S.leave(),window.initialize(),a(!1)))}),[S,i]);Object(n.useEffect)((function(){var e=Z(d);window.pageUrl=e,window.myP&&(e.indexOf(\"?\")>-1?e+=\"&P=\"+window.myP:e+=\"?P=\"+window.myP),e!==window.location.href&&window.history.replaceState(null,null,e)}),[d]),Object(n.useEffect)((function(){window.callObject=S}),[S]),Object(n.useEffect)((function(){window.myState=x}),[x]),Object(n.useEffect)((function(){window.userList=x.userList}),[x.userList]),Object(n.useEffect)((function(){window.sessionState=A}),[A]),Object(n.useEffect)((function(){S&&(window.record=function(){S.startRecording()},window.stop=function(){S.stopRecording()})}),[i]),Object(n.useEffect)((function(){var e;if(S){if(!A.isKnown&&x.adminPresent){e=setInterval((function(){A.isKnown?clearInterval(e):(S.sendAppMessage(\"State please?\",\"*\"),console.log(\"Requesting meeting state...\"))}),1e3)}return function(){e&&clearInterval(e)}}}),[A.isKnown,x.adminPresent]),Object(n.useEffect)((function(){if(S){var e=[\"joined-meeting\",\"left-meeting\",\"error\"];o();for(var t=0,a=e;t<a.length;t++){var n=a[t];S.on(n,o)}return function(){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;S.off(n,o)}}catch(r){a.e(r)}finally{a.f()}}}function o(e){switch(e&&T(e),S.meetingState()){case\"joined-meeting\":l(lt),S.setNetworkTopology({topology:\"sfu\"}),console.log(\"*****JOINED MEETING\");break;case\"left-meeting\":S.destroy().then((function(){m(null),E(null),l(\"STATE_IDLE\"),clearInterval(window.stateRequest),window.initialize()}));break;case\"error\":l(st)}}}),[S]),Object(n.useEffect)((function(){if(S)return S.on(\"app-message\",e),function(){S.off(\"app-message\",e)};function e(e){if(e)if(T(e),console.log(\"received app message from \".concat(e.fromId,\": \"),e.data),e.data.constructor===Object&&\"sessionState\"==e.data.type){var t=e.data;t.hasAnUpdate=!1,k(t)}else e.data.constructor===Object&&\"instructions\"==e.data.type&&e.data.recipient==S.participants().local.session_id?W(e.data.target,e.data.action):\"State please?\"==e.data&&(console.log(\"*******Received state request\"),x.amAdmin&&A.isKnown&&(console.log(\"Sending current state...\"),S.sendAppMessage(A,\"*\")))}}),[S,A]);var B=[it,lt,st].includes(i);return o.a.createElement(\"div\",{className:\"app\"},o.a.createElement(g.Provider,{value:{session:[A,k]}},o.a.createElement(O.Provider,{value:{myStateArray:[x,I],setName:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e})}))},setRole:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{role:e})}))},setSidebar:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{sidebar:e})}))},setUserList:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{userList:e})}))},setViewMode:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{viewMode:e})}))},setCamOnAtSessionStart:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{camOnAtSessionStart:e})}))},setMicOnAtSessionStart:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{micOnAtSessionStart:e})}))},setAdminPresent:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{adminPresent:e})}))},setAmAdmin:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{amAdmin:e})}))},setNumber:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{number:e})}))}}},B?o.a.createElement(w.Provider,{value:S},o.a.createElement(Ge,{roomUrl:d}),o.a.createElement(ot,{onClickLeaveCall:M}),x.amAdmin&&o.a.createElement(ct,null)):o.a.createElement(He,{onClick:function(){L().then((function(e){return R(e.url,e.token)}))}}))))}a(157);var dt=a(20),mt=a(30),ft=a.n(mt),pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var o;return Object(l.a)(this,a),(o=t.call(this,e,n)).hls=new ft.a,o}return Object(s.a)(a,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.src,a=e.video;ft.a.isSupported()&&(this.hls.loadSource(t),this.hls.attachMedia(a),this.hls.on(ft.a.Events.MANIFEST_PARSED,(function(){a.pause()})))}},{key:\"componentWillUnmount\",value:function(){this.hls&&this.hls.destroy()}},{key:\"render\",value:function(){return o.a.createElement(\"source\",{src:this.props.src,type:this.props.type||\"application/x-mpegURL\"})}}]),a}(n.Component),bt=function(e){return o.a.createElement(dt.Player,null,o.a.createElement(pt,{isVideoChild:!0,src:e.src}),o.a.createElement(dt.BigPlayButton,{position:\"center\"}),o.a.createElement(dt.ControlBar,null,o.a.createElement(dt.CurrentTimeDisplay,{order:4.1}),o.a.createElement(dt.TimeDivider,{order:4.2}),o.a.createElement(dt.PlaybackRateMenuButton,{rates:[2,1.5,1,.75,.5],order:7.1}),o.a.createElement(dt.VolumeMenuButton,null)))},ht=a(37);a(179);function vt(e){var t=e.show,a=e.title,n=e.description,r=e.confirm,c=e.cancel,i=e.confirmText,l=e.action;return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(\"div\",{className:\"overlay\"},o.a.createElement(\"div\",{className:\"dialog \"+l},o.a.createElement(\"div\",{className:\"dialog__content\"},o.a.createElement(\"h2\",{className:\"dialog__title\"},a),o.a.createElement(\"p\",{className:\"dialog__description\"},n)),o.a.createElement(\"hr\",null),o.a.createElement(\"div\",{className:\"dialog__footer\"},o.a.createElement(\"button\",{className:\"dialog__cancel\",onClick:c},\"Cancel\"),o.a.createElement(\"button\",{className:\"dialog__confirm \"+l,onClick:r},i))))):o.a.createElement(o.a.Fragment,null)}function wt(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=Object(b.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(null),d=Object(b.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)(!1),h=Object(b.a)(p,2),v=h[0],w=h[1],O=Object(n.useState)(null),g=Object(b.a)(O,2),S=g[0],E=g[1];function y(){return(y=Object(P.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.get(\"/.netlify/functions/getFromMux\");case 2:\"Error\"!=(t=e.sent).data.message&&r(t.data.message);case 4:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]);var j=function(){var e=Object(P.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.post(\"/.netlify/functions/deleteFromMux\",{assetId:m});case 2:e.sent,window.location.reload();case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){s(!1),w(!1)};return o.a.createElement(\"div\",null,o.a.createElement(\"h2\",null,\"Video library\"),o.a.createElement(\"div\",{className:\"gallery\"},a.map((function(e){return o.a.createElement(\"div\",null,o.a.createElement(bt,{src:\"https://stream.mux.com/\"+e.playback_ids[0].id+\".m3u8\"}),o.a.createElement(\"p\",null,new Date(parseInt(1e3*e.created_at)).toLocaleDateString(\"en-US\",{weekday:\"short\",year:\"numeric\",month:\"short\",day:\"numeric\"}).toString(),o.a.createElement(\"br\",null),o.a.createElement(ht.a,{size:20,title:\"Share\",onClick:function(){var t;t=\"https://stream.mux.com/\"+e.playback_ids[0].id+\"/medium.mp4\",E(t),w(!0)},style:{cursor:\"pointer\",marginTop:\"10px\"}}),\"\\xa0 \\xa0 \\xa0\",o.a.createElement(ht.b,{size:20,title:\"Delete\",onClick:function(){var t;t=e.id,f(t),s(!0)},style:{cursor:\"pointer\"}})))})),o.a.createElement(vt,{show:l,title:\"Delete video?\",description:\"Are you sure you wish to permanently delete this video?\",confirm:j,cancel:A,confirmText:\"Yes, delete it\",action:\"delete\"}),o.a.createElement(vt,{show:v,title:\"Link for sharing:\",description:S,confirm:function(e){var t;w(!1),t=S,navigator.clipboard.writeText(t)},cancel:A,confirmText:\"Copy to clipboard\",action:\"share\"})))}a(180);var Ot=a(38);function gt(e){var t=Object(b.a)(e.headerState,2),a=t[0];t[1];return a?null:o.a.createElement(\"div\",{className:\"nav-bar\"},o.a.createElement(\"div\",{className:\"nav-buttons\"},o.a.createElement(\"a\",{className:\"router-button\",href:\"/livestorm-test\"},o.a.createElement(Ot.b,{size:\"30\",style:{margin:\"14px\"}})),o.a.createElement(\"a\",{className:\"router-button\",href:\"/livestorm-test/library\"},o.a.createElement(Ot.a,{size:\"30\",style:{margin:\"14px\"}}))))}function St(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1];return o.a.createElement(\"div\",null,o.a.createElement(gt,{headerState:[a,r]}),o.a.createElement(m.d,null,o.a.createElement(m.b,{path:\"/\",element:o.a.createElement(ut,{headerState:[a,r]})}),o.a.createElement(m.b,{path:\"/library\",element:o.a.createElement(wt,{headerState:[a,r]})})))}a(181),a(182);function Et(e,t){if(t)switch(t.state){case\"blocked\":return t.blocked.byPermissions?\"\".concat(e,\" permission denied\"):t.blocked.byDeviceMissing?\"\".concat(e,\" device missing\"):\"\".concat(e,\" blocked\");case\"off\":return t.off.byUser?\"\".concat(e,\" muted\"):t.off.byBandwidth?\"\".concat(e,\" muted to save bandwidth\"):\"\".concat(e,\" off\");case\"sendable\":return\"\".concat(e,\" not subscribed\");case\"loading\":return\"\".concat(e,\" loading...\");case\"interrupted\":return\"\".concat(e,\" interrupted\");case\"playable\":return null}}function yt(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null),r=(function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1])}(),Object(n.useMemo)((function(){return e.videoTrackState&&\"playable\"===e.videoTrackState.state&&(e.isLocalPerson||!0===e.videoTrackState.subscribed||e.isScreenShare)?e.videoTrackState.track:null}),[e.videoTrackState])),c=Object(n.useMemo)((function(){return e.videoTrackState&&(e.isLocalPerson&&\"playable\"===e.videoTrackState.state||e.videoTrackState.subscribed)||e.isScreenShare}),[e.videoTrackState]),i=Object(n.useMemo)((function(){return e.audioTrackState&&e.audioTrackState.track&&\"playable\"===e.audioTrackState.state&&!1!==e.audioTrackState.subscribed?(e.isAudioOnly?e.audioTrackState.track.isFiltered=!0:e.audioTrackState.track.isFiltered=!1,e.isScreenShare?e.audioTrackState.track.isScreenShare=!0:e.audioTrackState.track.isScreenShare=!1,e.audioTrackState.track):null}),[e.audioTrackState]),l=Object(n.useMemo)((function(){return Et(\"video\",e.videoTrackState)}),[e.videoTrackState]),s=Object(n.useMemo)((function(){return Et(\"audio\",e.audioTrackState)}),[e.audioTrackState]);return Object(n.useEffect)((function(){t.current&&(t.current.srcObject=new MediaStream([r]))}),[r]),Object(n.useEffect)((function(){a.current&&(i.isFiltered?(console.log(\"**FILTERING LIVE TRACK**\"),window.stream=new MediaStream([i]),window.mutedAudio=window.mutedAudio||new Audio,window.mutedAudio.muted=!0,window.mutedAudio.srcObject||(window.mutedAudio.srcObject=window.stream),window.mutedAudio.paused&&window.mutedAudio.play(),window.audioCtx=window.audioCtx||new(window.AudioContext||window.webkitAudioContext),window.audioSourceNode=window.audioCtx.createMediaStreamSource(window.stream),\"undefined\"==typeof window.destination&&(window.destination=window.audioCtx.createMediaStreamDestination()),\"undefined\"==typeof window.gainNode&&(window.gainNode=window.audioCtx.createGain()),\"undefined\"==typeof window.panNode&&(window.panNode=window.audioCtx.createStereoPanner()),window.gainNode.gain.value=1,window.panNode.pan.value=1,window.audioSourceNode.connect(window.gainNode).connect(window.panNode).connect(window.destination),a.current.srcObject=window.destination.stream):i.isScreenShare?(console.log(\"***GETTING SCREENSHARE AUDIO\"),a.current.srcObject=new MediaStream([i])):(console.log(\"***NOT FILTERING: LIVE TRACK***\"),a.current.srcObject=new MediaStream([i])))}),[i,window.sessionState]),o.a.createElement(\"div\",{className:function(){var t=\"tile\";return t+=e.isLarge?\" large\":\" small\",e.isLocalPerson&&(t+=\" local\"),e.isScreenShare&&(t+=\" screen-share\"),t}(),onClick:e.onClick,style:{display:c?\"block\":\"none\"}},o.a.createElement(\"div\",{className:\"background\"}),r&&l&&o.a.createElement(\"p\",{className:\"overlay\"},l),r&&o.a.createElement(\"video\",{autoPlay:!0,muted:!0,playsInline:!0,ref:t}),r&&!e.disableCornerMessage&&s&&!l&&o.a.createElement(\"p\",{className:\"corner\"},s),!e.isLocalPerson&&i&&o.a.createElement(\"audio\",{autoPlay:!0,playsInline:!0,ref:a},\" \"))}a(183);function jt(e){return o.a.createElement(\"div\",{className:\"call-message\"+(e.isError?\" error\":\"\")},o.a.createElement(\"p\",{className:\"call-message-header\"},e.header),o.a.createElement(\"p\",null,e.detail))}var At={callItems:{local:{videoTrackState:null,audioTrackState:null}},clickAllowTimeoutFired:!1,camOrMicError:null,fatalError:null};function kt(e,t){switch(t.type){case\"CLICK_ALLOW_TIMEOUT\":return Object(p.a)(Object(p.a)({},e),{},{clickAllowTimeoutFired:!0});case\"PARTICIPANTS_CHANGE\":var a=function(e){for(var t=Object(p.a)({},At.callItems),a=0,n=Object.entries(e);a<n.length;a++){var o=Object(b.a)(n[a],2),r=o[0],c=o[1];t[r]={videoTrackState:c.tracks.video,audioTrackState:c.tracks.audio},Ct(c)&&(t[r+\"-screen\"]={videoTrackState:c.tracks.screenVideo,audioTrackState:c.tracks.screenAudio})}return t}(t.participants);return Object(p.a)(Object(p.a)({},e),{},{callItems:a});case\"CAM_OR_MIC_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{camOrMicError:t.message});case\"FATAL_ERROR\":return Object(p.a)(Object(p.a)({},e),{},{fatalError:t.message});default:throw new Error}}function Ct(e){var t=[\"loading\",\"playable\",\"interrupted\"];return t.includes(e.tracks.screenVideo.state)||t.includes(e.tracks.screenAudio.state)}function Tt(e){return\"local\"===e}function Nt(e){return e.endsWith(\"-screen\")}function xt(e){return Object.keys(e).some((function(e){return Nt(e)}))}function It(){N();var e=Object(n.useContext)(w),t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=Object(n.useReducer)(kt,At),l=Object(b.a)(i,2),s=l[0],u=l[1],d=(function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1])}(),Object(n.useContext)(O)),m=d.myStateArray,h=d.setRole,v=d.setSidebar,S=d.setUserList,E=d.setViewMode,y=d.setCamOnAtSessionStart,j=d.setMicOnAtSessionStart,A=d.setAdminPresent,k=d.setNumber,C=Object(b.a)(m,1)[0],x=function(){return v(!C.sidebar)};window.toggleSidebar=x,Object(n.useEffect)((function(){if(r.isActive)switch(C.role){case\"Attendee\":case\"Admin\":r.roleOf.Shadow1?E(\"Shadow1\"):r.roleOf.Shadow2?E(\"Shadow2\"):r.roleOf.Shadow3?E(\"Shadow3\"):r.roleOf.Shadow4?E(\"Shadow4\"):r.roleOf.Shadow5?E(\"Shadow5\"):r.roleOf.Shadow6?E(\"Shadow6\"):E(\"Seller\"),C.camOnAtSessionStart&&null===C.camOnAtSessionStart&&(j(e.localAudio()),y(e.localVideo())),e.setLocalAudio(!1),e.setLocalVideo(!1);break;case\"Seller\":case\"Buyer1\":case\"Buyer2\":case\"Buyer3\":case\"Buyer4\":case\"Shadow1\":case\"Shadow2\":case\"Shadow3\":case\"Shadow4\":case\"Shadow5\":case\"Shadow6\":null===C.camOnAtSessionStart&&(j(e.localAudio()),y(e.localVideo())),e.setLocalAudio(!0),e.setLocalVideo(!0)}else r.isActive||(!e.localAudio()&&e.setLocalAudio(C.micOnAtSessionStart),!e.localVideo()&&e.setLocalVideo(C.camOnAtSessionStart),j(null),y(null))}),[r.isActive,C.role]),Object(n.useEffect)((function(){var e=\"Attendee\";for(var t in r.roleOf)r.roleOf[t]==C.name&&(e=t);e!==C.role&&(h(e),e.includes(\"1\")?k(1):e.includes(\"2\")&&k(2))}),[r.roleOf]);var I=Object(n.useCallback)((function(){return new Promise((function(t){console.log(\"*****UPDATING PARTICIPANT LIST******\");var a=!1,n=e.participants(),o={names:[C.name],sessionIdFor:{}};for(var r in n)if(\"local\"!==r){var c=n[r].user_name,i=n[r].session_id;o.names.push(c),o.sessionIdFor[c]=i,console.log(\"***ADDING: \"+c),c.includes(\"_Admin\")&&(a=!0)}a?console.log(\"Admin IS present\"):console.log(\"Admin IS NOT present\"),o.names.sort(),console.log(\"here's the userList: \".concat(o.names)),t([o,a])}))}),[e,C]),L=Object(n.useCallback)((function(){return new Promise((function(t){var a=!1,n=e.participants(),o=setInterval((function(){if(Object.keys(n).length>1||Object.keys(n).length<=1&&n.local.user_name==C.name){for(var e in clearInterval(o),n){var r=n[e].user_name;r.includes(\"_Admin\")&&\"local\"!==e&&(a=!0),console.log(\"Participant present: \".concat(r))}t(a)}}),500)}))}),[e,C]);Object(n.useEffect)((function(){if(e){var t=[\"participant-joined\",\"participant-updated\",\"participant-left\",\"joined-meeting\"];r();for(var a=0,n=t;a<n.length;a++){var o=n[a];e.on(o,r)}return function(){var a,n=Object(f.a)(t);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.off(o,r)}}catch(c){n.e(c)}finally{n.f()}}}function r(t){if(t&&T(t),u({type:\"PARTICIPANTS_CHANGE\",participants:e.participants()}),t&&\"participant-updated\"!=t.action)if(window.updated=t,\"participant-joined\"==t.action||\"participant-left\"==t.action){window.event=t,setTimeout((function(){I().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];S(a),A(n)}))}),50)}else\"joined-meeting\"==t.action&&(console.log(\"*****I JOINED THE MEETING\"),I().then((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];S(a),C.amAdmin&&!n&&L().then((function(e){c((function(t){return Object(p.a)(Object(p.a)({},t),{},{isKnown:!e})}))}))})))}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"camera-error\",t),function(){e.off(\"camera-error\",t)};function t(e){T(e),u({type:\"CAM_OR_MIC_ERROR\",message:e&&e.errorMsg&&e.errorMsg.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){if(e)return e.on(\"error\",t),function(){e.off(\"error\",t)};function t(e){T(e),u({type:\"FATAL_ERROR\",message:e&&e.errorMsg||\"Unknown\"})}}),[e]),Object(n.useEffect)((function(){var e=setTimeout((function(){u({type:\"CLICK_ALLOW_TIMEOUT\"})}),2500);return function(){clearTimeout(e)}}),[]);var R=function(){var e=[],t=[];return Object.entries(s.callItems).forEach((function(a){var n=Object(b.a)(a,2),r=n[0],c=n[1],i=Nt(r)||!Tt(r)&&!xt(s.callItems)||Tt(r)&&window.numberOfSubs&&window.numberOfSubs>1&&!xt(s.callItems),l=o.a.createElement(yt,{key:r,videoTrackState:c.videoTrackState,audioTrackState:c.audioTrackState,isLocalPerson:Tt(r),isAudioOnly:function(){if(c.audioTrackState&&c.videoTrackState)return c.audioTrackState.subscribed&&!c.videoTrackState.subscribed}(),isLarge:i,disableCornerMessage:Nt(r),isScreenShare:Nt(r)});i?e.push(l):t.push(l)})),[e,t]}(),M=Object(b.a)(R,2),_=M[0],P=M[1];Object(n.useEffect)((function(){window.largeTiles=_,window.smallTales=P,window.add=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=0;a<t;a++)e.addFakeParticipant()}})),Object(n.useEffect)((function(){window.callState=s}),[s]);var B=function(e){var t=null,a=null,n=!1;return e.fatalError?(t=\"Fatal error: \".concat(e.fatalError),n=!0):e.camOrMicError?(t=\"Error: This page can't access your camera or mic.\",a=\"To troubleshoot in Chrome: To the right in your address bar, click the picture of the camera and select 'Always allow.' Hit enter and then refresh this page.\",n=!0):!function(){var t=e.callItems.local;return!(t&&!t.isLoading)&&e.clickAllowTimeoutFired}()?1===Object.keys(e.callItems).length&&(t=\"You're here! \\ud83d\\udc4b \",a=\"Waiting for everyone else...\"):t='Click \"Allow\" to enable camera and mic access',t||a?{header:t,detail:a,isError:n}:null}(s);return o.a.createElement(\"div\",{className:C.amAdmin&&C.sidebar?\"call-with-sidebar\":\"call\"},C.amAdmin&&o.a.createElement(\"div\",{className:\"sidebar-toggle\",onClick:x},C.sidebar?o.a.createElement(ae.a,{size:\"25px\"}):o.a.createElement(te.a,{size:\"19px\",style:{marginTop:\"3px\"}})),o.a.createElement(\"div\",{className:\"large-tiles \".concat(xt(s.callItems)?\"screenshare\":\"\",\" \").concat(xt(s.callItems)&&C.sidebar?\"with-sidebar\":\"\",\" count-\").concat(xt(s.callItems)?\"1\":window.numberOfSubs&&window.numberOfSubs+1)},B?null:_),o.a.createElement(\"div\",{className:\"small-tiles\"},P),B&&o.a.createElement(jt,{header:B.header,detail:B.detail,isError:B.isError}))}a(184),a(185);var Lt=o.a.forwardRef((function(e,t){var a=Object(n.useContext)(w),r=o.a.createRef(),c=o.a.createRef(),i=e.type,l=e.page,s=function(t){if(t.target.value){var n=t.target.value;if(\"audio\"==i&&\"main\"==l&&t.target.key.includes(\"audioinput\")&&a.setInputDevicesAsync({audioSource:n}),\"video\"==i&&\"main\"==l&&a.setInputDevicesAsync({videoSource:n}),\"audio\"==i&&\"intro\"==l){var o=Object(b.a)(e.inputs,2),r=(o[0],o[1]),c={deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({audio:c}).then((function(e){var t=e.getAudioTracks()[0];r((function(e){return[t,e[1]]}))}))}if(\"video\"==i&&\"intro\"==l){var s=Object(b.a)(e.inputs,2),u=(s[0],s[1]),d={width:1280,height:720,deviceId:{exact:n}};navigator.mediaDevices.getUserMedia({video:d}).then((function(e){var t=e.getVideoTracks()[0];u((function(e){return[e[0],t]}))}))}t.target.key.includes(\"input\")&&console.log(\"New input: \"+t.target.text)}};return Object(n.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then((function(e){if(\"audio\"==i&&r.current){if(r.current.hasChildNodes())return;for(var t=[],a=0;a!==e.length;++a){var n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"audioinput\"===n.kind&&(s.key=\"audioinput\"+r.length+1,s.text=n.label||\"Microphone \"+(r.length+1),t.push(s))}window.audioOutputs=[];var o=document.createElement(\"option\");o.label=\"-Select Microphone-\",o.className=\"item-heading\";document.createElement(\"option\");r.current.appendChild(o);for(a=0;a!==t.length;++a)r.current.appendChild(t[a])}else if(\"video\"==i&&c.current){if(c.current.hasChildNodes())return;var l=document.createElement(\"option\");l.label=\"-Select Camera-\",l.className=\"item-heading\",c.current.appendChild(l);for(a=0;a!==e.length;++a){var s;n=e[a];(s=document.createElement(\"option\")).className=\"item\",s.value=n.deviceId,\"videoinput\"===n.kind&&(s.key=\"videooutput\"+c.length+1,s.text=n.label||\"Camera \"+(c.length+1),c.current&&c.current.appendChild(s))}}})).catch((function(e){console.log(e.name+\": \"+e.message)}))})),o.a.createElement(\"div\",{className:\"dropdown-selector\",ref:t},\"audio\"==i&&o.a.createElement(\"ul\",{ref:r,onClick:s}),\"video\"==i&&o.a.createElement(\"ul\",{ref:c,onClick:s}))})),Rt=a(96),Mt=a.n(Rt);function _t(e){var t,a=Object(n.useRef)(null),r=Object(n.useState)(!1),c=Object(b.a)(r,2),i=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(b.a)(s,2),d=u[0],m=u[1],f=e.onClick,p=Object(n.useRef)(null),h=o.a.createRef(),v=o.a.createRef(),w=o.a.createRef(),g=o.a.createRef(),S=Object(n.useState)(null),E=Object(b.a)(S,2),y=E[0],j=E[1],A=Object(n.useState)(!0),k=Object(b.a)(A,2),C=k[0],T=k[1],N=Object(n.useContext)(O),x=N.myStateArray,L=N.setName,R=(N.setRole,N.setUserList,N.setViewMode,N.setCamOnAtSessionStart,N.setMicOnAtSessionStart,N.setAmAdmin,N.setNumber,Object(b.a)(x,2)),M=R[0];R[1];Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",_),function(){document.removeEventListener(\"mousedown\",_)}}));var _=function(e){console.log(\"handling click\"),!v.current||v.current.contains(e.target)||h.current.contains(e.target)?!g.current||g.current.contains(e.target)||w.current.contains(e.target)||m(!1):l(!1)};Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1280,height:720}}).then((function(e){if(e){window.mediaStream=e;var t=e.getAudioTracks()[0],a=e.getVideoTracks()[0];j([t,a]),window.localAudio=t,T(!0)}else T(!1)})).catch((function(e){console.log(\"You got an error:\"+e),T(!1)}))}),[]),Object(n.useEffect)((function(){y&&p.current&&(p.current.srcObject=new MediaStream(y)),p.current.muted=!0,window.initialInputs=y}),[y]);return o.a.createElement(\"div\",{className:\"container\"},o.a.createElement(\"div\",{className:\"start-screen-background\"}),o.a.createElement(\"div\",{style:{width:\"100%\",textAlign:\"center\"}},o.a.createElement(\"img\",{src:Mt.a,style:{width:\"220px\",marginTop:\"40px\",marginBottom:\"-20px\"}})),o.a.createElement(\"div\",{className:\"instructions\"},o.a.createElement(\"div\",{className:\"fixed-width\"},o.a.createElement(\"div\",{style:{position:\"relative\",marginLeft:\"180px\",marginTop:\"50px\",marginRight:\"180px\",padding:\"20px\",paddingTop:\"40px\",border:\"4px solid whitesmoke\",backgroundColor:\"white\"}},o.a.createElement(\"div\",{style:{background:\"white\",opacity:\"1\",zIndex:\"1000\"}},C?o.a.createElement(\"video\",{className:\"lobby-video\",autoPlay:!0,ref:p}):o.a.createElement(\"p\",{style:{height:\"198px\",width:\"352px\",borderRadius:\"20px\",background:\"black\",margin:\"auto\",color:\"white\",fontWeight:\"bolder\",boxSizing:\"border-box\",padding:\"24px\",border:\"2px yellow solid\"}},\"\\u274c Your camera / mic is blocked \\u274c\",o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then \",o.a.createElement(\"u\",{style:{cursor:\"pointer\"},onClick:function(){window.location.reload()}},\"refresh the page.\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),\"How?\",o.a.createElement(\"br\",null),o.a.createElement(\"ul\",null,o.a.createElement(\"li\",null,o.a.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),o.a.createElement(\"li\",null,o.a.createElement(\"a\",{href:\"https://youtu.be/GceAjizU5WU?t=39\",target:\"_blank\"},\"Option 2\")))),p.current&&C&&o.a.createElement(\"div\",{style:{position:\"relative\",display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",bottom:\"40px\",width:\"250px\",height:\"0px\",margin:\"auto\"}},o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){m(!d)},ref:w},\"Select Camera ^\"),d?o.a.createElement(\"div\",{onClick:function(){return m(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"80px\"}},o.a.createElement(Lt,{type:\"video\",page:\"intro\",inputs:[y,j],ref:g})):null),o.a.createElement(\"div\",{style:{width:\"15px\"}}),o.a.createElement(\"div\",null,o.a.createElement(\"p\",{className:\"selector-button\",onClick:function(){l(!i)},ref:h},\"Select Mic ^\"),i?o.a.createElement(\"div\",{onClick:function(){return l(!1)},style:{position:\"relative\",bottom:\"0px\",left:\"72px\",overflowY:\"visible\"}},o.a.createElement(Lt,{type:\"audio\",page:\"intro\",ref:v,inputs:[y,j]})):null))),C&&o.a.createElement(\"h4\",{className:\"signin\"},o.a.createElement(\"form\",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:\"rgb(230, 240, 249)\",fontSize:\"15px\",width:\"200px\",height:\"30px\",textAlign:\"center\",fontFamily:\"poppins\"},ref:a,value:M.name,onFocus:function(){\"Username\"===M.name&&L(\"\")},onChange:function(e){return function(e){var t=e.target.value;L(t)}(e)}}),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"input\",(t={className:\"new-card\",style:{width:\"150px\",color:\"#1b8bc4\",fontSize:\"17px\"},type:\"submit\"},Object(I.a)(t,\"type\",\"submit\"),Object(I.a)(t,\"value\",\"Enter session\"),Object(I.a)(t,\"onClick\",(function(){console.log(\"setting user ID as \"+M.name),\"Username\"===M.name||\"\"===M.name?alert(\"Please enter your username.\"):(M.name=\"Admin\"===M.role?M.name+\"_Admin\":M.name,window.myName=M.name,f())})),t))),o.a.createElement(\"br\",null))))))}function Pt(){return(Pt=Object(P.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{url:\"https://secondbody.daily.co/Demo\",token:\"\"});case 1:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var Bt={createRoom:function(){return Pt.apply(this,arguments)}};a(186),a(187),a(188);function Dt(e){function t(){return e.highlighted?\"#fb5554\":\"#000000\"}return o.a.createElement(\"svg\",{width:\"28px\",height:\"28px\",viewBox:\"0 0 24 24\",className:e.className,xmlns:\"http://www.w3.org/2000/svg\"},function(){switch(e.type){case\"camera\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-24.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Camera-Off-24px\",transform:\"translate(24.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M13.7573593,6 L4.00585866,6 C2.89706013,6 2,6.8992496 2,8.0085302 L2,15.9914698 C2,16.4835828 2.17760958,16.9352259 2.47229113,17.2850682 L13.7573593,6 Z M16,12.2426407 L16,15.9914698 C16,17.1007504 15.1029399,18 13.9941413,18 L10.2426407,18 L16,12.2426407 Z M16,12.2426407 L16,14.499966 L21.0756492,16.6148096 C21.586154,16.8275189 22,16.5442917 22,16.0045612 L22,7.99539512 C22,7.44565489 21.5875957,7.17183667 21.0756492,7.38514669 L20.7016702,7.54097052 L16,12.2426407 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"mute-mic\":return o.a.createElement(\"g\",{id:\"Symbols\",stroke:\"none\",strokeWidth:\"1\",fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"g\",{id:\"Assets-for-Export\",transform:\"translate(-120.000000, 0.000000)\",fill:t()},o.a.createElement(\"g\",{id:\"Icon-Microphone-Off-24px\",transform:\"translate(120.000000, 0.000000)\"},o.a.createElement(\"path\",{d:\"M15.8931049,12.3495358 L15.8883757,12.354265 C15.7702192,12.7237203 15.5976472,13.0928313 15.3634551,13.4334743 C14.9080287,14.0959127 14.281481,14.5761112 13.4232304,14.8194102 L11,17.2426407 L11,18.9906311 C11,18.9937578 11.0000137,18.9968808 11.0000409,19 L9.99077797,19 C9.45097518,19 9,19.4477153 9,20 C9,20.5561352 9.44358641,21 9.99077797,21 L14.009222,21 C14.5490248,21 15,20.5522847 15,20 C15,19.4438648 14.5564136,19 14.009222,19 L12.9999626,19 C12.999986,18.9968804 13,18.9937574 13,18.9906311 L13,16.9383953 C14.793746,16.7093537 16.1268712,15.8533183 17.0115375,14.566531 C17.631941,13.6641258 17.9116422,12.769082 17.9922726,12.124039 C18.0567667,11.6080864 17.715976,11.1348845 17.2185349,11.0241058 L17.2162194,11.0264213 C17.1758852,11.0160463 17.1430789,11.0101085 17.12403,11.0077274 C16.5760096,10.9392248 16.076219,11.3279514 16.0077165,11.8759725 C15.9990827,11.9450424 15.9659776,12.1062504 15.8970768,12.3267333 C15.8944966,12.3349898 15.8931939,12.3425837 15.8931049,12.3495358 Z M14.8100942,4.94726512 C14.3837386,3.80970165 13.2864273,3 12,3 C10.3431458,3 9,4.34314575 9,6 L9,10.7573593 L14.8100942,4.94726512 Z M7.97590142,11.7814579 C7.86511978,11.2840207 7.39191988,10.9432336 6.87596978,11.0077274 C6.32795032,11.0762298 5.93922497,11.5760196 6.0077274,12.124039 C6.05291889,12.4855709 6.16064541,12.9256367 6.35584336,13.401516 L7.97590142,11.7814579 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z\",id:\"Combined-Shape\"}))));case\"screen\":return o.a.createElement(\"path\",{fill:t(),fillRule:\"evenodd\",d:\"M2 5.006C2 3.898 2.898 3 3.99 3h16.02C21.108 3 22 3.897 22 5.006v9.988A2.003 2.003 0 0 1 20.01 17H3.99C2.892 17 2 16.103 2 14.994V5.006zm2 .99v8.009c0 .54.448.995 1 .995h14c.555 0 1-.446 1-.995v-8.01c0-.54-.448-.995-1-.995H5c-.555 0-1 .446-1 .995zM7 20c0-.552.456-1 .995-1h8.01c.55 0 .995.444.995 1 0 .552-.456 1-.995 1h-8.01A.995.995 0 0 1 7 20z\"});case\"leave\":return o.a.createElement(\"path\",{d:\"M19.347 11l-1.71-1.638a.832.832 0 0 1 0-1.222l.03-.03a.922.922 0 0 1 1.27-.003l3.34 3.2a.95.95 0 0 1 0 1.386l-3.34 3.2a.918.918 0 0 1-1.27-.003l-.03-.03a.842.842 0 0 1 0-1.221L19.348 13h-7.352A.995.995 0 0 1 11 12c0-.552.456-1 .995-1h7.352zM16 10h-2V7.995c0-.54-.446-.995-.997-.995H6.997A1 1 0 0 0 6 7.995v8.01c0 .54.446.995.997.995h6.006a1 1 0 0 0 .997-.995V14h2v2.994A2.009 2.009 0 0 1 13.991 19H6.01A2.007 2.007 0 0 1 4 16.994V7.006C4 5.898 4.902 5 6.009 5h7.982C15.101 5 16 5.897 16 7.006V10z\",fill:t(),fillRule:\"evenodd\"});case\"chat\":return o.a.createElement(\"path\",{d:\"M8.984 17.522c.93.308 1.949.478 3.016.478 4.418 0 8-2.91 8-6.5S16.418 5 12 5s-8 2.91-8 6.5c0 1.65.756 3.156 2.003 4.302a8.751 8.751 0 0 1-.71 2.187c-.317.606-.457 1.011 0 1.011 1.727 0 1.99-1.236 3.691-1.478z\",fill:t(),fillRule:\"evenodd\"});case\"record\":return o.a.createElement(\"g\",null,o.a.createElement(\"svg\",{version:\"1.1\",id:\"Layer_1\",xmlns:\"http://www.w3.org/2000/svg\",x:\"0px\",y:\"0px\",viewBox:\"0 0 120 130\"},o.a.createElement(\"g\",null,o.a.createElement(\"path\",{d:\"M56.7,0C25.4,0,0,25.4,0,56.7s25.4,56.7,56.7,56.7c31.3,0,56.7-25.4,56.7-56.7S88.1,0,56.7,0z M56.7,111.1 c-30,0-54.3-24.4-54.3-54.3S26.8,2.4,56.7,2.4c30,0,54.3,24.4,54.3,54.3S86.7,111.1,56.7,111.1z\",fill:t()}),o.a.createElement(\"ellipse\",{transform:\"matrix(0.3569 -0.9341 0.9341 0.3569 -16.5128 89.4864)\",cx:\"56.7\",cy:\"56.7\",rx:\"49.6\",ry:\"49.6\",fill:t()}))));default:throw new Error}}())}function Vt(e){return o.a.createElement(\"button\",{disabled:e.disabled,onClick:e.onClick,className:\"tray-button\"+(e.newButtonGroup?\" new-group\":\"\")},o.a.createElement(Dt,{type:e.type,highlighted:e.highlighted}))}var Ut=a(55),Ft=a.n(Ut),Gt=a(97),zt=a.n(Gt);a(189);function Ht(e){var t=Object(n.useContext)(w),a=Object(n.useState)(\"\"),r=Object(b.a)(a,2),c=r[0],i=r[1],l=Object(n.useContext)(g).session,s=Object(b.a)(l,2),u=s[0],d=s[1],m=Object(n.useContext)(O).myStateArray,f=Object(b.a)(m,1)[0],h=u.chatHistory,v=function(e){d((function(t){return Object(p.a)(Object(p.a)({},t),{},{chatHistory:[].concat(Object(F.a)(t.chatHistory),[e])})}))},S=o.a.createRef();return Object(n.useEffect)((function(){if(t)return t.on(\"app-message\",a),function(){t.off(\"app-message\",a)};function a(a){var n=t.participants(),o=n[a.fromId].user_name.includes(\"_Admin\")?n[a.fromId].user_name.split(\"_Admin\").join(\"\"):n[a.fromId].user_name;\"chat\"==a.data.type&&v({sender:o,message:a.data.message}),\"chat\"==a.data.type&&e.notification()}}),[t,h]),Object(n.useEffect)((function(){}),[h]),Object(n.useEffect)((function(){S.current&&S.current.scrollIntoView({behavior:\"smooth\"})}),[h]),e.onClickDisplay?o.a.createElement(\"div\",{className:\"chat\"},o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:\"chat-history\"},h.map((function(e,t,a){return e.sender==f.Name||e.sender==f.name.split(\"_Admin\").join(\"\")?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"my message\"},e.message):a[t-1]&&e.sender==a[t-1].sender?o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"additional message\"},e.message):o.a.createElement(\"div\",null,o.a.createElement(\"div\",{key:\"name-label-\".concat(t),className:\"name-label\"},o.a.createElement(\"b\",null,e.sender),\":\"),o.a.createElement(\"div\",{key:\"entry-\".concat(t),className:\"received message\"},e.message))})),o.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:S}))),o.a.createElement(\"form\",{onSubmit:function(e){if(e.preventDefault(),c){t.sendAppMessage({type:\"chat\",message:c},\"*\");var a=t.participants().local.user_name.includes(\"_Admin\")?t.participants().local.user_name.split(\"_Admin\").join(\"\"):t.participants().local.user_name;v({sender:a,message:c}),i(\"\")}}},o.a.createElement(\"label\",{htmlFor:\"chatInput\"}),o.a.createElement(\"input\",{id:\"chatInput\",className:\"chat-input\",type:\"text\",autoComplete:\"off\",placeholder:\"Type your message here..\",value:c,onChange:function(e){i(e.target.value)}}),o.a.createElement(\"button\",{type:\"submit\",className:\"send-chat-button\"},\"Send\"))):null}function Kt(e){var t=Object(n.useContext)(w),a=Object(n.useContext)(g).session,r=Object(b.a)(a,2),c=r[0],i=(r[1],Object(n.useContext)(O)),l=i.myStateArray,s=(i.setName,i.setRole,i.setUserList,i.setViewMode),u=i.setCamOnAtSessionStart,d=i.setMicOnAtSessionStart,m=(i.setAmAdmin,Object(b.a)(l,2)),f=m[0],p=(m[1],Object(n.useState)(!1)),h=Object(b.a)(p,2),v=h[0],S=h[1],E=Object(n.useState)(!1),y=Object(b.a)(E,2),j=y[0],A=y[1],k=Object(n.useState)(!1),C=Object(b.a)(k,2),N=C[0],x=C[1],I=Object(n.useState)(!1),L=Object(b.a)(I,2),R=L[0],M=L[1],B=Object(n.useState)(!1),D=Object(b.a)(B,2),V=D[0],U=D[1],F=Object(n.useState)(!1),G=Object(b.a)(F,2),H=G[0],K=G[1],Z=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}(),W=o.a.createRef(),J=o.a.createRef(),Y=o.a.createRef(),q=o.a.createRef(),X=o.a.createRef();window.updateTray=function(){Z()};var Q=Object(n.useState)(!1),$=Object(b.a)(Q,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(b.a)(ae,2),oe=ne[0],re=ne[1];Object(n.useEffect)((function(){return document.addEventListener(\"mousedown\",ce),function(){document.removeEventListener(\"mousedown\",ce)}}));var ce=function(e){console.log(\"handling click\"),!J.current||J.current.contains(e.target)||W.current.contains(e.target)?!q.current||q.current.contains(e.target)||Y.current.contains(e.target)||re(!1):te(!1)};function ie(){return le.apply(this,arguments)}function le(){return(le=Object(P.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){return(a=Object(P.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=\"https://api.daily.co/v1/recordings/\"+t+\"/download\",e.next=3,nt.a.post(\"/.netlify/functions/uploadToMuxDEMO\",{input:a});case 3:n=e.sent,alert(n.data.message);case 5:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)},t=function(e){return a.apply(this,arguments)},function(){return new Promise((function(e,t){var a=!1,n=setInterval((function(){Je.a.ajax({url:\"https://api.daily.co/v1/recordings?room_name=Livestorm-testing&limit=1\",beforeSend:function(e){e.setRequestHeader(\"Authorization\",\"Bearer 54d0be1deb0e5ecfebf61207a47cf13689c18a2fd4a695a41b13622d61e5a756\")},type:\"GET\",dataType:\"json\",contentType:\"application/json\",processData:!1,success:function(t){\"finished\"===t.data[0].status&&(a=!0,e(t))}}),a&&clearInterval(n)}),2e3)}))}().then((function(e){return t(e.data[0].share_token)}));case 4:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}return window.uploadRecording=ie,Object(n.useEffect)((function(){c.isActive?f.role.includes(\"Shadow\")||f.role.includes(\"Seller\")||f.role.includes(\"Buyer\")||(d(t.localAudio()),u(t.localVideo()),t.setLocalAudio(!1),t.setLocalVideo(!1)):c.isActive||(!t.localAudio()&&t.setLocalAudio(f.micOnAtSessionStart),!t.localVideo()&&t.setLocalVideo(f.camOnAtSessionStart),d(null),u(null))}),[c.isActive,f.role]),Object(n.useEffect)((function(){if(t)return e(),t.on(\"participant-updated\",e),function(){t.off(\"participant-updated\",e)};function e(e){e&&T(e);var a=function(e){var t,a,n,o=!1;if(e&&e.participants()&&e.participants().local){var r=e.participants().local;t=!r.video,a=!r.audio,n=r.screen,o=r.record}return[t,a,n,o]}(t),n=Object(b.a)(a,4),o=n[0],r=n[1],c=n[2],i=n[3];S(o),A(r),x(c),M(i)}}),[t]),o.a.createElement(\"div\",{className:f.amAdmin&&f.sidebar?\"tray-with-sidebar\":\"tray\"},o.a.createElement(Vt,{type:\"camera\",highlighted:v,onClick:function(){t.setLocalVideo(v)}}),o.a.createElement(\"div\",{onClick:function(){re(!oe)},style:{position:\"absolute\",left:\"57px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:Y},\"^\"),oe?o.a.createElement(Lt,{type:\"video\",page:\"main\",ref:q}):null),o.a.createElement(Vt,{type:\"mute-mic\",highlighted:j,onClick:function(){t.setLocalAudio(j)}}),o.a.createElement(\"div\",{onClick:function(){te(!ee)},style:{position:\"absolute\",left:\"123px\",bottom:\"23px\"}},o.a.createElement(\"p\",{className:\"caret\",ref:W},\"^\"),ee?o.a.createElement(Lt,{type:\"audio\",page:\"main\",ref:J}):null),z.a.supportedBrowser().supportsScreenShare&&f.amAdmin&&o.a.createElement(Vt,{type:\"screen\",highlighted:N,onClick:function(){N||!function(){var e=!1,a=t.participants();for(var n in a)a[n].screenVideoTrack&&(e=!0);return e}()?N?t.stopScreenShare():t.startScreenShare():alert(\"There is already a screenshare in progress\")}}),o.a.createElement(Vt,{type:\"chat\",highlighted:H,onClick:function(){U(!V),H&&K(!H)}}),o.a.createElement(Ht,{onClickDisplay:V,notification:function(){K(!H)}}),o.a.createElement(\"div\",{className:\"status-display\"},o.a.createElement(\"div\",{style:{height:\"30px\"}},\"Roleplay:  \\xa0\",c.isActive?o.a.createElement(\"div\",{className:\"display-card active\"},\"Live\"):o.a.createElement(\"div\",{className:\"display-card paused\"},\"Paused\")),o.a.createElement(\"div\",{className:\"vertical-line\"}),!c.isActive||\"Admin\"!==f.role&&\"Attendee\"!==f.role?o.a.createElement(\"div\",{style:{height:\"30px\"}},\"My Role: \\xa0\",\"Admin\"==f.role||\"Attendee\"==f.role?o.a.createElement(\"span\",{className:\"display-card role\"},\"Viewer\"):o.a.createElement(\"span\",{className:\"display-card role\"},f.role.match(/\\D/g).join(\"\"))):o.a.createElement(\"div\",{className:\"my-view\"},\"My View: \\xa0\",o.a.createElement(\"span\",null,o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{className:\"my-view-selector\",value:f.viewMode,onChange:function(e){return s(e.target.value)}},o.a.createElement(\"option\",{value:\"Seller\"},\"Seller\"),c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"Shadow1\",selected:!0},\"Shadow 1\"),c.roleOf.Shadow2&&o.a.createElement(\"option\",{value:\"Shadow2\"},\"Shadow 2\"),c.roleOf.Shadow3&&o.a.createElement(\"option\",{value:\"Shadow3\"},\"Shadow 3\"),c.roleOf.Shadow4&&o.a.createElement(\"option\",{value:\"Shadow4\"},\"Shadow 4\"),c.roleOf.Shadow5&&o.a.createElement(\"option\",{value:\"Shadow5\"},\"Shadow 5\"),c.roleOf.Shadow6&&o.a.createElement(\"option\",{value:\"Shadow6\"},\"Shadow 6\"),c.roleOf.Seller&&c.roleOf.Shadow1&&o.a.createElement(\"option\",{value:\"All\"},\"All\"),c.roleOf.Shadow1||c.roleOf.Shadow2||c.roleOf.Shadow3||c.roleOf.Shadow4||c.roleOf.Shadow5||c.roleOf.Shadow6&&o.a.createElement(\"option\",{value:\"All\"},\"All\"))))))),o.a.createElement(\"img\",{ref:X,src:Ft.a,onClick:function(){X.current.src=R?Ft.a:zt.a,R?(t.stopRecording(),ie()):t.startRecording()},width:55,height:37,className:\"recording-button\"}),o.a.createElement(Vt,{type:\"leave\",disabled:e.disabled,newButtonGroup:!1,highlighted:!0,onClick:function(){e.onClickLeaveCall&&e.onClickLeaveCall()}}))}a(190),a(191);function Zt(e){Object(n.useContext)(w);var t=Object(n.useContext)(g).session,a=Object(b.a)(t,2),r=a[0],c=a[1],i=e.role,l=Object(n.useContext)(O),s=l.myStateArray,u=(l.setNumber,Object(b.a)(s,2)),d=u[0];u[1];return o.a.createElement(\"form\",{className:\"dropdown\"},o.a.createElement(\"select\",{className:\"selector\",id:i,onChange:function(e){window.role=i;var t=e.target.id,a=e.target.value;c((function(e){return Object(p.a)(Object(p.a)({},e),{},{roleOf:Object(p.a)(Object(p.a)({},e.roleOf),{},Object(I.a)({},t,a))})})),console.log(e.target.id+\" is now: \"+e.target.value),c((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))},value:r.roleOf[i]},o.a.createElement(\"option\",{value:null}),d.userList.names&&d.userList.names.length>0&&d.userList.names.map((function(e){return o.a.createElement(\"option\",{value:e},e.includes(\"_Admin\")?e.split(\"_Admin\").join(\"\"):e)}))))}function Wt(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),r=(a[0],a[1],Object(n.useContext)(w)),c=Object(n.useState)(!1),i=Object(b.a)(c,2),l=(i[0],i[1],Object(n.useState)(!1)),s=Object(b.a)(l,2),u=(s[0],s[1],Object(n.useState)(!1)),d=Object(b.a)(u,2),m=(d[0],d[1],Object(n.useState)(!1)),h=Object(b.a)(m,2),v=(h[0],h[1],Object(n.useState)(!1)),S=Object(b.a)(v,2),E=(S[0],S[1],Object(n.useContext)(g).session),y=Object(b.a)(E,2),j=y[0],A=y[1],k=Object(n.useContext)(O),C=k.myStateArray,T=(k.setName,k.setRole,k.setUserList,k.setViewMode,k.setCamOnAtSessionStart,k.setMicOnAtSessionStart,k.setAdminPresent,k.setAmAdmin,Object(b.a)(C,2)),N=T[0],x=(T[1],function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return e+1}))}}());window.updateAdminPanel=x;var I=Object(n.useState)(\"Play\"),L=Object(b.a)(I,2),R=L[0],M=L[1],_=Object(n.useState)(\"monologue3\"),P=Object(b.a)(_,2),B=P[0],D=P[1],V=o.a.createRef(),U=o.a.createRef();Object(n.useEffect)((function(){if(r){for(var e=[\"participant-joined\",\"participant-left\",\"joined-meeting\"],t=0,a=e;t<a.length;t++){var n=a[t];r.on(n,(function(){return setTimeout((function(){return x()}),100)}))}return function(){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.off(n,(function(){return setTimeout((function(){return x()}),100)}))}}catch(o){a.e(o)}finally{a.f()}}}}),[r]),Object(n.useEffect)((function(){j.hasAnUpdate&&(console.log(\"****HAS AN UPDATE\"),F(),A((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!1})})))}),[j.hasAnUpdate]);var F=function(){console.log(\"Sending current state...\"),r.sendAppMessage(j,\"*\")};return o.a.createElement(\"div\",null,o.a.createElement(\"div\",{className:N.sidebar?\"admin-panel on\":\"admin-panel off\"},o.a.createElement(\"div\",{className:\"role-selector-section\"},o.a.createElement(\"div\",{className:\"selector-box\"},\"Buyer(s)\",o.a.createElement(Zt,{role:\"Buyer1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Buyer2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Buyer3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Buyer4\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller\",o.a.createElement(Zt,{role:\"Seller\",selectedRoles:\"selectedRoles\"})),o.a.createElement(\"div\",{className:\"selector-box\"},\"Seller's shadow(s)\",o.a.createElement(Zt,{role:\"Shadow1\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Shadow2\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Shadow3\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Shadow4\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Shadow5\",selectedRoles:\"selectedRoles\"}),o.a.createElement(Zt,{role:\"Shadow6\",selectedRoles:\"selectedRoles\"}))),o.a.createElement(\"div\",{className:\"session-toggle\"},o.a.createElement(\"label\",{class:\"switch\"},o.a.createElement(\"input\",{type:\"checkbox\",id:\"state\",checked:j.isActive,onChange:function(){A((function(e){return Object(p.a)(Object(p.a)({},e),{},{isActive:!e.isActive})})),A((function(e){return Object(p.a)(Object(p.a)({},e),{},{hasAnUpdate:!0})}))}}),o.a.createElement(\"span\",{class:\"slider round\"})),o.a.createElement(\"p\",null,\"Session active\")),o.a.createElement(\"div\",{className:\"practice-audio hidden\",ref:V},\"Practice audio\",o.a.createElement(\"div\",{style:{height:\"30px\",margin:\"auto\",marginTop:\"5px\"}},o.a.createElement(\"form\",{action:\"\"},o.a.createElement(\"fieldset\",{style:{border:\"none\"}},o.a.createElement(\"select\",{class:\"practice-audio-dropdown\",onChange:function(e){D(e.target.value),console.log(\"***CHANGED TO \"+e.target.value)}},o.a.createElement(\"option\",{value:\"monologue3\"},\"Anna\"),o.a.createElement(\"option\",{value:\"monologue5\"},\"Livestorm A\"),o.a.createElement(\"option\",{value:\"monologue6\"},\"Livestorm B\"),o.a.createElement(\"option\",{value:\"monologue4\"},\"IBM Garage \"))))),o.a.createElement(\"span\",{style:{color:\"green\",fontSize:\"16px\",fontFamily:\"Verdana, Geneva, Tahoma, sans-serif\"}},o.a.createElement(\"button\",{onClick:function(){var e=j.roleOf.Shadow1&&N.userList.sessionIdFor[j.roleOf.Shadow1],t=j.roleOf.Shadow2&&N.userList.sessionIdFor[j.roleOf.Shadow2];if(j.roleOf.Shadow1==N.name&&(e=\"me\"),j.roleOf.Shadow2==N.name&&(t=\"me\"),e||t){var a=window.audioIsPlaying?\"pause\":\"play\",n={type:\"instructions\",target:B,action:a,recipient:e},o={type:\"instructions\",target:B+\"B\",action:a,recipient:t};e&&(\"me\"!=e?r.sendAppMessage(n,e):\"me\"==e&&W(B,a),console.log(\"Sent \".concat(a,\" request to \").concat(j.roleOf.Shadow1))),t&&(\"me\"!=t?r.sendAppMessage(o,t):\"me\"==t&&W(B+\"B\",a),console.log(\"Sent \".concat(a,\" request to \").concat(j.roleOf.Shadow2))),window.audioIsPlaying=!window.audioIsPlaying,M(window.audioIsPlaying?\"Pause\":\"Play\")}else console.log(\"no recipients.\")},id:\"play-pause\"},R))),o.a.createElement(\"div\",{className:\"training-toggle\",ref:U,onClick:function(){V.current.classList.toggle(\"hidden\"),U.current.innerText=V.current.classList.contains(\"hidden\")?\"Show Practice\":\"X\"}},\"Show Practice\")))}var Jt=\"STATE_JOINING\",Yt=\"STATE_JOINED\",qt=\"STATE_ERROR\";function Xt(e){var t=Object(b.a)(e.headerState,2),a=(t[0],t[1]),r=Object(n.useState)(\"STATE_IDLE\"),c=Object(b.a)(r,2),i=c[0],l=c[1],s=Object(n.useState)(null),u=Object(b.a)(s,2),d=u[0],m=u[1],h=Object(n.useState)(null),v=Object(b.a)(h,2),S=v[0],E=v[1],y=Object(n.useState)({type:\"sessionState\",isKnown:!1,isActive:!1,AdminVisible:!1,hasAnUpdate:!1,roleOf:{Buyer1:\"\",Buyer2:\"\",Buyer3:\"\",Buyer4:\"\",Seller:\"\",Shadow1:\"\",Shadow2:\"\",Shadow3:\"\",Shadow4:\"\",Shadow5:\"\",Shadow6:\"\"},chatHistory:[]}),j=Object(b.a)(y,2),A=j[0],k=j[1],C=Object(n.useState)({name:\"Username\",role:window.myRole,sidebar:!0,amAdmin:!0,userList:{names:[],sessionIdFor:{}},adminPresent:!1,viewMode:null,audioIsPlaying:!1,camOnAtSessionStart:null,micOnAtSessionStart:null,number:null}),N=Object(b.a)(C,2),x=N[0],I=N[1];[\"SB\",\"Prep\",\"LeaseQuery\"].includes(window.myP)||(window.location.href=\"http://secondbody.co\");var L=Object(n.useCallback)((function(){return l(\"STATE_CREATING\"),a(!0),Bt.createRoom().then((function(e){return e})).catch((function(e){console.log(\"Error creating room\",e),m(null),l(\"STATE_IDLE\")}))}),[]),R=Object(n.useCallback)((function(e,t){(function(){var a=Object(P.a)(_.a.mark((function a(){var n;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=z.a.createCallObject({subscribeToTracksAutomatically:!1,url:e,token:t}),m(e),E(n),l(Jt),a.next=6,n.startCamera();case 6:return a.next=8,n.setUserName(x.name);case 8:window.initialInputs?(console.log(\"initial audio: \"+window.initialInputs[0]+\". Initial video: \"+window.initialInputs[1]),n.join({audioSource:window.initialInputs[0],videoSource:window.initialInputs[1]})):navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){if(e){var t=e.getAudioTracks(),a=e.getVideoTracks();t&&t.length>0&&a&&a.length>0&&n.join({audioSource:t[0],videoSource:a[0]})}})),console.log(\"joining the call as \"+x.name),Z(d)+\"&N=\"+x.name+\"&R=\"+x.role;case 11:case\"end\":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[x.name]),M=Object(n.useCallback)((function(){S&&(S.stopRecording(),i===qt?S.destroy().then((function(){m(null),E(null),l(\"STATE_IDLE\"),window.initialize(),a(!1)})):(l(\"STATE_LEAVING\"),S.leave(),window.initialize(),a(!1)))}),[S,i]);Object(n.useEffect)((function(){var e=Z(d);window.pageUrl=e,window.myP&&(e.indexOf(\"?\")>-1?e+=\"&P=\"+window.myP:e+=\"?P=\"+window.myP),e!==window.location.href&&window.history.replaceState(null,null,e)}),[d]),Object(n.useEffect)((function(){window.callObject=S}),[S]),Object(n.useEffect)((function(){window.myState=x}),[x]),Object(n.useEffect)((function(){window.userList=x.userList}),[x.userList]),Object(n.useEffect)((function(){window.sessionState=A}),[A]),Object(n.useEffect)((function(){S&&(window.record=function(){S.startRecording()},window.stop=function(){S.stopRecording()})}),[i]),Object(n.useEffect)((function(){var e;if(S){if(!A.isKnown&&x.adminPresent){e=setInterval((function(){A.isKnown?clearInterval(e):(S.sendAppMessage(\"State please?\",\"*\"),console.log(\"Requesting meeting state...\"))}),1e3)}return function(){e&&clearInterval(e)}}}),[A.isKnown,x.adminPresent]),Object(n.useEffect)((function(){if(S){var e=[\"joined-meeting\",\"left-meeting\",\"error\"];o();for(var t=0,a=e;t<a.length;t++){var n=a[t];S.on(n,o)}return function(){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;S.off(n,o)}}catch(r){a.e(r)}finally{a.f()}}}function o(e){switch(e&&T(e),S.meetingState()){case\"joined-meeting\":l(Yt),S.setNetworkTopology({topology:\"sfu\"}),console.log(\"*****JOINED MEETING\");break;case\"left-meeting\":S.destroy().then((function(){m(null),E(null),l(\"STATE_IDLE\"),clearInterval(window.stateRequest),window.initialize()}));break;case\"error\":l(qt)}}}),[S]),Object(n.useEffect)((function(){if(S)return S.on(\"app-message\",e),function(){S.off(\"app-message\",e)};function e(e){if(e)if(T(e),console.log(\"received app message from \".concat(e.fromId,\": \"),e.data),e.data.constructor===Object&&\"sessionState\"==e.data.type){var t=e.data;t.hasAnUpdate=!1,k(t)}else e.data.constructor===Object&&\"instructions\"==e.data.type&&e.data.recipient==S.participants().local.session_id?W(e.data.target,e.data.action):\"State please?\"==e.data&&(console.log(\"*******Received state request\"),x.amAdmin&&A.isKnown&&(console.log(\"Sending current state...\"),S.sendAppMessage(A,\"*\")))}}),[S,A]);var B=[Jt,Yt,qt].includes(i);return o.a.createElement(\"div\",{className:\"app\"},o.a.createElement(g.Provider,{value:{session:[A,k]}},o.a.createElement(O.Provider,{value:{myStateArray:[x,I],setName:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e})}))},setRole:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{role:e})}))},setSidebar:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{sidebar:e})}))},setUserList:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{userList:e})}))},setViewMode:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{viewMode:e})}))},setCamOnAtSessionStart:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{camOnAtSessionStart:e})}))},setMicOnAtSessionStart:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{micOnAtSessionStart:e})}))},setAdminPresent:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{adminPresent:e})}))},setAmAdmin:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{amAdmin:e})}))},setNumber:function(e){I((function(t){return Object(p.a)(Object(p.a)({},t),{},{number:e})}))}}},B?o.a.createElement(w.Provider,{value:S},o.a.createElement(It,{roomUrl:d}),o.a.createElement(Kt,{onClickLeaveCall:M}),x.amAdmin&&o.a.createElement(Wt,null)):o.a.createElement(_t,{onClick:function(){L().then((function(e){return R(e.url,e.token)}))}}))))}a(192);var Qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var o;return Object(l.a)(this,a),(o=t.call(this,e,n)).hls=new ft.a,o}return Object(s.a)(a,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.src,a=e.video;ft.a.isSupported()&&(this.hls.loadSource(t),this.hls.attachMedia(a),this.hls.on(ft.a.Events.MANIFEST_PARSED,(function(){a.pause()})))}},{key:\"componentWillUnmount\",value:function(){this.hls&&this.hls.destroy()}},{key:\"render\",value:function(){return o.a.createElement(\"source\",{src:this.props.src,type:this.props.type||\"application/x-mpegURL\"})}}]),a}(n.Component),$t=function(e){return o.a.createElement(dt.Player,null,o.a.createElement(Qt,{isVideoChild:!0,src:e.src}),o.a.createElement(dt.BigPlayButton,{position:\"center\"}),o.a.createElement(dt.ControlBar,null,o.a.createElement(dt.CurrentTimeDisplay,{order:4.1}),o.a.createElement(dt.TimeDivider,{order:4.2}),o.a.createElement(dt.PlaybackRateMenuButton,{rates:[2,1.5,1,.75,.5],order:7.1}),o.a.createElement(dt.VolumeMenuButton,null)))};a(193);function ea(e){var t=e.show,a=e.title,n=e.description,r=e.confirm,c=e.cancel,i=e.confirmText,l=e.action;return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(\"div\",{className:\"overlay\"},o.a.createElement(\"div\",{className:\"dialog \"+l},o.a.createElement(\"div\",{className:\"dialog__content\"},o.a.createElement(\"h2\",{className:\"dialog__title\"},a),o.a.createElement(\"p\",{className:\"dialog__description\"},n)),o.a.createElement(\"hr\",null),o.a.createElement(\"div\",{className:\"dialog__footer\"},o.a.createElement(\"button\",{className:\"dialog__cancel\",onClick:c},\"Cancel\"),o.a.createElement(\"button\",{className:\"dialog__confirm \"+l,onClick:r},i))))):o.a.createElement(o.a.Fragment,null)}function ta(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=Object(b.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(null),d=Object(b.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)(!1),h=Object(b.a)(p,2),v=h[0],w=h[1],O=Object(n.useState)(null),g=Object(b.a)(O,2),S=g[0],E=g[1];function y(){return(y=Object(P.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.get(\"/.netlify/functions/getFromMuxDEMO\");case 2:\"Error\"!=(t=e.sent).data.message&&r(t.data.message);case 4:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]);var j=function(){var e=Object(P.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.post(\"/.netlify/functions/deleteFromMuxDEMO\",{assetId:m});case 2:e.sent,window.location.reload();case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){s(!1),w(!1)};return o.a.createElement(\"div\",null,o.a.createElement(\"h2\",null,\"Video library\"),o.a.createElement(\"div\",{className:\"gallery\"},a.map((function(e){return o.a.createElement(\"div\",null,o.a.createElement($t,{src:\"https://stream.mux.com/\"+e.playback_ids[0].id+\".m3u8\"}),o.a.createElement(\"p\",null,new Date(parseInt(1e3*e.created_at)).toLocaleDateString(\"en-US\",{weekday:\"short\",year:\"numeric\",month:\"short\",day:\"numeric\"}).toString(),o.a.createElement(\"br\",null),o.a.createElement(ht.a,{size:20,title:\"Share\",onClick:function(){var t;t=\"https://stream.mux.com/\"+e.playback_ids[0].id+\"/medium.mp4\",E(t),w(!0)},style:{cursor:\"pointer\",marginTop:\"10px\"}}),\"\\xa0 \\xa0 \\xa0\",o.a.createElement(ht.b,{size:20,title:\"Delete\",onClick:function(){var t;t=e.id,f(t),s(!0)},style:{cursor:\"pointer\"}})))})),o.a.createElement(ea,{show:l,title:\"Delete video?\",description:\"Are you sure you wish to permanently delete this video?\",confirm:j,cancel:A,confirmText:\"Yes, delete it\",action:\"delete\"}),o.a.createElement(ea,{show:v,title:\"Link for sharing:\",description:S,confirm:function(e){var t;w(!1),t=S,navigator.clipboard.writeText(t)},cancel:A,confirmText:\"Copy to clipboard\",action:\"share\"})))}a(194);function aa(e){var t=Object(b.a)(e.headerState,2),a=t[0];t[1];return a?null:o.a.createElement(\"div\",{className:\"nav-bar\"},o.a.createElement(\"div\",{className:\"nav-buttons\"},o.a.createElement(\"a\",{className:\"router-button\",href:\"/demo\"},o.a.createElement(Ot.b,{size:\"30\",style:{margin:\"14px\"}})),o.a.createElement(\"a\",{className:\"router-button\",href:\"/demo/library\"},o.a.createElement(Ot.a,{size:\"30\",style:{margin:\"14px\"}}))))}function na(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1];return o.a.createElement(\"div\",null,o.a.createElement(aa,{headerState:[a,r]}),o.a.createElement(m.d,null,o.a.createElement(m.b,{path:\"/\",element:o.a.createElement(Xt,{headerState:[a,r]})}),o.a.createElement(m.b,{path:\"/library\",element:o.a.createElement(ta,{headerState:[a,r]})})))}var oa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:\"render\",value:function(){return o.a.createElement(m.d,null,o.a.createElement(m.b,{path:\"/\",element:o.a.createElement(ee,null)}),o.a.createElement(m.b,{path:\"/livestorm\",element:o.a.createElement(Le,null)}),o.a.createElement(m.b,{path:\"/livestorm-test/*\",exact:!0,strict:!0,render:function(e){return o.a.createElement(m.a,{to:\"\".concat(e.location.pathname,\"/\")})},element:o.a.createElement(St,null)}),o.a.createElement(m.b,{path:\"/demo/*\",exact:!0,strict:!0,render:function(e){return o.a.createElement(m.a,{to:\"\".concat(e.location.pathname,\"/\")})},element:o.a.createElement(na,null)}))}}]),a}(n.Component);a(195);function ra(){return o.a.createElement(\"p\",{class:\"browser-unsupported\"},\"Looks like you need to upgrade your browser to make Daily video calls.\",o.a.createElement(\"br\",null),\"See\\xa0\",o.a.createElement(\"a\",{href:\"https://docs.daily.co/docs/browsers\"},\"this page\"),\"\\xa0for help getting on a supported browser version.\")}c.a.render(z.a.supportedBrowser().supported?o.a.createElement(i.a,null,o.a.createElement(oa,null)):o.a.createElement(ra,null),document.getElementById(\"root\"))}]),[[98,1,2]]]);","extractedComments":[]}