(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(35)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(15),r=n.n(i),c=(n(21),n(4)),s=n.n(c),l=n(9),u=n(3),d=n(1);n(23),n(24);function w(e,t){if(t)switch(t.state){case"blocked":return t.blocked.byPermissions?"".concat(e," permission denied"):t.blocked.byDeviceMissing?"".concat(e," device missing"):"".concat(e," blocked");case"off":return t.off.byUser?"".concat(e," muted"):t.off.byBandwidth?"".concat(e," muted to save bandwidth"):"".concat(e," off");case"sendable":return"".concat(e," not subscribed");case"loading":return"".concat(e," loading...");case"interrupted":return"".concat(e," interrupted");case"playable":return null}}function m(e){var t=Object(o.useRef)(null),n=Object(o.useRef)(null),i=function(){var e=Object(o.useState)(0),t=Object(d.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return e+1}))}}();window.updateTile=function(){i()};var r=Object(o.useMemo)((function(){return e.videoTrackState&&"playable"===e.videoTrackState.state&&(e.isLocalPerson||!0===e.videoTrackState.subscribed)?e.videoTrackState.track:null}),[e.videoTrackState]),c=Object(o.useMemo)((function(){return e.audioTrackState&&e.audioTrackState.track&&"playable"===e.audioTrackState.state&&!1!==e.audioTrackState.subscribed?(e.isAudioOnly?e.audioTrackState.track.isFiltered=!0:e.audioTrackState.track.isFiltered=!1,e.isScreenShare?e.audioTrackState.track.isScreenShare=!0:e.audioTrackState.track.isScreenShare=!1,e.audioTrackState.track):null}),[e.audioTrackState]),s=Object(o.useMemo)((function(){return w("video",e.videoTrackState)}),[e.videoTrackState]),l=Object(o.useMemo)((function(){return w("audio",e.audioTrackState)}),[e.audioTrackState]);return Object(o.useEffect)((function(){t.current&&(t.current.srcObject=new MediaStream([r]))}),[r]),Object(o.useEffect)((function(){n.current&&(c.isFiltered?(console.log("**FILTERING LIVE TRACK**"),window.stream=new MediaStream([c]),window.mutedAudio=window.mutedAudio||new Audio,window.mutedAudio.muted=!0,window.mutedAudio.srcObject||(window.mutedAudio.srcObject=window.stream),window.mutedAudio.paused&&window.mutedAudio.play(),window.audioCtx=window.audioCtx||new(window.AudioContext||window.webkitAudioContext),window.audioSourceNode=window.audioCtx.createMediaStreamSource(window.stream),"undefined"==typeof window.destination&&(window.destination=window.audioCtx.createMediaStreamDestination()),"undefined"==typeof window.gainNode&&(window.gainNode=window.audioCtx.createGain()),"undefined"==typeof window.panNode&&(window.panNode=window.audioCtx.createStereoPanner()),window.gainNode.gain.value=1,window.panNode.pan.value=1,window.audioSourceNode.connect(window.gainNode).connect(window.panNode).connect(window.destination),n.current.srcObject=window.destination.stream):c.isScreenShare?(console.log("***GETTING SCREENSHARE AUDIO"),n.current.srcObject=new MediaStream([c])):(console.log("***NOT FILTERING: LIVE TRACK***"),n.current.srcObject=new MediaStream([c])))}),[c,window.sessionState]),a.a.createElement("div",{className:function(){var t="tile";return t+=e.isLarge?" large":" small",e.isLocalPerson&&(t+=" local"),t}(),onClick:e.onClick,style:{display:r?"block":"none"}},a.a.createElement("div",{className:"background"}),r&&s&&a.a.createElement("p",{className:"overlay"},s),r&&a.a.createElement("video",{autoPlay:!0,muted:!0,playsInline:!0,ref:t}),r&&!e.disableCornerMessage&&l&&!s&&a.a.createElement("p",{className:"corner"},l),!e.isLocalPerson&&c&&a.a.createElement("audio",{autoPlay:!0,playsInline:!0,ref:n}," "))}var p=a.a.createContext();n(25);function f(e){return a.a.createElement("div",{className:"call-message"+(e.isError?" error":"")},a.a.createElement("p",{className:"call-message-header"},e.header),a.a.createElement("p",null,e.detail))}var b=n(2),g={callItems:{local:{videoTrackState:null,audioTrackState:null}},clickAllowTimeoutFired:!1,camOrMicError:null,fatalError:null};function v(e,t){switch(t.type){case"CLICK_ALLOW_TIMEOUT":return Object(b.a)(Object(b.a)({},e),{},{clickAllowTimeoutFired:!0});case"PARTICIPANTS_CHANGE":var n=function(e){for(var t=Object(b.a)({},g.callItems),n=0,o=Object.entries(e);n<o.length;n++){var a=Object(d.a)(o[n],2),i=a[0],r=a[1];t[i]={videoTrackState:r.tracks.video,audioTrackState:r.tracks.audio},S(r)&&(t[i+"-screen"]={videoTrackState:r.tracks.screenVideo,audioTrackState:r.tracks.screenAudio})}return t}(t.participants);return Object(b.a)(Object(b.a)({},e),{},{callItems:n});case"CAM_OR_MIC_ERROR":return Object(b.a)(Object(b.a)({},e),{},{camOrMicError:t.message});case"FATAL_ERROR":return Object(b.a)(Object(b.a)({},e),{},{fatalError:t.message});default:throw new Error}}function S(e){var t=["loading","playable","interrupted"];return t.includes(e.tracks.screenVideo.state)||t.includes(e.tracks.screenAudio.state)}function h(e){return"local"===e}function E(e){return e.endsWith("-screen")}function O(e){return Object.keys(e).some((function(e){return E(e)}))}function y(e){console.log("[daily.co event]",e.action)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(window.sessionState){console.log("Setting subscriptions..."),console.log("****My role is: "+window.myRole),console.log("viewMode is: "+t);if(window.currentSubs=[],!t&&window.sessionState.isActive){switch(window.myRole){case"Participant1":window.currentSubs=[],window.sessionState.roleOf.Actor2&&window.currentSubs.push(window.sessionState.roleOf.Actor2),!window.sessionState.roleOf.Actor2&&window.sessionState.roleOf.Participant2&&window.currentSubs.push(window.sessionState.roleOf.Participant2);break;case"Participant2":window.currentSubs=[],window.sessionState.roleOf.Actor1&&window.currentSubs.push(window.sessionState.roleOf.Actor1),!window.sessionState.roleOf.Actor1&&window.sessionState.roleOf.Participant1&&window.currentSubs.push(window.sessionState.roleOf.Participant1);break;case"Actor1":window.currentSubs=[],window.sessionState.roleOf.Participant2&&window.currentSubs.push(window.sessionState.roleOf.Participant2),window.sessionState.roleOf.Participant1&&window.currentSubs.push(window.sessionState.roleOf.Participant1+"_AUDIO");break;case"Actor2":window.currentSubs=[],window.sessionState.roleOf.Participant1&&window.currentSubs.push(window.sessionState.roleOf.Participant1),window.sessionState.roleOf.Participant2&&window.currentSubs.push(window.sessionState.roleOf.Participant2+"_AUDIO");break;case"Attendee":default:window.currentSubs=[]}window.sessionState.AdminVisible&&window.currentSubs.push("Admin"),window.currentSubs.filter((function(e){return-1===e.indexOf(window.myName)}))}if(t){switch(t){case"Room1":window.currentSubs=[],window.sessionState.roleOf.Participant1&&window.currentSubs.push(window.sessionState.roleOf.Participant1),window.sessionState.roleOf.Actor2&&window.currentSubs.push(window.sessionState.roleOf.Actor2),!window.sessionState.roleOf.Actor2&&window.sessionState.roleOf.Participant1&&window.sessionState.roleOf.Participant2&&window.sessionState.roleOf.Actor1&&window.currentSubs.push(window.sessionState.roleOf.Participant2);break;case"Room2":window.currentSubs=[],window.sessionState.roleOf.Participant2&&window.currentSubs.push(window.sessionState.roleOf.Participant2),window.sessionState.roleOf.Actor1&&window.currentSubs.push(window.sessionState.roleOf.Actor1),!window.sessionState.roleOf.Actor1&&window.sessionState.roleOf.Participant1&&window.sessionState.roleOf.Participant2&&window.sessionState.roleOf.Actor2&&window.currentSubs.push(window.sessionState.roleOf.Participant1);break;case"Participants":window.currentSubs=[],window.sessionState.roleOf.Participant1&&window.currentSubs.push(window.sessionState.roleOf.Participant1),window.sessionState.roleOf.Participant2&&window.currentSubs.push(window.sessionState.roleOf.Participant2);break;case"Actors":window.currentSubs=[],window.sessionState.roleOf.Actor1&&window.currentSubs.push(window.sessionState.roleOf.Actor1),window.sessionState.roleOf.Actor2&&window.currentSubs.push(window.sessionState.roleOf.Actor2);break;case"All":window.currentSubs=[],window.sessionState.roleOf.Participant1&&window.currentSubs.push(window.sessionState.roleOf.Participant1),window.sessionState.roleOf.Participant2&&window.currentSubs.push(window.sessionState.roleOf.Participant2),window.sessionState.roleOf.Actor1&&window.currentSubs.push(window.sessionState.roleOf.Actor1),window.sessionState.roleOf.Actor2&&window.currentSubs.push(window.sessionState.roleOf.Actor2);break;case"None":window.currentSubs=[],window.sessionState.roleOf.Participant1&&window.currentSubs.push(window.sessionState.roleOf.Participant1),window.sessionState.roleOf.Participant2&&window.currentSubs.push(window.sessionState.roleOf.Participant2);break;default:window.currentSubs=[]}window.currentSubs.filter((function(e){return-1===e.indexOf(window.myName)}))}n().then((function(){var e=window.currentSubs.indexOf("InvisibleScreenShareWidget");e>-1&&window.currentSubs.splice(e,1),window.currentSubs.filter((function(e){return-1===e.indexOf(window.myName)}));var n=window.currentSubs.values();console.log("Currently subscribed to:");var o,a=Object(u.a)(n);try{for(a.s();!(o=a.n()).done;){var i=o.value;console.log(i)}}catch(r){a.e(r)}finally{a.f()}window.currentSubs.length<1&&console.log("No one."),window.updateCall(),t=null,window.updateTray(),window.updateTile()}))}function n(){return new Promise((function(n){var o=e.participants();Object.keys(o).forEach((function(n){var a=o[n],i=a.user_name;if("local"!==n&&i!=window.myName)if(window.sessionState.isKnown)if(console.log("This username is: "+i),window.sessionState.isActive||t)(window.sessionState.isActive||t)&&(window.currentSubs.includes(i+"_AUDIO")?(console.log("Subscribing to audio only for: "+i),e.updateParticipant(a.session_id,{setSubscribedTracks:{audio:!0,video:!1,screenVideo:!1}})):window.currentSubs.includes(i)?(console.log("Subscribing to: "+i),e.updateParticipant(a.session_id,{setSubscribedTracks:!0})):window.currentSubs.includes(i)||(console.log("NOT subscribing to: "+i+", sessionID: "+a.session_id),e.updateParticipant(a.session_id,{setSubscribedTracks:!1})));else if(window.myRole.includes("Actor"))switch(window.myRole){case"Actor1":i==window.sessionState.roleOf.Participant1||"InvisibleScreenShareWidget"==i?(console.log("Subscribing to audio only for: "+i),e.updateParticipant(a.session_id,{setSubscribedTracks:!1}),e.updateParticipant(a.session_id,{setSubscribedTracks:{audio:!0,video:!1,screenVideo:!0,screenAudio:!0}})):(console.log("Subscribing to: "+i),window.currentSubs.push(i),e.updateParticipant(a.session_id,{setSubscribedTracks:!0}));break;case"Actor2":i==window.sessionState.roleOf.Participant2||"InvisibleScreenShareWidget"==i?(console.log("Subscribing to audio only for: "+i),e.updateParticipant(a.session_id,{setSubscribedTracks:!1}),e.updateParticipant(a.session_id,{setSubscribedTracks:{audio:!0,video:!1,screenVideo:!0,screenAudio:!0}})):(console.log("Subscribing to: "+i),window.currentSubs.push(i),e.updateParticipant(a.session_id,{setSubscribedTracks:!0}))}else"InvisibleScreenShareWidget"==i?(console.log("Not subscribing to: "+i),e.updateParticipant(a.session_id,{setSubscribedTracks:{audio:!1,video:!1,screenVideo:!0,screenAudio:!0}})):(console.log("Subscribing to: "+i),window.currentSubs.push(i),e.participants()[a.session_id].tracks.video.subscribed||e.updateParticipant(a.session_id,{setSubscribedTracks:!1}),e.updateParticipant(a.session_id,{setSubscribedTracks:!0}));else e.updateParticipant(a.session_id,{setSubscribedTracks:!1})})),n()}))}}function k(){var e=Object(o.useContext)(p),t=Object(o.useReducer)(v,g),n=Object(d.a)(t,2),i=n[0],r=n[1],c=function(){var e=Object(o.useState)(0),t=Object(d.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return e+1}))}}();window.updateCall=function(){c()},Object(o.useEffect)((function(){if(e){var t=["participant-joined","participant-updated","participant-left"];i();for(var n=0,o=t;n<o.length;n++){var a=o[n];e.on(a,i)}return function(){var n,o=Object(u.a)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;e.off(a,i)}}catch(r){o.e(r)}finally{o.f()}}}function i(t){if(t&&y(t),r({type:"PARTICIPANTS_CHANGE",participants:e.participants()}),t&&"participant-updated"!=t.action){A(e),console.log("setting subscriptions because: "+t.action);var n=t.participant.user_name,o=t.participant.session_id;if("participant-joined"==t.action){window.event=t;var a=setInterval((function(){if(n)console.log("*****this user is: ".concat(n)),function(e){window[e+"_SessionID"]=o,"SUPERDUPER"!=e&&(console.log("********Adding user to list: "+e),window.userList.push(e),"undefined"!==typeof window.updateAdminPanel&&window.updateAdminPanel(),"Admin"==e&&(window.adminPresent=!0))}(n),clearInterval(a);else{var t=e.participants();for(var i in t)t[i].session_id==o&&(n=t[i].user_name)}}),100)}else if("participant-left"==t.action){var i=window.userList.indexOf(n);i>-1&&window.userList.splice(i,1),-1==window.userList.indexOf("Admin")&&(window.adminPresent=!1)}console.log("Admin present: "+window.adminPresent),console.log("UserList: "+window.userList)}}}),[e]),Object(o.useEffect)((function(){if(e)return e.on("camera-error",t),function(){e.off("camera-error",t)};function t(e){y(e),r({type:"CAM_OR_MIC_ERROR",message:e&&e.errorMsg&&e.errorMsg.errorMsg||"Unknown"})}}),[e]),Object(o.useEffect)((function(){if(e)return e.on("error",t),function(){e.off("error",t)};function t(e){y(e),r({type:"FATAL_ERROR",message:e&&e.errorMsg||"Unknown"})}}),[e]),Object(o.useEffect)((function(){var e=setTimeout((function(){r({type:"CLICK_ALLOW_TIMEOUT"})}),2500);return function(){clearTimeout(e)}}),[]);var s=window.currentSubs&&window.currentSubs.filter((function(e){return-1===e.indexOf("_AUDIO")})).filter((function(e){return-1===e.indexOf("_AUDIO")})).filter((function(e){return-1===e.indexOf(window.myName)})).length;Object(o.useEffect)((function(){window.numberOfSubs=s}),[s]);var l=function(){var e=[],t=[];return Object.entries(i.callItems).forEach((function(n){var o=Object(d.a)(n,2),r=o[0],c=o[1],l=E(r)||!h(r)&&!O(i.callItems)||h(r)&&s&&s>1&&!O(i.callItems),u=a.a.createElement(m,{key:r,videoTrackState:c.videoTrackState,audioTrackState:c.audioTrackState,isLocalPerson:h(r),isAudioOnly:function(){if(c.audioTrackState&&c.videoTrackState)return c.audioTrackState.subscribed&&!c.videoTrackState.subscribed}(),isLarge:l,disableCornerMessage:E(r),isScreenShare:E(r)});l?e.push(u):t.push(u)})),[e,t]}(),w=Object(d.a)(l,2),b=w[0],S=w[1];Object(o.useEffect)((function(){console.log("re-rendered"),window.largeTiles=b,window.smallTales=S,window.add=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=0;n<t;n++)e.addFakeParticipant()}})),Object(o.useEffect)((function(){window.callState=i}),[i]);var k=function(e){var t=null,n=null,o=!1;return e.fatalError?(t="Fatal error: ".concat(e.fatalError),o=!0):e.camOrMicError?(t="Error: This page can't access your camera or mic.",n="To troubleshoot in Chrome: To the right in your address bar, click the picture of the camera and select 'Always allow.' Hit enter and then refresh this page.",o=!0):!function(){var t=e.callItems.local;return!(t&&!t.isLoading)&&e.clickAllowTimeoutFired}()?1===Object.keys(e.callItems).length&&(t="You're here! \ud83d\udc4b ",n="Waiting for everyone else..."):t='Click "Allow" to enable camera and mic access',t||n?{header:t,detail:n,isError:o}:null}(i);return a.a.createElement("div",{className:"call"},a.a.createElement("div",{className:"large-tiles count-".concat(O(i.callItems)?"1":s&&s+1)},k?null:b),a.a.createElement("div",{className:"small-tiles"},S),k&&a.a.createElement(f,{header:k.header,detail:k.detail,isError:k.isError}))}var C=n(8),j=(n(26),n(27),a.a.forwardRef((function(e,t){var n=Object(o.useContext)(p),i=a.a.createRef(),r=a.a.createRef(),c=e.type,s=e.page,l=function(t){if(t.target.value){var o=t.target.value;if("audio"==c&&"main"==s&&t.target.key.includes("audioinput")&&n.setInputDevicesAsync({audioSource:o}),"video"==c&&"main"==s&&n.setInputDevicesAsync({videoSource:o}),"audio"==c&&"intro"==s){var a=Object(d.a)(e.inputs,2),i=(a[0],a[1]),r={deviceId:{exact:o}};navigator.mediaDevices.getUserMedia({audio:r}).then((function(e){var t=e.getAudioTracks()[0];i((function(e){return[t,e[1]]}))}))}if("video"==c&&"intro"==s){var l=Object(d.a)(e.inputs,2),u=(l[0],l[1]),w={width:1280,height:720,deviceId:{exact:o}};navigator.mediaDevices.getUserMedia({video:w}).then((function(e){var t=e.getVideoTracks()[0];u((function(e){return[e[0],t]}))}))}t.target.key.includes("input")&&console.log("New input: "+t.target.text)}};return Object(o.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then((function(e){if("audio"==c&&i.current){if(i.current.hasChildNodes())return;for(var t=[],n=0;n!==e.length;++n){var o=e[n];(l=document.createElement("option")).className="item",l.value=o.deviceId,"audioinput"===o.kind&&(l.key="audioinput"+i.length+1,l.text=o.label||"Microphone "+(i.length+1),t.push(l))}window.audioOutputs=[];var a=document.createElement("option");a.label="-Select Microphone-",a.className="item-heading";document.createElement("option");i.current.appendChild(a);for(n=0;n!==t.length;++n)i.current.appendChild(t[n])}else if("video"==c&&r.current){if(r.current.hasChildNodes())return;var s=document.createElement("option");s.label="-Select Camera-",s.className="item-heading",r.current.appendChild(s);for(n=0;n!==e.length;++n){var l;o=e[n];(l=document.createElement("option")).className="item",l.value=o.deviceId,"videoinput"===o.kind&&(l.key="videooutput"+r.length+1,l.text=o.label||"Camera "+(r.length+1),r.current&&r.current.appendChild(l))}}})).catch((function(e){console.log(e.name+": "+e.message)}))})),a.a.createElement("div",{className:"dropdown-selector",ref:t},"audio"==c&&a.a.createElement("ul",{ref:i,onClick:l}),"video"==c&&a.a.createElement("ul",{ref:r,onClick:l}))})));function N(e){var t,n=Object(o.useRef)(null),i=Object(o.useState)(!1),r=Object(d.a)(i,2),c=r[0],s=r[1],l=Object(o.useState)(!1),u=Object(d.a)(l,2),w=u[0],m=u[1],p=e.onClick,f=Object(o.useState)("Your first name"),b=Object(d.a)(f,2),g=b[0],v=b[1],S=Object(o.useRef)(null),h=a.a.createRef(),E=a.a.createRef(),O=a.a.createRef(),y=a.a.createRef(),A=Object(o.useState)(null),k=Object(d.a)(A,2),N=k[0],x=k[1],T=Object(o.useState)(!0),R=Object(d.a)(T,2),P=R[0],I=R[1];Object(o.useEffect)((function(){return document.addEventListener("mousedown",L),function(){document.removeEventListener("mousedown",L)}}));var L=function(e){console.log("handling click"),!E.current||E.current.contains(e.target)||h.current.contains(e.target)?!y.current||y.current.contains(e.target)||O.current.contains(e.target)||m(!1):s(!1)};return Object(o.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1280,height:720}}).then((function(e){if(e){window.mediaStream=e;var t=e.getAudioTracks()[0],n=e.getVideoTracks()[0];x([t,n]),window.localAudio=t,I(!0)}else I(!1)})).catch((function(e){console.log("You got an error:"+e),I(!1)}))}),[]),Object(o.useEffect)((function(){N&&S.current&&(S.current.srcObject=new MediaStream(N)),S.current.muted=!0,window.initialInputs=N}),[N]),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"start-screen-background"}),a.a.createElement("div",{className:"instructions"},a.a.createElement("div",{className:"fixed-width"},a.a.createElement("h2",null,"Welcome to SecondBody."),a.a.createElement("div",{style:{position:"relative",marginLeft:"180px",marginRight:"180px",padding:"20px",paddingTop:"40px",border:"4px solid whitesmoke",backgroundColor:"white"}},a.a.createElement("div",{style:{background:"white",opacity:"1",zIndex:"1000"}},P?a.a.createElement("video",{className:"lobby-video",autoPlay:!0,ref:S}):a.a.createElement("p",{style:{height:"198px",width:"352px",borderRadius:"20px",background:"black",margin:"auto",color:"white",fontWeight:"bolder",boxSizing:"border-box",padding:"24px",border:"2px yellow solid"}},"\u274c Your camera / mic is blocked \u274c",a.a.createElement("br",null),a.a.createElement("br",null),"Please give this site access to your camera and mic, and then ",a.a.createElement("u",{style:{cursor:"pointer"},onClick:function(){window.location.reload()}},"refresh the page."),a.a.createElement("br",null),a.a.createElement("br",null),"How?",a.a.createElement("br",null),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("a",{target:"_blank",href:"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?"},"Option 1")),a.a.createElement("li",null,a.a.createElement("a",{href:"https://youtu.be/GceAjizU5WU?t=39",target:"_blank"},"Option 2")))),S.current&&P&&a.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"center",bottom:"40px",width:"250px",height:"0px",margin:"auto"}},a.a.createElement("div",null,a.a.createElement("p",{className:"selector-button",onClick:function(){m(!w)},ref:O},"Select Camera ^"),w?a.a.createElement("div",{onClick:function(){return m(!1)},style:{position:"relative",bottom:"0px",left:"80px"}},a.a.createElement(j,{type:"video",page:"intro",inputs:[N,x],ref:y})):null),a.a.createElement("div",{style:{width:"15px"}}),a.a.createElement("div",null,a.a.createElement("p",{className:"selector-button",onClick:function(){s(!c)},ref:h},"Select Mic ^"),c?a.a.createElement("div",{onClick:function(){return s(!1)},style:{position:"relative",bottom:"0px",left:"72px",overflowY:"visible"}},a.a.createElement(j,{type:"audio",page:"intro",ref:E,inputs:[N,x]})):null))),P&&a.a.createElement("h4",{className:"signin"},a.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},a.a.createElement("input",{type:"text",autoComplete:"off",style:{backgroundColor:"rgb(230, 240, 249)",fontSize:"15px",width:"200px",height:"30px",textAlign:"center",fontFamily:"poppins"},ref:n,value:g,onFocus:function(){"Your first name"===g&&v("")},onChange:function(e){return t=e.target.value,v(t),void(window.userID=g);var t}}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("input",(t={className:"new-card",style:{width:"150px",color:"#1b8bc4",fontSize:"17px"},type:"submit"},Object(C.a)(t,"type","submit"),Object(C.a)(t,"value","Enter session"),Object(C.a)(t,"onClick",(function(){console.log("setting user ID as "+g),""===g||"Your first name"===g||g.length<=1?alert("Please enter your name to help your partner identify you."):(console.log("***GOT HERE***"),window.myName=g,p())})),t))),a.a.createElement("br",null))))))}function x(){return(x=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{url:"https://secondbody.daily.co/react-test-room"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T={createRoom:function(){return x.apply(this,arguments)}};n(28),n(29),n(30);function R(e){function t(){return e.highlighted?"#fb5554":"#000000"}return a.a.createElement("svg",{width:"28px",height:"28px",viewBox:"0 0 24 24",className:e.className,xmlns:"http://www.w3.org/2000/svg"},function(){switch(e.type){case"camera":return a.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.a.createElement("g",{id:"Assets-for-Export",transform:"translate(-24.000000, 0.000000)",fill:t()},a.a.createElement("g",{id:"Icon-Camera-Off-24px",transform:"translate(24.000000, 0.000000)"},a.a.createElement("path",{d:"M13.7573593,6 L4.00585866,6 C2.89706013,6 2,6.8992496 2,8.0085302 L2,15.9914698 C2,16.4835828 2.17760958,16.9352259 2.47229113,17.2850682 L13.7573593,6 Z M16,12.2426407 L16,15.9914698 C16,17.1007504 15.1029399,18 13.9941413,18 L10.2426407,18 L16,12.2426407 Z M16,12.2426407 L16,14.499966 L21.0756492,16.6148096 C21.586154,16.8275189 22,16.5442917 22,16.0045612 L22,7.99539512 C22,7.44565489 21.5875957,7.17183667 21.0756492,7.38514669 L20.7016702,7.54097052 L16,12.2426407 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z",id:"Combined-Shape"}))));case"mute-mic":return a.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.a.createElement("g",{id:"Assets-for-Export",transform:"translate(-120.000000, 0.000000)",fill:t()},a.a.createElement("g",{id:"Icon-Microphone-Off-24px",transform:"translate(120.000000, 0.000000)"},a.a.createElement("path",{d:"M15.8931049,12.3495358 L15.8883757,12.354265 C15.7702192,12.7237203 15.5976472,13.0928313 15.3634551,13.4334743 C14.9080287,14.0959127 14.281481,14.5761112 13.4232304,14.8194102 L11,17.2426407 L11,18.9906311 C11,18.9937578 11.0000137,18.9968808 11.0000409,19 L9.99077797,19 C9.45097518,19 9,19.4477153 9,20 C9,20.5561352 9.44358641,21 9.99077797,21 L14.009222,21 C14.5490248,21 15,20.5522847 15,20 C15,19.4438648 14.5564136,19 14.009222,19 L12.9999626,19 C12.999986,18.9968804 13,18.9937574 13,18.9906311 L13,16.9383953 C14.793746,16.7093537 16.1268712,15.8533183 17.0115375,14.566531 C17.631941,13.6641258 17.9116422,12.769082 17.9922726,12.124039 C18.0567667,11.6080864 17.715976,11.1348845 17.2185349,11.0241058 L17.2162194,11.0264213 C17.1758852,11.0160463 17.1430789,11.0101085 17.12403,11.0077274 C16.5760096,10.9392248 16.076219,11.3279514 16.0077165,11.8759725 C15.9990827,11.9450424 15.9659776,12.1062504 15.8970768,12.3267333 C15.8944966,12.3349898 15.8931939,12.3425837 15.8931049,12.3495358 Z M14.8100942,4.94726512 C14.3837386,3.80970165 13.2864273,3 12,3 C10.3431458,3 9,4.34314575 9,6 L9,10.7573593 L14.8100942,4.94726512 Z M7.97590142,11.7814579 C7.86511978,11.2840207 7.39191988,10.9432336 6.87596978,11.0077274 C6.32795032,11.0762298 5.93922497,11.5760196 6.0077274,12.124039 C6.05291889,12.4855709 6.16064541,12.9256367 6.35584336,13.401516 L7.97590142,11.7814579 Z M20.4877316,2.09805481 C20.8769027,1.70888376 21.506248,1.70725811 21.8994949,2.10050506 C22.2900192,2.49102936 22.2956069,3.1186067 21.9019452,3.51226838 L3.51226838,21.9019452 C3.12309732,22.2911162 2.49375202,22.2927419 2.10050506,21.8994949 C1.70998077,21.5089706 1.70439313,20.8813933 2.09805481,20.4877316 L20.4877316,2.09805481 Z",id:"Combined-Shape"}))));case"screen":return a.a.createElement("path",{fill:t(),fillRule:"evenodd",d:"M2 5.006C2 3.898 2.898 3 3.99 3h16.02C21.108 3 22 3.897 22 5.006v9.988A2.003 2.003 0 0 1 20.01 17H3.99C2.892 17 2 16.103 2 14.994V5.006zm2 .99v8.009c0 .54.448.995 1 .995h14c.555 0 1-.446 1-.995v-8.01c0-.54-.448-.995-1-.995H5c-.555 0-1 .446-1 .995zM7 20c0-.552.456-1 .995-1h8.01c.55 0 .995.444.995 1 0 .552-.456 1-.995 1h-8.01A.995.995 0 0 1 7 20z"});case"leave":return a.a.createElement("path",{d:"M19.347 11l-1.71-1.638a.832.832 0 0 1 0-1.222l.03-.03a.922.922 0 0 1 1.27-.003l3.34 3.2a.95.95 0 0 1 0 1.386l-3.34 3.2a.918.918 0 0 1-1.27-.003l-.03-.03a.842.842 0 0 1 0-1.221L19.348 13h-7.352A.995.995 0 0 1 11 12c0-.552.456-1 .995-1h7.352zM16 10h-2V7.995c0-.54-.446-.995-.997-.995H6.997A1 1 0 0 0 6 7.995v8.01c0 .54.446.995.997.995h6.006a1 1 0 0 0 .997-.995V14h2v2.994A2.009 2.009 0 0 1 13.991 19H6.01A2.007 2.007 0 0 1 4 16.994V7.006C4 5.898 4.902 5 6.009 5h7.982C15.101 5 16 5.897 16 7.006V10z",fill:t(),fillRule:"evenodd"});case"chat":return a.a.createElement("path",{d:"M8.984 17.522c.93.308 1.949.478 3.016.478 4.418 0 8-2.91 8-6.5S16.418 5 12 5s-8 2.91-8 6.5c0 1.65.756 3.156 2.003 4.302a8.751 8.751 0 0 1-.71 2.187c-.317.606-.457 1.011 0 1.011 1.727 0 1.99-1.236 3.691-1.478z",fill:t(),fillRule:"evenodd"});default:throw new Error}}())}function P(e){return a.a.createElement("button",{disabled:e.disabled,onClick:e.onClick,className:"tray-button"+(e.newButtonGroup?" new-group":"")},a.a.createElement(R,{type:e.type,highlighted:e.highlighted}))}var I=n(13);n(31);function L(e){var t=Object(o.useContext)(p),n=Object(o.useState)(""),i=Object(d.a)(n,2),r=i[0],c=i[1],s=Object(o.useState)([]),l=Object(d.a)(s,2),u=l[0],w=l[1];return Object(o.useEffect)((function(){if(t)return t.on("app-message",n),function(){t.off("app-message",n)};function n(n){var o=t.participants(),a=o[n.fromId].user_name?o[n.fromId].user_name:"Guest";"chat"==n.data.type&&w([].concat(Object(I.a)(u),[{sender:a,message:n.data.message}])),"chat"==n.data.type&&e.notification()}}),[t,u]),Object(o.useEffect)((function(){}),[u]),e.onClickDisplay?a.a.createElement("div",{className:"chat"},u.map((function(e,t){return a.a.createElement("div",{key:"entry-".concat(t),className:"messageList"},a.a.createElement("b",null,e.sender),": ",e.message)})),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.sendAppMessage({type:"chat",message:r},"*");var n=t.participants().local.user_name?t.participants().local.user_name:"Guest";w([].concat(Object(I.a)(u),[{sender:n,message:r}])),c("")}},a.a.createElement("label",{htmlFor:"chatInput"}),a.a.createElement("input",{id:"chatInput",className:"chat-input",type:"text",placeholder:"Type your message here..",value:r,onChange:function(e){c(e.target.value)}}),a.a.createElement("button",{type:"submit",className:"send-chat-button"},"Send"))):null}var M=a.a.createContext();n(32);function _(e,t){if(window.audio.src={monologue1:"https://storage.googleapis.com/secondbodyuploads/What%20Makes%20CEB%20Different%20(Mono).mp3",monologue2:"https://storage.googleapis.com/secondbodyuploads/PAGA%20Claims%20(mono).mp3",monologue3:"https://storage.googleapis.com/secondbodyuploads/AudioEngineer.mp3",monologue4:"https://storage.googleapis.com/secondbodyuploads/IBM%20Garage.mp3",monologue5:"",monologue6:"",dialogue1:"https://storage.googleapis.com/secondbodyuploads/EthicsA%20(dialogue).mp3",dialogue1B:"https://storage.googleapis.com/secondbodyuploads/EthicsB%20(dialogue).mp3",dialogue2:"https://storage.googleapis.com/secondbodyuploads/CoursePass(A)%20(dialogue).mp3",dialogue2B:"https://storage.googleapis.com/secondbodyuploads/CoursePass(B)%20(dialogue).mp3",dialogue3:"",dialogue3B:"",dialogue4:"",dialogue4B:"",dialogue5:"",dialogue5B:"",dialogue6:"",dialogue6B:""}[e],console.log("going to ".concat(t," ").concat(e)),window.audio[t](),"pause"!=t){"undefined"==typeof window.audioCtx&&(window.audioCtx=new(window.AudioContext||window.webkitAudioContext)),window.audioSourceNode=window.audioSourceNode||window.audioCtx.createMediaElementSource(window.audio);var n=window.audioCtx.createGain();n.gain.value=1;var o=window.audioCtx.createStereoPanner();o.pan.value=1,window.audioSourceNode.connect(n).connect(o).connect(window.audioCtx.destination)}else window.audioSourceNode.disconnect()}function D(e){var t=Object(o.useContext)(p),n=(Object(o.useContext)(M),Object(o.useState)(!1)),i=Object(d.a)(n,2),r=(i[0],i[1]),c=Object(o.useState)(!1),s=Object(d.a)(c,2),l=(s[0],s[1]),w=Object(o.useState)(!1),m=Object(d.a)(w,2),f=(m[0],m[1]),b=Object(o.useState)(!1),g=Object(d.a)(b,2),v=(g[0],g[1],Object(o.useState)(!1)),S=Object(d.a)(v,2),h=(S[0],S[1],function(){A(t)}),E=function(){var e=Object(o.useState)(0),t=Object(d.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return e+1}))}}();window.updateAdminPanel=E;var O=Object(o.useState)("Play practice audio"),k=Object(d.a)(O,2),C=k[0],j=k[1],N=Object(o.useState)("monologue1"),x=Object(d.a)(N,2),T=x[0],R=x[1];Object(o.useEffect)((function(){if(t){for(var e=["participant-joined","participant-left","joined-meeting"],n=0,o=e;n<o.length;n++){var a=o[n];t.on(a,(function(){return setTimeout((function(){return E()}),100)}))}return function(){var n,o=Object(u.a)(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;t.off(a,(function(){return setTimeout((function(){return E()}),100)}))}}catch(i){o.e(i)}finally{o.f()}}}}),[t]);var P=function(){console.log("Sending current state..."),t.sendAppMessage(window.sessionState,"*")};Object(o.useEffect)((function(){window.sendState=P}),[P]);var I=function(e){window.sessionState.roleOf[e.target.id]=e.target.value,console.log(e.target.id+" is now: "+window.sessionState.roleOf[e.target.id]),P();var t="Attendee";for(var n in window.sessionState.roleOf)window.sessionState.roleOf[n]==window.myName&&(t=n);t!=window.myRole&&(window.myRole=t,window.myRole.includes("1")?window.myNumber=1:window.myRole.includes("2")&&(window.myNumber=2)),window.sessionState.isActive,h()};return Object(o.useEffect)((function(){if(t)return e(),t.on("participant-updated",e),function(){t.off("participant-updated",e)};function e(e){e&&y(e);var n=function(e){var t,n,o=!1;if(e&&e.participants()&&e.participants().local){var a=e.participants().local;t=!a.video,n=!a.audio,o=a.screen}return[t,n,o]}(t),o=Object(d.a)(n,3),a=o[0],i=o[1],c=o[2];r(a),l(i),f(c)}}),[t]),a.a.createElement("div",{className:"admin-panel",style:{position:"relative",margin:"auto",width:"100%",height:"80px"}},a.a.createElement("div",{style:{position:"absolute",left:"50px",top:"12px",textAlign:"center",flexDirection:"column",justifyContent:"flex-end"}},a.a.createElement("span",{style:{bottom:"0px",color:"green",fontSize:"16px",fontFamily:"Verdana, Geneva, Tahoma, sans-serif"}},a.a.createElement("button",{onClick:function(){var e=window.sessionState.roleOf.Actor1&&window[window.sessionState.roleOf.Actor1+"_SessionID"],n=window.sessionState.roleOf.Actor2&&window[window.sessionState.roleOf.Actor2+"_SessionID"];if(window.sessionState.roleOf.Actor1==window.myName&&(e="me"),window.sessionState.roleOf.Actor2==window.myName&&(n="me"),e||n){var o=window.audioIsPlaying?"pause":"play",a={type:"instructions",target:T,action:o,recipient:e},i={type:"instructions",target:T+"B",action:o,recipient:n};e&&("me"!=e?t.sendAppMessage(a,e):"me"==e&&_(T,o),console.log("Sent ".concat(o," request to ").concat(window.sessionState.roleOf.Actor1))),n&&("me"!=n?t.sendAppMessage(i,n):"me"==n&&_(T+"B",o),console.log("Sent ".concat(o," request to ").concat(window.sessionState.roleOf.Actor2))),window.audioIsPlaying=!window.audioIsPlaying,j(window.audioIsPlaying?"Pause practice audio":"Play practice audio")}},id:"play-pause"},C)),a.a.createElement("div",{style:{height:"30px"}},a.a.createElement("form",{action:""},a.a.createElement("fieldset",{style:{border:"none"}},a.a.createElement("select",{id:"practice-audio",onChange:function(e){R(e.target.value),console.log("***CHANGED TO "+e.target.value)},style:{outline:"none",borderRadius:"20px",height:"20px",width:"130px",cursor:"pointer",backgroundColor:"green",color:"white"}},a.a.createElement("option",{value:"monologue1"},"What makes CEB different (mono)"),a.a.createElement("option",{value:"monologue2"},"Searching for PAGA Claims (mono)"),a.a.createElement("option",{value:"monologue3"},"Audio Engineer (mono)"),a.a.createElement("option",{value:"monologue4"},"IBM Garage (mono)"),a.a.createElement("option",{value:"dialogue1"},"Ethics (dialogue)"),a.a.createElement("option",{value:"dialogue2"},"CoursePass (dialogue)")))))),a.a.createElement("div",{id:"role-assignments",class:"role-assignments",style:{}},a.a.createElement("div",{className:"column"},a.a.createElement("div",{className:"RoleName-and-Dropdown"},a.a.createElement("div",{className:"RoleName"},a.a.createElement("p",null,"Person A:")),a.a.createElement("div",{className:"dropdown"},a.a.createElement("p",null,a.a.createElement("form",null,a.a.createElement("select",{className:"selector",id:"Participant1",onChange:I},a.a.createElement("option",{value:null}),window.userList&&window.userList.length>0&&window.userList.map((function(e){return a.a.createElement("option",{value:e},e)}))))))),a.a.createElement("div",{className:"RoleName-and-Dropdown"},a.a.createElement("div",{className:"RoleName"},a.a.createElement("p",null,"Actor A:")),a.a.createElement("div",{className:"dropdown"},a.a.createElement("p",null,a.a.createElement("form",null,a.a.createElement("select",{className:"selector",id:"Actor1",onChange:I},a.a.createElement("option",{value:null}),window.userList&&window.userList.length>0&&window.userList.map((function(e){return a.a.createElement("option",{value:e},e)})))))))),a.a.createElement("div",{className:"column"},a.a.createElement("div",{className:"RoleName-and-Dropdown"},a.a.createElement("div",{className:"RoleName"},a.a.createElement("p",null,"Person B:")),a.a.createElement("div",{className:"dropdown"},a.a.createElement("p",null,a.a.createElement("form",null,a.a.createElement("select",{className:"selector",id:"Participant2",onChange:I},a.a.createElement("option",{value:null}),window.userList&&window.userList.length>0&&window.userList.map((function(e){return a.a.createElement("option",{value:e},e)}))))))),a.a.createElement("div",{className:"RoleName-and-Dropdown"},a.a.createElement("div",{className:"RoleName"},a.a.createElement("p",null,"Actor B:")),a.a.createElement("div",{className:"dropdown"},a.a.createElement("p",null,a.a.createElement("form",null,a.a.createElement("select",{className:"selector",id:"Actor2",onChange:I},a.a.createElement("option",{value:null}),window.userList&&window.userList.length>0&&window.userList.map((function(e){return a.a.createElement("option",{value:e},e)}))))))))),a.a.createElement("div",{style:{textAlign:"center",width:"100px",position:"absolute",right:"70px",bottom:"0px"}},a.a.createElement("label",{class:"switch",style:{position:"relative",left:"30px",height:"30px",width:"60px",bottom:"-13px",cursor:"pointer"}},a.a.createElement("input",{type:"checkbox",id:"state",onChange:function(){window.sessionState.isActive=!window.sessionState.isActive,P(),!window.sessionState.isActive||window.myRole.includes("Actor")||window.myRole.includes("Participant")?h():A(t,"Room1")}}),a.a.createElement("span",{class:"slider round"})),a.a.createElement("p",{style:{position:"relative",left:"30px",bottom:"0px"}},"Session active")))}var B=n(7);function U(e){var t=Object(o.useContext)(p),n=Object(o.useState)(!1),i=Object(d.a)(n,2),r=i[0],c=i[1],s=Object(o.useState)(!1),l=Object(d.a)(s,2),u=l[0],w=l[1],m=Object(o.useState)(!1),f=Object(d.a)(m,2),b=f[0],g=f[1],v=Object(o.useState)(!1),S=Object(d.a)(v,2),h=S[0],E=S[1],O=Object(o.useState)(!1),A=Object(d.a)(O,2),k=A[0],C=A[1],N=function(){var e=Object(o.useState)(0),t=Object(d.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return e+1}))}}(),x=a.a.createRef(),T=a.a.createRef(),R=a.a.createRef(),I=a.a.createRef();window.updateTray=function(){N()};var M=Object(o.useState)(!1),_=Object(d.a)(M,2),U=_[0],V=_[1],G=Object(o.useState)(!1),W=Object(d.a)(G,2),F=W[0],z=W[1];Object(o.useEffect)((function(){return document.addEventListener("mousedown",H),function(){document.removeEventListener("mousedown",H)}}));var H=function(e){console.log("handling click"),!T.current||T.current.contains(e.target)||x.current.contains(e.target)?!I.current||I.current.contains(e.target)||R.current.contains(e.target)||z(!1):V(!1)};return Object(o.useEffect)((function(){if(t)return e(),t.on("participant-updated",e),function(){t.off("participant-updated",e)};function e(e){e&&y(e);var n=function(e){var t,n,o=!1;if(e&&e.participants()&&e.participants().local){var a=e.participants().local;t=!a.video,n=!a.audio,o=a.screen}return[t,n,o]}(t),o=Object(d.a)(n,3),a=o[0],i=o[1],r=o[2];c(a),w(i),g(r)}}),[t]),a.a.createElement("div",{className:"tray"},a.a.createElement(P,{type:"camera",highlighted:r,onClick:function(){t.setLocalVideo(r)}}),a.a.createElement("div",{onClick:function(){z(!F)},style:{position:"absolute",left:"55px",bottom:"23px"}},a.a.createElement("p",{className:"caret",ref:R},"^"),F?a.a.createElement(j,{type:"video",page:"main",ref:I}):null),a.a.createElement(P,{type:"mute-mic",highlighted:u,onClick:function(){t.setLocalAudio(u)}}),a.a.createElement("div",{onClick:function(){V(!U)},style:{position:"absolute",left:"125px",bottom:"23px"}},a.a.createElement("p",{className:"caret",ref:x},"^"),U?a.a.createElement(j,{type:"audio",page:"main",ref:T}):null),B.a.supportedBrowser().supportsScreenShare&&window.amAdmin&&a.a.createElement(P,{type:"screen",highlighted:b,onClick:function(){window.open("http://"+window.location.host+"/share","test","width=300, height=300")}}),a.a.createElement(P,{type:"chat",highlighted:k,onClick:function(){E(!h),k&&C(!k)}}),a.a.createElement(L,{onClickDisplay:h,notification:function(){C(!k)}}),window.amAdmin&&a.a.createElement(D,null),window.sessionState&&window.sessionState.isActive&&("Attendee"==window.myRole||"Admin"==window.myRole)&&a.a.createElement("div",{style:{zIndex:"999",height:"80px",bottom:"10px",overflow:"hidden",visibility:"visible",flexGrow:"1",textAlign:"center",position:"absolute",left:"50%",transform:"translateX(-50%)"},id:"my-view"},a.a.createElement("form",{action:""},a.a.createElement("fieldset",{style:{border:"none"}},a.a.createElement("select",{id:"view-mode",onChange:function(e){return window.setViewMode(e.target.value)},style:{outline:"none",position:"relative",borderRadius:"20px",height:"30px",width:"100px",bottom:"-22px",cursor:"pointer",backgroundColor:"#2196F3",color:"white"}},a.a.createElement("option",{value:"Room1"},"Room1"),a.a.createElement("option",{value:"Room2"},"Room2"),a.a.createElement("option",{value:"All"},"All")))),a.a.createElement("p",{style:{position:"relative",bottom:"3px"}},"My view")),a.a.createElement(P,{type:"leave",disabled:e.disabled,newButtonGroup:!0,highlighted:!0,onClick:function(){e.onClickLeaveCall&&e.onClickLeaveCall()}}))}a.a.createContext();function V(e){return window.location.href.split("?")[0]+(e?"?roomUrl=".concat(encodeURIComponent(e)):"")}var G="STATE_JOINING",W="STATE_JOINED",F="STATE_ERROR";function z(){var e=Object(o.useState)("STATE_IDLE"),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)(null),c=Object(d.a)(r,2),w=c[0],m=c[1],f=Object(o.useState)(null),b=Object(d.a)(f,2),g=b[0],v=b[1];window.pass.includes(window.myP)||(window.location.href="http://secondbody.co"),window.setViewMode=function(e){e&&console.log("Changing view mode to: "+e),A(g,e)};var S=Object(o.useCallback)((function(){return i("STATE_CREATING"),T.createRoom().then((function(e){return e.url})).catch((function(e){console.log("Error creating room",e),m(null),i("STATE_IDLE")}))}),[]),h=Object(o.useCallback)((function(e){var t=B.a.createCallObject({subscribeToTracksAutomatically:!1});m(e),v(t),i(G),window.initialInputs?(console.log("initial audio: "+window.initialInputs[0]+". Initial video: "+window.initialInputs[1]),t.join({userName:window.myName,url:e,audioSource:window.initialInputs[0],videoSource:window.initialInputs[1]})):navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(n){if(n){var o=n.getAudioTracks(),a=n.getVideoTracks();o&&o.length>0&&a&&a.length>0&&t.join({userName:window.myName,url:e,audioSource:o[0],videoSource:a[0]})}})),console.log("joining the call as "+window.myName);V(w),window.myName,window.myRole}),[]),E=Object(o.useCallback)((function(){g&&(n===F?g.destroy().then((function(){m(null),v(null),i("STATE_IDLE"),window.initialize()})):(i("STATE_LEAVING"),g.leave(),window.initialize()))}),[g,n]);Object(o.useEffect)((function(){var e=function(){var e=window.location.search.match(/roomUrl=([^&]+)/i);return e&&e[1]?decodeURIComponent(e[1]):null}();e&&window.initialInputs&&h(e)}),[h]),Object(o.useEffect)((function(){var e=V(w);window.pageUrl=e,window.myName&&(e.indexOf("?")>-1?e+="&N="+window.myName:e+="?N="+window.myName),window.myRole&&(e.indexOf("?")>-1?e+="&R="+window.myRole:e+="?R="+window.myRole),window.myP&&(e.indexOf("?")>-1?e+="&P="+window.myP:e+="?P="+window.myP),e!==window.location.href&&window.history.replaceState(null,null,e)}),[w]),Object(o.useEffect)((function(){window.callObject=g}),[g]),Object(o.useEffect)((function(){if(g){var e=["joined-meeting","left-meeting","error"];a();for(var t=0,n=e;t<n.length;t++){var o=n[t];g.on(o,a)}return function(){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;g.off(o,a)}}catch(i){n.e(i)}finally{n.f()}}}function a(e){switch(e&&y(e),g.meetingState()){case"joined-meeting":i(W),g.setNetworkTopology({topology:"sfu"}),window.userList.push(window.myName),""==window.myName&&g.leave(),"Admin"==window.myRole?window.sessionState.isKnown=!0:(window.sessionState.isKnown=!1,window.stateRequest=setInterval((function(){1!=window.sessionState.isKnown?(g.sendAppMessage("State please?","*"),console.log("Requesting meeting state...")):clearInterval(window.stateRequest)}),2500));break;case"left-meeting":g.destroy().then((function(){m(null),v(null),i("STATE_IDLE"),clearInterval(window.stateRequest),window.initialize()}));break;case"error":i(F)}}}),[g]),Object(o.useEffect)((function(){if(g)return g.on("app-message",e),function(){g.off("app-message",e)};function e(e){if(e){y(e),console.log("received app message from ".concat(e.fromId,": "),e.data);g.participants();if(e.data.constructor===Object&&"sessionState"==e.data.type){var t=window.sessionState;window.sessionState=e.data;var n=!1;if(window.sessionState.roleOf!=t.roleOf){var o="Attendee";for(var a in window.sessionState.roleOf)window.sessionState.roleOf[a]==window.myName&&(o=a);o!=window.myRole&&(window.myRole=o,window.myRole.includes("1")?window.myNumber=1:window.myRole.includes("2")&&(window.myNumber=2)),window.sessionState.isActive&&i(),n=!0}t.isActive===window.sessionState.isActive&&t.AdminVisible===window.sessionState.AdminVisible||(n=!0),n&&(!t.isActive&&window.sessionState.isActive&&"Attendee"==window.myRole||"Admin"==window.myRole?A(g,"Room1"):A(g)),0==t.isActive&&1==window.sessionState.isActive?(i(),"Attendee"==window.myRole||window.myRole):1==t.isActive&&0==window.sessionState.isActive&&(!function(){c.apply(this,arguments)}(),window.setViewMode(null))}else e.data.constructor===Object&&"instructions"==e.data.type&&e.data.recipient==g.participants().local.session_id?_(e.data.target,e.data.action):"State please?"==e.data&&window.amAdmin&&function(e,t){console.log("Sending current state..."),t.sendAppMessage(e,"*")}(window.sessionState,g)}function i(){return r.apply(this,arguments)}function r(){return(r=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=window.myRole,e.next="Attendee"===e.t0?3:"Participant1"===e.t0||"Participant2"===e.t0?6:"Actor1"===e.t0||"Actor2"===e.t0||"Room3A"===e.t0||"Room3B"===e.t0||"Room4A"===e.t0||"Room4B"===e.t0||"Room5A"===e.t0||"Room5B"===e.t0?7:8;break;case 3:return window.camWasOn=g.localVideo(),window.camWasOn,e.abrupt("break",9);case 6:case 7:case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}),[g]);var O=[G,W,F].includes(n),C=[W,F].includes(n);return a.a.createElement("div",{className:"app"},O?a.a.createElement(p.Provider,{value:g},a.a.createElement(k,{roomUrl:w}),a.a.createElement(U,{disabled:!C,onClickLeaveCall:E})):a.a.createElement(N,{onClick:function(){S().then((function(e){return h(e)}))}}))}n(34);function H(){return a.a.createElement("p",{class:"browser-unsupported"},"Looks like you need to upgrade your browser to make Daily video calls.",a.a.createElement("br",null),"See\xa0",a.a.createElement("a",{href:"https://docs.daily.co/docs/browsers"},"this page"),"\xa0for help getting on a supported browser version.")}r.a.render(B.a.supportedBrowser().supported?a.a.createElement(z,null):a.a.createElement(H,null),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.9fcef54f.chunk.js.map