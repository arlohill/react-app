{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/arlosb/Documents/GitHub/new react app/test1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/arlosb/Documents/GitHub/new react app/test1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import CallObjectContext from'../../CallObjectContext';import NameContext from'../../NameContext';import{logDailyEvent}from'../../logUtils';import'./AdminPanel.css';import setSubscriptions from'../../hooks/setSubscriptions';import audioPlayer from'../../hooks/AudioPlayer';// import { sendState } from '../AdminPanel/AdminFunctions'\n// import SessionContext from '../../SessionContext';\nfunction useForceUpdate(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];// integer state\nreturn function(){return setValue(function(value){return value+1;});};// update the state to force render\n}/**\n * Gets [isCameraMuted, isMicMuted, isSharingScreen].\n * This function is declared outside Tray() so it's not recreated every render\n * (which would require us to declare it as a useEffect dependency).\n */function getStreamStates(callObject){var isCameraMuted,isMicMuted,isSharingScreen=false;if(callObject&&callObject.participants()&&callObject.participants().local){var localParticipant=callObject.participants().local;isCameraMuted=!localParticipant.video;isMicMuted=!localParticipant.audio;isSharingScreen=localParticipant.screen;}return[isCameraMuted,isMicMuted,isSharingScreen];}/**\n * Props:\n * - onClickLeaveCall: () => ()\n * - disabled: boolean\n */export default function AdminPanel(props){var callObject=useContext(CallObjectContext);// const [sessionState, setSessionState ] = useContext(SessionContext);\nvar myName=useContext(NameContext);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isCameraMuted=_useState4[0],setCameraMuted=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isMicMuted=_useState6[0],setMicMuted=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isSharingScreen=_useState8[0],setSharingScreen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),displayChat=_useState10[0],setChatDisplay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),highlightedChat=_useState12[0],setChatHighlight=_useState12[1];var setSubs=function setSubs(){setSubscriptions(callObject);};var forceUpdate=useForceUpdate();var _useState13=useState('Play practice audio'),_useState14=_slicedToArray(_useState13,2),playButtonText=_useState14[0],setPlayButtonText=_useState14[1];var _useState15=useState('monologue1'),_useState16=_slicedToArray(_useState15,2),targetRecording=_useState16[0],setTargetRecording=_useState16[1];///////HAVE TO CHANGE THIS IN TWO PLACES\nuseEffect(function(){//listen for participants leaving or joining and update component\nif(!callObject)return;var events=['participant-joined','participant-left','joined-meeting'];for(var _i=0,_events=events;_i<_events.length;_i++){var event=_events[_i];callObject.on(event,function(){return setTimeout(function(){return forceUpdate();},100);});}return function cleanup(){var _iterator=_createForOfIteratorHelper(events),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _event=_step.value;callObject.off(_event,function(){return setTimeout(function(){return forceUpdate();},100);});}}catch(err){_iterator.e(err);}finally{_iterator.f();}};},[callObject]);var sendState=function sendState(){console.log(\"Sending current state...\");callObject.sendAppMessage(window.sessionState,'*');};useEffect(function(){window.sendState=sendState;},[sendState]);function toggleSessionActive(){window.sessionState.isActive=!window.sessionState.isActive;sendState();if(window.sessionState.isActive&&!window.myRole.includes('Actor')&&!window.myRole.includes('Participant')){setSubscriptions(callObject,'Room1');}else{setSubs();}}function togglePractice(){var recipientA=window.sessionState.roleOf.Actor1&&window[window.sessionState.roleOf.Actor1+'_SessionID'];var recipientB=window.sessionState.roleOf.Actor2&&window[window.sessionState.roleOf.Actor2+'_SessionID'];if(window.sessionState.roleOf.Actor1==window.myName){recipientA='me';}if(window.sessionState.roleOf.Actor2==window.myName){recipientB='me';}if(!recipientA&&!recipientB){return;}var action=window.audioIsPlaying?'pause':'play';var instructionsA={type:'instructions',target:targetRecording,action:action,recipient:recipientA};var instructionsB={type:'instructions',target:targetRecording+'B',action:action,recipient:recipientB};if(recipientA){if(recipientA!='me'){callObject.sendAppMessage(instructionsA,recipientA);}else if(recipientA=='me'){audioPlayer(targetRecording,action);}console.log(\"Sent \".concat(action,\" request to \").concat(window.sessionState.roleOf.Actor1));}if(recipientB){if(recipientB!='me'){callObject.sendAppMessage(instructionsB,recipientB);}else if(recipientB=='me'){audioPlayer(targetRecording+'B',action);}console.log(\"Sent \".concat(action,\" request to \").concat(window.sessionState.roleOf.Actor2));}window.audioIsPlaying=!window.audioIsPlaying;setPlayButtonText(!window.audioIsPlaying?'Play practice audio':'Pause practice audio');}var handleRoleChange=function handleRoleChange(e){window.sessionState.roleOf[e.target.id]=e.target.value;console.log(e.target.id+' is now: '+window.sessionState.roleOf[e.target.id]);sendState();var myNewRole='Attendee';//default, if no role assigned\nfor(var key in window.sessionState.roleOf){if(window.sessionState.roleOf[key]==window.myName){myNewRole=key;}}if(myNewRole!=window.myRole){window.myRole=myNewRole;if(window.myRole.includes('1')){window.myNumber=1;}else if(window.myRole.includes('2')){window.myNumber=2;}}if(window.sessionState.isActive){// activateSession();  //rebuild UI for the newly assigned role, mid-session\n}setSubs();};/**\n   * Start listening for participant changes when callObject is set (i.e. when the component mounts).\n   * This event will capture any changes to your audio/video mute state.\n   */useEffect(function(){if(!callObject)return;function handleNewParticipantsState(event){event&&logDailyEvent(event);var _getStreamStates=getStreamStates(callObject),_getStreamStates2=_slicedToArray(_getStreamStates,3),isCameraMuted=_getStreamStates2[0],isMicMuted=_getStreamStates2[1],isSharingScreen=_getStreamStates2[2];setCameraMuted(isCameraMuted);setMicMuted(isMicMuted);setSharingScreen(isSharingScreen);}// Use initial state\nhandleNewParticipantsState();// Listen for changes in state\ncallObject.on('participant-updated',handleNewParticipantsState);// Stop listening for changes in state\nreturn function cleanup(){callObject.off('participant-updated',handleNewParticipantsState);};},[callObject]);/* // Play practice audio for users */return/*#__PURE__*/React.createElement(\"div\",{className:\"admin-panel\",style:{position:'relative',margin:'auto',width:'100%',height:'80px'}},/*#__PURE__*/React.createElement(\"div\",{style:{position:'absolute',left:'50px',top:'12px',textAlign:'center',flexDirection:'column',justifyContent:'flex-end'}},/*#__PURE__*/React.createElement(\"span\",{style:{bottom:'0px',color:'green',fontSize:'16px',fontFamily:'Verdana, Geneva, Tahoma, sans-serif'}},/*#__PURE__*/React.createElement(\"button\",{onClick:togglePractice,id:\"play-pause\"},playButtonText)),/*#__PURE__*/React.createElement(\"div\",{style:{height:'30px'}},/*#__PURE__*/React.createElement(\"form\",{action:\"\"},/*#__PURE__*/React.createElement(\"fieldset\",{style:{border:'none'}},/*#__PURE__*/React.createElement(\"select\",{id:\"practice-audio\",onChange:function onChange(e){setTargetRecording(e.target.value);console.log('***CHANGED TO '+e.target.value);},style:{outline:'none',borderRadius:'20px',height:'20px',width:'130px',cursor:'pointer',backgroundColor:'green',color:'white'}},/*#__PURE__*/React.createElement(\"option\",{value:\"monologue1\"},\"What makes CEB different (mono)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"monologue2\"},\"Searching for PAGA Claims (mono)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"monologue3\"},\"Audio Engineer (mono)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"dialogue1\"},\"Ethics (dialogue)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"dialogue2\"},\"CoursePass (dialogue)\")))))),/*#__PURE__*/React.createElement(\"div\",{id:\"role-assignments\",class:\"role-assignments\",style:{}},/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName-and-Dropdown\"},/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName\"},/*#__PURE__*/React.createElement(\"p\",null,\"Person A:\")),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"select\",{className:\"selector\",id:\"Participant1\",onChange:handleRoleChange},/*#__PURE__*/React.createElement(\"option\",{value:null}),window.userList&&window.userList.length>0&&window.userList.map(function(user){return/*#__PURE__*/React.createElement(\"option\",{value:user},user);})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName-and-Dropdown\"},/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName\"},/*#__PURE__*/React.createElement(\"p\",null,\"Actor A:\")),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"select\",{className:\"selector\",id:\"Actor1\",onChange:handleRoleChange},/*#__PURE__*/React.createElement(\"option\",{value:null}),window.userList&&window.userList.length>0&&window.userList.map(function(user){return/*#__PURE__*/React.createElement(\"option\",{value:user},user);}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName-and-Dropdown\"},/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName\"},/*#__PURE__*/React.createElement(\"p\",null,\"Person B:\")),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"select\",{className:\"selector\",id:\"Participant2\",onChange:handleRoleChange},/*#__PURE__*/React.createElement(\"option\",{value:null}),window.userList&&window.userList.length>0&&window.userList.map(function(user){return/*#__PURE__*/React.createElement(\"option\",{value:user},user);})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName-and-Dropdown\"},/*#__PURE__*/React.createElement(\"div\",{className:\"RoleName\"},/*#__PURE__*/React.createElement(\"p\",null,\"Actor B:\")),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"select\",{className:\"selector\",id:\"Actor2\",onChange:handleRoleChange},/*#__PURE__*/React.createElement(\"option\",{value:null}),window.userList&&window.userList.length>0&&window.userList.map(function(user){return/*#__PURE__*/React.createElement(\"option\",{value:user},user);})))))))),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center',width:'100px',position:'absolute',right:'70px',bottom:'0px'}},/*#__PURE__*/React.createElement(\"label\",{class:\"switch\",style:{position:'relative',left:'30px',height:'30px',width:'60px',bottom:'-13px',cursor:'pointer'}},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",id:\"state\",onChange:toggleSessionActive}),/*#__PURE__*/React.createElement(\"span\",{class:\"slider round\"})),/*#__PURE__*/React.createElement(\"p\",{style:{position:'relative',left:'30px',bottom:'0px'}},\"Session active\")));}","map":{"version":3,"sources":["/Users/arlosb/Documents/GitHub/new react app/test1/src/components/AdminPanel/AdminPanel.js"],"names":["React","useContext","useEffect","useState","CallObjectContext","NameContext","logDailyEvent","setSubscriptions","audioPlayer","useForceUpdate","value","setValue","getStreamStates","callObject","isCameraMuted","isMicMuted","isSharingScreen","participants","local","localParticipant","video","audio","screen","AdminPanel","props","myName","setCameraMuted","setMicMuted","setSharingScreen","displayChat","setChatDisplay","highlightedChat","setChatHighlight","setSubs","forceUpdate","playButtonText","setPlayButtonText","targetRecording","setTargetRecording","events","event","on","setTimeout","cleanup","off","sendState","console","log","sendAppMessage","window","sessionState","toggleSessionActive","isActive","myRole","includes","togglePractice","recipientA","roleOf","Actor1","recipientB","Actor2","action","audioIsPlaying","instructionsA","type","target","recipient","instructionsB","handleRoleChange","e","id","myNewRole","key","myNumber","handleNewParticipantsState","position","margin","width","height","left","top","textAlign","flexDirection","justifyContent","bottom","color","fontSize","fontFamily","border","outline","borderRadius","cursor","backgroundColor","userList","length","map","user","right"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport CallObjectContext from '../../CallObjectContext';\nimport NameContext from '../../NameContext';\nimport { logDailyEvent } from '../../logUtils';\nimport './AdminPanel.css';\nimport setSubscriptions from '../../hooks/setSubscriptions';\nimport audioPlayer from '../../hooks/AudioPlayer';\n\n// import { sendState } from '../AdminPanel/AdminFunctions'\n// import SessionContext from '../../SessionContext';\n\n\n\nfunction useForceUpdate(){\n  const [value, setValue] = useState(0); // integer state\n  return () => setValue(value => value + 1); // update the state to force render\n}\n\n\n\n/**\n * Gets [isCameraMuted, isMicMuted, isSharingScreen].\n * This function is declared outside Tray() so it's not recreated every render\n * (which would require us to declare it as a useEffect dependency).\n */\nfunction getStreamStates(callObject) {\n  let isCameraMuted,\n    isMicMuted,\n    isSharingScreen = false;\n  if (\n    callObject &&\n    callObject.participants() &&\n    callObject.participants().local\n  ) {\n    const localParticipant = callObject.participants().local;\n    isCameraMuted = !localParticipant.video;\n    isMicMuted = !localParticipant.audio;\n    isSharingScreen = localParticipant.screen;\n  }\n  return [isCameraMuted, isMicMuted, isSharingScreen];\n}\n\n\n\n/**\n * Props:\n * - onClickLeaveCall: () => ()\n * - disabled: boolean\n */\nexport default function AdminPanel(props) {\n  const callObject = useContext(CallObjectContext);\n  // const [sessionState, setSessionState ] = useContext(SessionContext);\n  const myName = useContext(NameContext);\n  const [isCameraMuted, setCameraMuted] = useState(false);\n  const [isMicMuted, setMicMuted] = useState(false);\n  const [isSharingScreen, setSharingScreen] = useState(false);\n  const [displayChat, setChatDisplay] = useState(false);\n  const [highlightedChat, setChatHighlight] = useState(false);\n  const setSubs = () => {setSubscriptions(callObject)};  \n  const forceUpdate = useForceUpdate();\n  const [playButtonText, setPlayButtonText] = useState('Play practice audio');\n  const [targetRecording, setTargetRecording] = useState('monologue1') ///////HAVE TO CHANGE THIS IN TWO PLACES\n\n  useEffect(() => {           //listen for participants leaving or joining and update component\n    if (!callObject) return;\n\n    const events = [\n      'participant-joined',\n      'participant-left',\n      'joined-meeting',\n    ];\n\n    for (const event of events) {\n      callObject.on(event, () => setTimeout(()=>forceUpdate(),100));\n    }\n\n    return function cleanup() {\n      for (const event of events) {\n        callObject.off(event, () => setTimeout(()=>forceUpdate(),100));\n      }\n    };\n\n  }, [callObject]);\n\n\n\nconst sendState = () => {\n    console.log (\"Sending current state...\");\n    callObject.sendAppMessage(window.sessionState, '*'); \n}\n\n  useEffect(()=> {\n    window.sendState = sendState;\n  },[sendState]);\n\n\n  function toggleSessionActive() {\n    window.sessionState.isActive = !window.sessionState.isActive;\n    sendState();\n    if (window.sessionState.isActive && !window.myRole.includes('Actor') && !window.myRole.includes('Participant')) {\n      setSubscriptions(callObject,'Room1')\n    }\n    else {\n      setSubs();\n\n    }\n  }\n\n  function togglePractice() {\n    let recipientA = window.sessionState.roleOf.Actor1 && window[window.sessionState.roleOf.Actor1 + '_SessionID'];\n    let recipientB = window.sessionState.roleOf.Actor2 && window[window.sessionState.roleOf.Actor2 + '_SessionID'];\n    if(window.sessionState.roleOf.Actor1==window.myName) {recipientA='me'}\n    if(window.sessionState.roleOf.Actor2==window.myName) {recipientB='me'}\n\n    if (!recipientA && !recipientB) {return}\n\n    const action = window.audioIsPlaying ? 'pause' : 'play';\n    const instructionsA = {\n      type: 'instructions',\n      target: targetRecording,\n      action: action,\n      recipient: recipientA,\n    }\n    const instructionsB = {\n      type: 'instructions',\n      target: targetRecording + 'B',\n      action: action,\n      recipient: recipientB\n    }\n\n    if (recipientA) {\n      if(recipientA!='me') {\n        callObject.sendAppMessage(instructionsA,recipientA);\n      }\n      else if(recipientA=='me') {\n        audioPlayer(targetRecording,action);\n      }\n      console.log(`Sent ${action} request to ${window.sessionState.roleOf.Actor1}`);\n    }\n    if (recipientB) {\n      if(recipientB!='me') {\n        callObject.sendAppMessage(instructionsB,recipientB);\n      }\n      else if(recipientB=='me') {\n        audioPlayer(targetRecording+'B',action);\n      }\n      console.log(`Sent ${action} request to ${window.sessionState.roleOf.Actor2}`);\n    }\n      \n    window.audioIsPlaying=(!window.audioIsPlaying);\n    setPlayButtonText(!window.audioIsPlaying ? 'Play practice audio' : 'Pause practice audio');\n\n\n  }\n\n\n\n\n  let handleRoleChange = (e) => {\n    window.sessionState.roleOf[e.target.id]=e.target.value;\n    console.log (e.target.id + ' is now: ' + window.sessionState.roleOf[e.target.id]);\n    sendState();\n\n    let myNewRole = 'Attendee'; //default, if no role assigned\n    for (const key in window.sessionState.roleOf) {\n        if(window.sessionState.roleOf[key]==window.myName) {\n            myNewRole = key;\n        }\n    }\n    if (myNewRole!=window.myRole) {\n        window.myRole = myNewRole;\n          if (window.myRole.includes('1')) {\n              window.myNumber=1;\n          } else if (window.myRole.includes('2')) {\n              window.myNumber=2;\n          }\n      }\n        if(window.sessionState.isActive){\n            // activateSession();  //rebuild UI for the newly assigned role, mid-session\n        } \n        setSubs();\n  }\n\n                  \n         \n\n\n  /**\n   * Start listening for participant changes when callObject is set (i.e. when the component mounts).\n   * This event will capture any changes to your audio/video mute state.\n   */\n  useEffect(() => {\n    if (!callObject) return;\n\n    function handleNewParticipantsState(event) {\n      event && logDailyEvent(event);\n      const [isCameraMuted, isMicMuted, isSharingScreen] = getStreamStates(\n        callObject\n      );\n      setCameraMuted(isCameraMuted);\n      setMicMuted(isMicMuted);\n      setSharingScreen(isSharingScreen);\n    }\n\n    // Use initial state\n    handleNewParticipantsState();\n\n    // Listen for changes in state\n    callObject.on('participant-updated', handleNewParticipantsState);\n\n    // Stop listening for changes in state\n    return function cleanup() {\n      callObject.off('participant-updated', handleNewParticipantsState);\n    };\n  }, [callObject]);\n\n\n    /* // Play practice audio for users */\n\n    \n\n  return (\n\n        <div className=\"admin-panel\" style={{position:'relative',margin:'auto',width:'100%',height:'80px'}}>\n                 \n\n              \n                \n\n\n                \n\n                {/* <!-- Play recordings for users to practice Seconding --> */}\n          <div style={{position:'absolute',left:'50px',top:'12px',textAlign: 'center', flexDirection: 'column', justifyContent: 'flex-end'}}>\n                \n                    <span style={{bottom: '0px', color: 'green', fontSize: '16px', fontFamily:'Verdana, Geneva, Tahoma, sans-serif'}}>\n                    <button onClick={togglePractice} id='play-pause'>{playButtonText}</button>\n                    </span>\n\n                   \n       \n                    {/* Recordings for Seconding */}\n                    <div style={{height:'30px'}}>\n                    <form action = ''>\n                        <fieldset style={{border:'none'}}>\n                        <select id = 'practice-audio' onChange={(e) => {setTargetRecording (e.target.value); console.log('***CHANGED TO ' + e.target.value)}}\n                        style={{outline:'none', borderRadius: '20px', height:'20px', width:'130px',  cursor:'pointer', backgroundColor:'green', color:'white'}}>\n                        <option value = 'monologue1'>What makes CEB different (mono)</option>    \n                        {/* ///IF DEFAULT VALUE CHANGES ABOVE, ALSO HAVE TO CHANGE IT IN setTargetRecording HOOK */}\n                        <option value = 'monologue2'>Searching for PAGA Claims (mono)</option>\n                        <option value = 'monologue3'>Audio Engineer (mono)</option>\n                        <option value = 'dialogue1'>Ethics (dialogue)</option>\n                        <option value = 'dialogue2'>CoursePass (dialogue)</option>\n                    </select>\n                    </fieldset>\n                    </form>\n                </div> \n        </div>\n\n        {/* END PRACTICE AUDIO */}\n\n       \n\n\n            \n               \n\n\n                    {/* <!-- start / stop recording --> */}\n                {/* <div style={{flexGrow:'1', textAlign: 'center'}}>\n                <label class=\"switch\" style={{position:'relative', height:'30px', width:'60px', cursor:'pointer', bottom:'-30px'}}>\n                    <input type=\"checkbox\" id='recording' />\n                    <span class=\"slider round red\"></span>\n                </label>\n                <p style={{position:'relative', bottom: '-15px'}}>Recording</p>\n            </div> */}\n\n            {/* <!-- Assign who will be the participants + actors --> */}\n    <div id='role-assignments' class='role-assignments' style={{}}>\n\n          {/* (<span style={{color:'red'}}>Person A:</span> + <span style={{color:'grey'}}>played by:</span>) */}\n\n          <div className='column'>\n\n              <div className='RoleName-and-Dropdown'>\n                      <div className='RoleName'>\n                        <p>\n                          Person A:\n                        </p>\n                      </div>\n\n                      <div className='dropdown'>\n                          <p>\n                            <form>\n                              <select className='selector' id=\"Participant1\" onChange={handleRoleChange}>\n                                <option value={null}></option>\n                                {window.userList && window.userList.length>0 && window.userList.map((user) => <option value={user}>{user}</option>)}\n                              </select>\n                              </form>\n                            </p>\n                      </div>\n              </div>\n\n              <div className='RoleName-and-Dropdown'>\n                        <div className='RoleName'>\n                          <p>\n                            Actor A:\n                          </p>\n                        </div>\n\n                        <div className='dropdown'>\n                      <p>\n                      <form>\n                      <select className='selector' id=\"Actor1\" onChange={handleRoleChange}>\n                          <option value={null}></option>\n                          {window.userList && window.userList.length>0 && window.userList.map((user) => <option value={user}>{user}</option>)}\n                          </select>\n                        </form>\n                      </p>\n                  </div>\n              </div>\n      </div>\n\n      <div className='column'>\n\n          <div className='RoleName-and-Dropdown'>\n                  <div className='RoleName'>\n                    <p>\n                      Person B:\n                    </p>\n                  </div>\n\n                  <div className='dropdown'>\n                      <p>\n                        <form>\n                        <select className='selector' id=\"Participant2\" onChange={handleRoleChange}>\n                          <option value={null}></option>\n                          {window.userList && window.userList.length>0 && window.userList.map((user) => <option value={user}>{user}</option>)}\n                          </select>\n                          </form>\n                        </p>\n                  </div>\n          </div>\n\n          <div className='RoleName-and-Dropdown'>\n                    <div className='RoleName'>\n                      <p>\n                        Actor B:\n                      </p>\n                    </div>\n\n                <div className='dropdown'>\n                <p>\n                <form>\n                <select className='selector' id=\"Actor2\" onChange={handleRoleChange}>                    \n                <option value={null}></option>\n                    {window.userList && window.userList.length>0 && window.userList.map((user) => <option value={user}>{user}</option>)}\n                    </select>\n                  </form>\n                </p>\n              </div>\n          </div>\n    </div>\n\n    \n\n    </div>  \n    {/* END ROLE assignments */}\n\n     {/* <!-- start / stop session --> */}\n     <div style={{textAlign: 'center',width:'100px', position:'absolute',right:'70px',bottom:'0px'}}>\n                    <label class=\"switch\" style={{position:'relative', left:'30px',height:'30px', width:'60px',bottom:'-13px', cursor:'pointer'}}>\n                        <input type=\"checkbox\" id='state' onChange={toggleSessionActive}/>\n                        <span class=\"slider round\"></span>\n                    </label>\n                    <p style={{position:'relative', left:'30px', bottom: '0px'}}>Session active</p>\n                    </div>\n\n    </div>\n        \n\n    \n  );\n  \n}\n"]},"metadata":{},"sourceType":"module"}