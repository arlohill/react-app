{"ast":null,"code":"var _jsxFileName = \"/Users/arlosb/Documents/GitHub/new react app/test2/src/components/StartScreen/StartScreen.js\";\nimport React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector'; // import MyInfoContext from '../../MyInfoContext';\n//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n/**\n * Props:\n * -\n * -\n */\n\nexport default function StartScreen(props) {\n  const userIDEl = useRef(null);\n  const [showMicSettings, setShowMicSettings] = useState(false);\n  const [showCamSettings, setShowCamSettings] = useState(false);\n  const begin = props.onClick; // const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\n\n  const [userID, setUserID] = useState('Your first name');\n  const lobbyVideo = useRef(null);\n  const micCaret = React.createRef();\n  const micSettings = React.createRef();\n  const camCaret = React.createRef();\n  const camSettings = React.createRef();\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return function cleanup() {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n\n  const handleClickOutside = event => {\n    console.log('handling click');\n\n    if (micSettings.current && !micSettings.current.contains(event.target) && !micCaret.current.contains(event.target)) {\n      setShowMicSettings(false);\n    } else if (camSettings.current && !camSettings.current.contains(event.target) && !camCaret.current.contains(event.target)) {\n      setShowCamSettings(false);\n    }\n  }; //   if (parent.myRole.includes('Viewer')) {\n  //     document.getElementById('welcome-instructions').innerHTML='You are in view-only mode. <br/><br/>Click below to enter. <br/><br/>  <button class=\"new-card\" id=\"enter-button\" onclick=\"setUserID()\">Enter session</button>'\n  //   }\n  // useEffect(()=> {\n  //     if(window.myRole==='Admin') {\n  //         window.myName='Admin';\n  //         begin();\n  //     };\n  //     },[])\n\n\n  function setMyName() {\n    console.log('setting user ID as ' + userID); //   if (parent.myRole.includes('Viewer')) {   //enter session immediately if no need to enter name\n    //     begin();\n    //     return;\n    //   }\n\n    if (userID === '' || userID === 'Your first name' || userID.length <= 1) {\n      alert('Please enter your name to help your partner identify you.');\n    } else {\n      console.log('***GOT HERE***');\n      window.myName = userID;\n      begin();\n    }\n  }\n\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: true\n    }).then(mediaStream => {\n      if (mediaStream) {\n        window.mediaStream = mediaStream;\n        let localAudio = mediaStream.getAudioTracks();\n        let localVideo = mediaStream.getVideoTracks();\n        lobbyVideo.current && (lobbyVideo.current.srcObject = new MediaStream([localVideo[0], localAudio[0]]));\n      }\n    });\n  }, []); // if(localAudio && localAudio.length > 0)\n  //     {\n  //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n  //     }\n  //     else {}:\n\n  function onFieldChange(value) {\n    setUserID(value);\n    window.userID = userID;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"start-screen-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fixed-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"Welcome to SecondBody.\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: '180px',\n      marginRight: '180px',\n      padding: '20px',\n      border: '4px solid whitesmoke'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: 'white',\n      opacity: '1',\n      zIndex: '1000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    autoplay: \"true\",\n    ref: lobbyVideo,\n    style: {\n      height: '180px',\n      width: '320px',\n      objectFit: 'cover',\n      borderRadius: '20px',\n      background: 'white',\n      zIndex: '99'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      width: '400px',\n      bottom: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selector-button\",\n    onClick: () => {\n      setShowCamSettings(!showCamSettings);\n    },\n    ref: camCaret,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, \"Select Camera ^\"), showCamSettings ? /*#__PURE__*/React.createElement(InputSelector, {\n    type: \"video\",\n    ref: camSettings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 34\n    }\n  }) : null), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative',\n      width: '400px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selector-button\",\n    onClick: () => {\n      setShowCamSettings(!showCamSettings);\n    },\n    ref: camCaret,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }, \"Select Mic ^\"), showCamSettings ? /*#__PURE__*/React.createElement(InputSelector, {\n    type: \"video\",\n    ref: camSettings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 34\n    }\n  }) : null))), /*#__PURE__*/React.createElement(\"h4\", {\n    id: \"welcome-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    id: \"form\",\n    onSubmit: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    autoComplete: \"off\",\n    style: {\n      backgroundColor: 'rgb(230, 240, 249)',\n      fontSize: '15px',\n      width: '200px',\n      height: '30px',\n      textAlign: 'center',\n      fontFamily: 'poppins'\n    },\n    ref: userIDEl,\n    value: userID,\n    onFocus: () => {\n      if (userID === 'Your first name') {\n        setUserID('');\n      }\n    },\n    onChange: e => onFieldChange(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 349\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 354\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"new-card\",\n    style: {\n      width: '150px',\n      color: '#1b8bc4',\n      fontSize: '17px'\n    },\n    type: \"submit\",\n    type: \"submit\",\n    value: \"Enter session\",\n    onClick: setMyName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 25\n    }\n  }))))));\n}","map":{"version":3,"sources":["/Users/arlosb/Documents/GitHub/new react app/test2/src/components/StartScreen/StartScreen.js"],"names":["React","useEffect","useRef","useContext","useState","InputSelector","StartScreen","props","userIDEl","showMicSettings","setShowMicSettings","showCamSettings","setShowCamSettings","begin","onClick","userID","setUserID","lobbyVideo","micCaret","createRef","micSettings","camCaret","camSettings","document","addEventListener","handleClickOutside","cleanup","removeEventListener","event","console","log","current","contains","target","setMyName","length","alert","window","myName","navigator","mediaDevices","getUserMedia","audio","video","then","mediaStream","localAudio","getAudioTracks","localVideo","getVideoTracks","srcObject","MediaStream","onFieldChange","value","marginLeft","marginRight","padding","border","background","opacity","zIndex","height","width","objectFit","borderRadius","display","flexDirection","bottom","position","e","preventDefault","backgroundColor","fontSize","textAlign","fontFamily","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\n// import MyInfoContext from '../../MyInfoContext';\n\n\n\n//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n\n/**\n * Props:\n * -\n * -\n */\n export default function StartScreen(props) {\n\n    const userIDEl = useRef(null);\n    const [showMicSettings,setShowMicSettings] = useState(false);\n    const [showCamSettings,setShowCamSettings] = useState(false);\n    const begin = props.onClick;\n    // const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\n    const [ userID, setUserID ] = useState('Your first name');\n    const lobbyVideo = useRef(null);\n    const micCaret = React.createRef();\n    const micSettings = React.createRef();\n    const camCaret = React.createRef();\n    const camSettings = React.createRef();\n\n\n    useEffect(()=> {\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n  \n  \n   return function cleanup() {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    })\n\n    const handleClickOutside = (event) => {\n      console.log('handling click');\n      if (micSettings.current &&\n        !micSettings.current.contains(event.target) &&\n        !micCaret.current.contains(event.target)\n      ) {\n        setShowMicSettings(false);\n      } else if (camSettings.current &&\n        !camSettings.current.contains(event.target) &&\n        !camCaret.current.contains(event.target)\n      ) {\n        setShowCamSettings(false);\n      } \n      \n    }\n \n    \n\n    //   if (parent.myRole.includes('Viewer')) {\n//     document.getElementById('welcome-instructions').innerHTML='You are in view-only mode. <br/><br/>Click below to enter. <br/><br/>  <button class=\"new-card\" id=\"enter-button\" onclick=\"setUserID()\">Enter session</button>'\n//   }\n\n// useEffect(()=> {\n//     if(window.myRole==='Admin') {\n//         window.myName='Admin';\n//         begin();\n//     };\n//     },[])\n\n  function setMyName() {\n      console.log('setting user ID as ' + userID);\n    //   if (parent.myRole.includes('Viewer')) {   //enter session immediately if no need to enter name\n    //     begin();\n    //     return;\n    //   }\n      if (userID === '' || userID==='Your first name' || userID.length<=1) {\n        alert('Please enter your name to help your partner identify you.')\n      } else {\n          console.log('***GOT HERE***');\n        window.myName=userID;\n        begin();\n      }\n  }\nuseEffect(()=>{\n  navigator.mediaDevices.getUserMedia({audio:true,video:true}).then((mediaStream)=>{\n    if(mediaStream){\n      window.mediaStream = mediaStream;\n      let localAudio = mediaStream.getAudioTracks();\n      let localVideo = mediaStream.getVideoTracks();\n      lobbyVideo.current && (lobbyVideo.current.srcObject=new MediaStream([localVideo[0],localAudio[0]]));\n    }\n  })\n},[])\n    \n\n        // if(localAudio && localAudio.length > 0)\n        //     {\n        //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n        //     }\n        //     else {}:\n\n  \n  function onFieldChange(value) {\n    setUserID(value);\n    window.userID=userID;\n}\n\n\n    return (\n    <div className='container'>\n\n        <div className='start-screen-background'></div>\n  \n        <div className='instructions'> \n            <div className='fixed-width'>\n          \n                <h2>Welcome to SecondBody.</h2>\n\n               \n\n                <div style={{marginLeft:'180px', marginRight:'180px', padding: '20px', border: '4px solid whitesmoke'}}>\n                  <div style={{background:'white',opacity:'1',zIndex:'1000'}}>\n                    \n                      <video autoplay='true' ref={lobbyVideo} style={{height:'180px',width:'320px',objectFit: 'cover', borderRadius:'20px', background:'white',zIndex:'99'}}></video>\n                      \n                      <div style={{display:'flex',flexDirection:'row',width:'400px',bottom:'10px'}}>\n                          <div   style={{position:'relative'}}>\n                            <p className=\"selector-button\" onClick={()=>{setShowCamSettings(!showCamSettings)}} ref={camCaret}>Select Camera ^</p>\n                                {showCamSettings ? \n                                (<InputSelector type='video' ref={camSettings}/>)\n                                : \n                                null}\n                          </div>\n\n                          <div style={{position:'relative',width:'400px'}}>\n                            <p className=\"selector-button\" onClick={()=>{setShowCamSettings(!showCamSettings)}} ref={camCaret}>Select Mic ^</p>\n                                {showCamSettings ? \n                                (<InputSelector type='video' ref={camSettings}/>)\n                                : \n                                null}\n                          </div>\n                      </div>\n\n                  </div>\n                    \n                    <h4 id='welcome-instructions'>\n            \n                        <form id='form' onSubmit={(e)=>e.preventDefault()}>\n                            {/* <label for=\"userID\"></label><br/><br/> */}\n                            <input type=\"text\" autoComplete=\"off\" style={{backgroundColor: 'rgb(230, 240, 249)', fontSize:'15px', width: '200px', height: '30px', textAlign:'center', fontFamily:'poppins'}} ref={userIDEl} value={userID} onFocus={()=> {if (userID==='Your first name') {setUserID('')}}} onChange={e => onFieldChange(e.target.value)} /><br/><br/>\n                            <input className='new-card' style={{width:'150px', color:'#1b8bc4', fontSize: '17px'}} type=\"submit\" type=\"submit\" value='Enter session' onClick={setMyName} />\n                        </form>\n\n                        <br/>\n                    </h4>\n                </div>\n        \n  \n            </div>\n        </div>\n  \n    \n  \n       \n    </div>\n    );\n  }\n\n              \n                \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}