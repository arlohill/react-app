{"ast":null,"code":"import _defineProperty from\"/Users/arlosb/Documents/GitHub/new react app/test4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/arlosb/Documents/GitHub/new react app/test4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useContext,useState}from'react';import'./StartScreen.css';import InputSelector from'../InputSelector/InputSelector';import MyContext from'../../../MyContext';import Logo from'../../../assets/LivestormSecondBody.png';//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n/**\n * Props:\n * -\n * -\n */export default function StartScreen(props){var _React$createElement;var userIDEl=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMicSettings=_useState2[0],setShowMicSettings=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCamSettings=_useState4[0],setShowCamSettings=_useState4[1];var begin=props.onClick;var lobbyVideo=useRef(null);var micCaret=React.createRef();var micSettings=React.createRef();var camCaret=React.createRef();var camSettings=React.createRef();var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),initialInputs=_useState6[0],setInitialInputs=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),hasUserMedia=_useState8[0],setHasUserMedia=_useState8[1];var _useContext=useContext(MyContext),myStateArray=_useContext.myStateArray,setName=_useContext.setName,setRole=_useContext.setRole,setUserList=_useContext.setUserList,setViewMode=_useContext.setViewMode,setCamOnAtSessionStart=_useContext.setCamOnAtSessionStart,setMicOnAtSessionStart=_useContext.setMicOnAtSessionStart,setAmAdmin=_useContext.setAmAdmin,setNumber=_useContext.setNumber;var _myStateArray=_slicedToArray(myStateArray,2),myState=_myStateArray[0],setMyState=_myStateArray[1];useEffect(function(){document.addEventListener(\"mousedown\",handleClickOutside);return function cleanup(){document.removeEventListener(\"mousedown\",handleClickOutside);};});var handleClickOutside=function handleClickOutside(event){console.log('handling click');if(micSettings.current&&!micSettings.current.contains(event.target)&&!micCaret.current.contains(event.target)){setShowMicSettings(false);}else if(camSettings.current&&!camSettings.current.contains(event.target)&&!camCaret.current.contains(event.target)){setShowCamSettings(false);}};function setMyName(){console.log('setting user ID as '+myState.name);if(myState.name===''||myState.name==='Your first name'||myState.name.length<=1){alert('Please enter your name to help your partner identify you.');}else{myState.name=myState.role==='Admin'?myState.name+'_Admin':myState.name;//apend '_Admin\" to my name if I'm an admin\nwindow.myName=myState.name;//todo: delete. for debugging purposes.\nbegin();}}useEffect(function(){navigator.mediaDevices.getUserMedia({audio:true,video:{width:1280,height:720}}).then(function(mediaStream){if(mediaStream){window.mediaStream=mediaStream;var localAudio=mediaStream.getAudioTracks()[0];var localVideo=mediaStream.getVideoTracks()[0];setInitialInputs([localAudio,localVideo]);window.localAudio=localAudio;setHasUserMedia(true);}else{setHasUserMedia(false);}}).catch(function(err){console.log(\"You got an error:\"+err);setHasUserMedia(false);});},[]);useEffect(function(){initialInputs&&lobbyVideo.current&&(lobbyVideo.current.srcObject=new MediaStream(initialInputs));lobbyVideo.current.muted=true;window.initialInputs=initialInputs;},[initialInputs]);// if(localAudio && localAudio.length > 0)\n//     {\n//       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n//     }\n//     else {}:\nvar handleChange=function handleChange(e){var newName=e.target.value;setName(newName);};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"start-screen-background\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"instructions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-width\"},/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',marginLeft:'180px',marginTop:'50px',marginRight:'180px',padding:'20px',paddingTop:'40px',border:'4px solid whitesmoke',backgroundColor:'white'}},/*#__PURE__*/React.createElement(\"img\",{src:Logo,style:{width:'220px',paddingBottom:'25px'}}),/*#__PURE__*/React.createElement(\"div\",{style:{background:'white',opacity:'1',zIndex:'1000'}},hasUserMedia?/*#__PURE__*/React.createElement(\"video\",{className:\"lobby-video\",autoPlay:true,ref:lobbyVideo}):/*#__PURE__*/React.createElement(\"p\",{style:{height:'198px',width:'352px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder',boxSizing:'border-box',padding:'24px',border:'2px yellow solid'}},\"\\u274C Your camera / mic is blocked \\u274C\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then \",/*#__PURE__*/React.createElement(\"u\",{style:{cursor:'pointer'},onClick:function onClick(){window.location.reload();}},\"refresh the page.\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"How?\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:'https://youtu.be/GceAjizU5WU?t=39',target:\"_blank\"},\"Option 2\")))),lobbyVideo.current&&hasUserMedia&&/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px',width:'250px',height:'0px',margin:'auto'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowCamSettings(!showCamSettings);},ref:camCaret},\"Select Camera ^\"),showCamSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowCamSettings(false);},style:{position:'relative',bottom:'0px',left:'80px'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"video\",page:\"intro\",inputs:[initialInputs,setInitialInputs],ref:camSettings})):null),/*#__PURE__*/React.createElement(\"div\",{style:{width:'15px'}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowMicSettings(!showMicSettings);},ref:micCaret},\"Select Mic ^\"),showMicSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowMicSettings(false);},style:{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"audio\",page:\"intro\",ref:micSettings,inputs:[initialInputs,setInitialInputs]})):null))),hasUserMedia&&/*#__PURE__*/React.createElement(\"h4\",{className:\"signin\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return e.preventDefault();}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:'rgb(230, 240, 249)',fontSize:'15px',width:'200px',height:'30px',textAlign:'center',fontFamily:'poppins'},ref:userIDEl,value:myState.name,onFocus:function onFocus(){if(myState.name==='Your first name'){setName('');}},onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",(_React$createElement={className:\"new-card\",style:{width:'150px',color:'#1b8bc4',fontSize:'17px'},type:\"submit\"},_defineProperty(_React$createElement,\"type\",\"submit\"),_defineProperty(_React$createElement,\"value\",\"Enter session\"),_defineProperty(_React$createElement,\"onClick\",setMyName),_React$createElement))),/*#__PURE__*/React.createElement(\"br\",null))))));}","map":{"version":3,"sources":["/Users/arlosb/Documents/GitHub/new react app/test4/src/components/Livestorm/StartScreen/StartScreen.js"],"names":["React","useEffect","useRef","useContext","useState","InputSelector","MyContext","Logo","StartScreen","props","userIDEl","showMicSettings","setShowMicSettings","showCamSettings","setShowCamSettings","begin","onClick","lobbyVideo","micCaret","createRef","micSettings","camCaret","camSettings","initialInputs","setInitialInputs","hasUserMedia","setHasUserMedia","myStateArray","setName","setRole","setUserList","setViewMode","setCamOnAtSessionStart","setMicOnAtSessionStart","setAmAdmin","setNumber","myState","setMyState","document","addEventListener","handleClickOutside","cleanup","removeEventListener","event","console","log","current","contains","target","setMyName","name","length","alert","role","window","myName","navigator","mediaDevices","getUserMedia","audio","video","width","height","then","mediaStream","localAudio","getAudioTracks","localVideo","getVideoTracks","catch","err","srcObject","MediaStream","muted","handleChange","e","newName","value","position","marginLeft","marginTop","marginRight","padding","paddingTop","border","backgroundColor","paddingBottom","background","opacity","zIndex","borderRadius","margin","color","fontWeight","boxSizing","cursor","location","reload","display","flexDirection","justifyContent","bottom","left","overflowY","preventDefault","fontSize","textAlign","fontFamily"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\nimport MyContext from '../../../MyContext';\nimport Logo from '../../../assets/LivestormSecondBody.png'\n\n\n\n//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n\n/**\n * Props:\n * -\n * -\n */\n export default function StartScreen(props) {\n    const userIDEl = useRef(null);\n    const [showMicSettings,setShowMicSettings] = useState(false);\n    const [showCamSettings,setShowCamSettings] = useState(false);\n    const begin = props.onClick;\n    const lobbyVideo = useRef(null);\n    const micCaret = React.createRef();\n    const micSettings = React.createRef();\n    const camCaret = React.createRef();\n    const camSettings = React.createRef();\n    const [initialInputs,setInitialInputs] = useState(null);\n    const [hasUserMedia,setHasUserMedia] = useState(true);\n    const { myStateArray, \n      setName, \n      setRole,\n      setUserList,\n      setViewMode,\n      setCamOnAtSessionStart,\n      setMicOnAtSessionStart,\n      setAmAdmin, \n      setNumber,\n    } = useContext(MyContext);\n    const [ myState,setMyState ] = myStateArray;\n  \n\n    useEffect(()=> {\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n  \n  \n      return function cleanup() {\n          document.removeEventListener(\"mousedown\", handleClickOutside);\n          };\n    })\n\n    const handleClickOutside = (event) => {\n      console.log('handling click');\n      if (micSettings.current &&\n        !micSettings.current.contains(event.target) &&\n        !micCaret.current.contains(event.target)\n      ) {\n        setShowMicSettings(false);\n      } else if (camSettings.current &&\n        !camSettings.current.contains(event.target) &&\n        !camCaret.current.contains(event.target)\n      ) {\n        setShowCamSettings(false);\n      } \n      \n    }\n \n    \n\n  function setMyName() {\n      console.log('setting user ID as ' + myState.name);\n      if (myState.name === '' || myState.name==='Your first name' || myState.name.length<=1) {\n        alert('Please enter your name to help your partner identify you.')\n      } else {\n        myState.name = myState.role === 'Admin' ? myState.name + '_Admin' : myState.name; //apend '_Admin\" to my name if I'm an admin\n        window.myName=myState.name; //todo: delete. for debugging purposes.\n        begin();\n      }\n  }\nuseEffect(()=>{\n  navigator.mediaDevices.getUserMedia({audio:true,video:{width: 1280,height: 720}}).then((mediaStream)=>{\n    if(mediaStream){\n      window.mediaStream = mediaStream;\n      let localAudio = mediaStream.getAudioTracks()[0];\n      let localVideo = mediaStream.getVideoTracks()[0];  \n      setInitialInputs([localAudio,localVideo]);\n      window.localAudio=localAudio;\n      setHasUserMedia(true);\n    } else {\n      setHasUserMedia(false);\n    }\n  }).catch( err => {\n    console.log(\"You got an error:\" + err);\n    setHasUserMedia(false);\n});\n\n}\n\n,[])\n\nuseEffect(()=>{\n  initialInputs && lobbyVideo.current && (lobbyVideo.current.srcObject=new MediaStream(initialInputs));\n  lobbyVideo.current.muted=true;\n  window.initialInputs=initialInputs;\n},[initialInputs]);\n    \n\n        // if(localAudio && localAudio.length > 0)\n        //     {\n        //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n        //     }\n        //     else {}:\n\n  \n  const handleChange = e => {\n    let newName = e.target.value;\n    setName(newName);\n}\n\n\n    return (\n    <div className='container'>\n\n        <div className='start-screen-background'></div>\n  \n        <div className='instructions'> \n            <div className='fixed-width'>\n          \n                \n\n               \n\n                <div style={{position:'relative', marginLeft:'180px', marginTop:'50px',marginRight:'180px', padding: '20px', paddingTop:'40px', border: '4px solid whitesmoke', backgroundColor:'white'}}>\n                <img src={Logo} style={{width:'220px',paddingBottom:'25px'}} />\n                      <div style={{background:'white',opacity:'1',zIndex:'1000'}}>\n                      \n                      \n                {hasUserMedia ? \n\n                    <video className='lobby-video' autoPlay={true} ref={lobbyVideo}/>\n                    :\n                    <p style={{height:'198px',width:'352px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder', boxSizing:'border-box',padding:'24px',border:'2px yellow solid'}}>\n                    ❌ Your camera / mic is blocked ❌<br/><br/>Please give this site access to your camera and mic, and then <u style={{cursor:'pointer'}} onClick={(()=>{window.location.reload()})}>refresh the page.</u>\n                    <br/><br/>\n                    How?\n                    <br/>\n                    <ul>\n                      <li>\n                          <a target='_blank' href='https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?'>\n                          Option 1\n                          </a>\n                      </li>\n                      <li>\n                          <a href={'https://youtu.be/GceAjizU5WU?t=39'}  target='_blank'>Option 2</a>\n                      </li>\n                      </ul>\n                      </p>\n                  }\n                      \n                      \n\n             {/* <img src={Unblock} style={{width:'100px'}} /> */}\n                      \n                      \n                      {lobbyVideo.current && hasUserMedia && (\n                          <div style={{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px', width:'250px',height:'0px',margin:'auto'}}>\n                              <div >\n                                <p className=\"selector-button\" onClick={()=>{setShowCamSettings(!showCamSettings)}} ref={camCaret}>Select Camera ^</p>\n                                    {showCamSettings ? \n                                    (<div onClick={()=>setShowCamSettings(false)}style={{position:'relative',bottom:'0px',left:'80px'}}>\n                                      <InputSelector type='video' page='intro' inputs={[initialInputs,setInitialInputs]} ref={camSettings} />\n                                    </div>)\n                                    : \n                                    null}\n                              </div>\n                              <div style={{width:'15px'}}></div>\n\n                              <div>\n                                <p className=\"selector-button\" onClick={()=>{setShowMicSettings(!showMicSettings)}} ref={micCaret}>Select Mic ^</p>\n                                    {showMicSettings ? \n                                      (<div onClick={()=>setShowMicSettings(false)} style={{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}}>\n                                        <InputSelector type='audio' page='intro' ref={micSettings}  inputs={[initialInputs,setInitialInputs]}/>\n                                      </div>)\n                                    : \n                                    null}\n                              </div>\n                          </div>\n                      )}\n\n                  </div>\n                    \n                 { hasUserMedia && (\n                    <h4 className='signin'>\n            \n                        <form onSubmit={(e)=>e.preventDefault()}>\n                            <input type=\"text\" autoComplete=\"off\" style={{backgroundColor: 'rgb(230, 240, 249)', fontSize:'15px', width: '200px', height: '30px', textAlign:'center', fontFamily:'poppins'}} ref={userIDEl} value={myState.name} onFocus={()=> {if (myState.name==='Your first name') {setName('')}}} onChange={e=>handleChange(e)} /><br/><br/>\n                            <input className='new-card' style={{width:'150px', color:'#1b8bc4', fontSize: '17px'}} type=\"submit\" type=\"submit\" value='Enter session' onClick={setMyName} />\n                        </form>\n\n                        <br/>\n                    </h4>\n                  )}\n                    \n                </div>\n        \n  \n            </div>\n        </div>\n  \n    \n  \n       \n    </div>\n    );\n  }\n\n              \n                \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}