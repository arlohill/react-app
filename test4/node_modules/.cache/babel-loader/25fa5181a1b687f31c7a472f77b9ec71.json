{"ast":null,"code":"var _jsxFileName = \"/Users/arlosb/Documents/GitHub/new react app/test4/src/components/General/StartScreen/StartScreen.js\";\nimport React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\nimport MyContext from '../../../MyContext'; //   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n/**\n * Props:\n * -\n * -\n */\n\nexport default function StartScreen(props) {\n  const userIDEl = useRef(null);\n  const [showMicSettings, setShowMicSettings] = useState(false);\n  const [showCamSettings, setShowCamSettings] = useState(false);\n  const begin = props.onClick;\n  const lobbyVideo = useRef(null);\n  const micCaret = React.createRef();\n  const micSettings = React.createRef();\n  const camCaret = React.createRef();\n  const camSettings = React.createRef();\n  const [initialInputs, setInitialInputs] = useState(null);\n  const [hasUserMedia, setHasUserMedia] = useState(true);\n  const {\n    myStateArray,\n    setName,\n    setRole,\n    setUserList,\n    setViewMode,\n    setCamOnAtSessionStart,\n    setMicOnAtSessionStart,\n    setAmAdmin,\n    setNumber\n  } = useContext(MyContext);\n  const [myState, setMyState] = myStateArray;\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return function cleanup() {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n\n  const handleClickOutside = event => {\n    console.log('handling click');\n\n    if (micSettings.current && !micSettings.current.contains(event.target) && !micCaret.current.contains(event.target)) {\n      setShowMicSettings(false);\n    } else if (camSettings.current && !camSettings.current.contains(event.target) && !camCaret.current.contains(event.target)) {\n      setShowCamSettings(false);\n    }\n  };\n\n  function setMyName() {\n    console.log('setting user ID as ' + myState.name);\n\n    if (myState.name === '' || myState.name === 'Your first name' || myState.name.length <= 1) {\n      alert('Please enter your name to help your partner identify you.');\n    } else {\n      myState.name = myState.role === 'Admin' ? myState.name + '_Admin' : myState.name; //apend '_Admin\" to my name if I'm an admin\n\n      window.myName = myState.name; //todo: delete. for debugging purposes.\n\n      begin();\n    }\n  }\n\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: {\n        width: 1280,\n        height: 720\n      }\n    }).then(mediaStream => {\n      if (mediaStream) {\n        window.mediaStream = mediaStream;\n        let localAudio = mediaStream.getAudioTracks()[0];\n        let localVideo = mediaStream.getVideoTracks()[0];\n        setInitialInputs([localAudio, localVideo]);\n        window.localAudio = localAudio;\n        setHasUserMedia(true);\n      } else {\n        setHasUserMedia(false);\n      }\n    }).catch(err => {\n      console.log(\"You got an error:\" + err);\n      setHasUserMedia(false);\n    });\n  }, []);\n  useEffect(() => {\n    initialInputs && lobbyVideo.current && (lobbyVideo.current.srcObject = new MediaStream(initialInputs));\n    lobbyVideo.current.muted = true;\n    window.initialInputs = initialInputs;\n  }, [initialInputs]); // if(localAudio && localAudio.length > 0)\n  //     {\n  //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n  //     }\n  //     else {}:\n\n  const handleChange = e => {\n    let newName = e.target.value;\n    setName(newName);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"start-screen-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fixed-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, \"Welcome to SecondBody.\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative',\n      marginLeft: '180px',\n      marginRight: '180px',\n      padding: '20px',\n      paddingTop: '40px',\n      border: '4px solid whitesmoke',\n      backgroundColor: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: 'white',\n      opacity: '1',\n      zIndex: '1000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 23\n    }\n  }, hasUserMedia ? /*#__PURE__*/React.createElement(\"video\", {\n    className: \"lobby-video\",\n    autoPlay: true,\n    ref: lobbyVideo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      height: '198px',\n      width: '352px',\n      borderRadius: '20px',\n      background: 'black',\n      margin: 'auto',\n      color: 'white',\n      fontWeight: 'bolder',\n      boxSizing: 'border-box',\n      padding: '24px',\n      border: '2px yellow solid'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, \"\\u274C Your camera / mic is blocked \\u274C\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 53\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 58\n    }\n  }), \"Please give this site access to your camera and mic, and then \", /*#__PURE__*/React.createElement(\"u\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => {\n      window.location.reload();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 125\n    }\n  }, \"refresh the page.\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 26\n    }\n  }), \"How?\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    target: \"_blank\",\n    href: \"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 27\n    }\n  }, \"Option 1\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: 'https://youtu.be/GceAjizU5WU?t=39',\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 27\n    }\n  }, \"Option 2\")))), lobbyVideo.current && hasUserMedia && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative',\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'center',\n      bottom: '40px',\n      width: '250px',\n      height: '0px',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selector-button\",\n    onClick: () => {\n      setShowCamSettings(!showCamSettings);\n    },\n    ref: camCaret,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  }, \"Select Camera ^\"), showCamSettings ? /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setShowCamSettings(false),\n    style: {\n      position: 'relative',\n      bottom: '0px',\n      left: '80px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 38\n    }\n  }, /*#__PURE__*/React.createElement(InputSelector, {\n    type: \"video\",\n    page: \"intro\",\n    inputs: [initialInputs, setInitialInputs],\n    ref: camSettings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 39\n    }\n  })) : null), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '15px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selector-button\",\n    onClick: () => {\n      setShowMicSettings(!showMicSettings);\n    },\n    ref: micCaret,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 33\n    }\n  }, \"Select Mic ^\"), showMicSettings ? /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setShowMicSettings(false),\n    style: {\n      position: 'relative',\n      bottom: '0px',\n      left: '72px',\n      overflowY: 'visible'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 40\n    }\n  }, /*#__PURE__*/React.createElement(InputSelector, {\n    type: \"audio\",\n    page: \"intro\",\n    ref: micSettings,\n    inputs: [initialInputs, setInitialInputs],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 41\n    }\n  })) : null))), hasUserMedia && /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    autoComplete: \"off\",\n    style: {\n      backgroundColor: 'rgb(230, 240, 249)',\n      fontSize: '15px',\n      width: '200px',\n      height: '30px',\n      textAlign: 'center',\n      fontFamily: 'poppins'\n    },\n    ref: userIDEl,\n    value: myState.name,\n    onFocus: () => {\n      if (myState.name === 'Your first name') {\n        setName('');\n      }\n    },\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 343\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 348\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"new-card\",\n    style: {\n      width: '150px',\n      color: '#1b8bc4',\n      fontSize: '17px'\n    },\n    type: \"submit\",\n    type: \"submit\",\n    value: \"Enter session\",\n    onClick: setMyName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }))))));\n}","map":{"version":3,"sources":["/Users/arlosb/Documents/GitHub/new react app/test4/src/components/General/StartScreen/StartScreen.js"],"names":["React","useEffect","useRef","useContext","useState","InputSelector","MyContext","StartScreen","props","userIDEl","showMicSettings","setShowMicSettings","showCamSettings","setShowCamSettings","begin","onClick","lobbyVideo","micCaret","createRef","micSettings","camCaret","camSettings","initialInputs","setInitialInputs","hasUserMedia","setHasUserMedia","myStateArray","setName","setRole","setUserList","setViewMode","setCamOnAtSessionStart","setMicOnAtSessionStart","setAmAdmin","setNumber","myState","setMyState","document","addEventListener","handleClickOutside","cleanup","removeEventListener","event","console","log","current","contains","target","setMyName","name","length","alert","role","window","myName","navigator","mediaDevices","getUserMedia","audio","video","width","height","then","mediaStream","localAudio","getAudioTracks","localVideo","getVideoTracks","catch","err","srcObject","MediaStream","muted","handleChange","e","newName","value","position","marginLeft","marginRight","padding","paddingTop","border","backgroundColor","background","opacity","zIndex","borderRadius","margin","color","fontWeight","boxSizing","cursor","location","reload","display","flexDirection","justifyContent","bottom","left","overflowY","preventDefault","fontSize","textAlign","fontFamily"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,UAAnC,EAA+CC,QAA/C,QAA+D,OAA/D;AACA,OAAO,mBAAP;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,SAAP,MAAsB,oBAAtB,C,CAIA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AACC,eAAe,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AACxC,QAAMC,QAAQ,GAAGP,MAAM,CAAC,IAAD,CAAvB;AACA,QAAM,CAACQ,eAAD,EAAiBC,kBAAjB,IAAuCP,QAAQ,CAAC,KAAD,CAArD;AACA,QAAM,CAACQ,eAAD,EAAiBC,kBAAjB,IAAuCT,QAAQ,CAAC,KAAD,CAArD;AACA,QAAMU,KAAK,GAAGN,KAAK,CAACO,OAApB;AACA,QAAMC,UAAU,GAAGd,MAAM,CAAC,IAAD,CAAzB;AACA,QAAMe,QAAQ,GAAGjB,KAAK,CAACkB,SAAN,EAAjB;AACA,QAAMC,WAAW,GAAGnB,KAAK,CAACkB,SAAN,EAApB;AACA,QAAME,QAAQ,GAAGpB,KAAK,CAACkB,SAAN,EAAjB;AACA,QAAMG,WAAW,GAAGrB,KAAK,CAACkB,SAAN,EAApB;AACA,QAAM,CAACI,aAAD,EAAeC,gBAAf,IAAmCnB,QAAQ,CAAC,IAAD,CAAjD;AACA,QAAM,CAACoB,YAAD,EAAcC,eAAd,IAAiCrB,QAAQ,CAAC,IAAD,CAA/C;AACA,QAAM;AAAEsB,IAAAA,YAAF;AACJC,IAAAA,OADI;AAEJC,IAAAA,OAFI;AAGJC,IAAAA,WAHI;AAIJC,IAAAA,WAJI;AAKJC,IAAAA,sBALI;AAMJC,IAAAA,sBANI;AAOJC,IAAAA,UAPI;AAQJC,IAAAA;AARI,MASF/B,UAAU,CAACG,SAAD,CATd;AAUA,QAAM,CAAE6B,OAAF,EAAUC,UAAV,IAAyBV,YAA/B;AAGAzB,EAAAA,SAAS,CAAC,MAAK;AAEboC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCC,kBAAvC;AAGA,WAAO,SAASC,OAAT,GAAmB;AACtBH,MAAAA,QAAQ,CAACI,mBAAT,CAA6B,WAA7B,EAA0CF,kBAA1C;AACC,KAFL;AAGD,GARQ,CAAT;;AAUA,QAAMA,kBAAkB,GAAIG,KAAD,IAAW;AACpCC,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;;AACA,QAAIzB,WAAW,CAAC0B,OAAZ,IACF,CAAC1B,WAAW,CAAC0B,OAAZ,CAAoBC,QAApB,CAA6BJ,KAAK,CAACK,MAAnC,CADC,IAEF,CAAC9B,QAAQ,CAAC4B,OAAT,CAAiBC,QAAjB,CAA0BJ,KAAK,CAACK,MAAhC,CAFH,EAGE;AACApC,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,KALD,MAKO,IAAIU,WAAW,CAACwB,OAAZ,IACT,CAACxB,WAAW,CAACwB,OAAZ,CAAoBC,QAApB,CAA6BJ,KAAK,CAACK,MAAnC,CADQ,IAET,CAAC3B,QAAQ,CAACyB,OAAT,CAAiBC,QAAjB,CAA0BJ,KAAK,CAACK,MAAhC,CAFI,EAGL;AACAlC,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD;AAEF,GAdD;;AAkBF,WAASmC,SAAT,GAAqB;AACjBL,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAwBT,OAAO,CAACc,IAA5C;;AACA,QAAId,OAAO,CAACc,IAAR,KAAiB,EAAjB,IAAuBd,OAAO,CAACc,IAAR,KAAe,iBAAtC,IAA2Dd,OAAO,CAACc,IAAR,CAAaC,MAAb,IAAqB,CAApF,EAAuF;AACrFC,MAAAA,KAAK,CAAC,2DAAD,CAAL;AACD,KAFD,MAEO;AACLhB,MAAAA,OAAO,CAACc,IAAR,GAAed,OAAO,CAACiB,IAAR,KAAiB,OAAjB,GAA2BjB,OAAO,CAACc,IAAR,GAAe,QAA1C,GAAqDd,OAAO,CAACc,IAA5E,CADK,CAC6E;;AAClFI,MAAAA,MAAM,CAACC,MAAP,GAAcnB,OAAO,CAACc,IAAtB,CAFK,CAEuB;;AAC5BnC,MAAAA,KAAK;AACN;AACJ;;AACHb,EAAAA,SAAS,CAAC,MAAI;AACZsD,IAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAACC,MAAAA,KAAK,EAAC,IAAP;AAAYC,MAAAA,KAAK,EAAC;AAACC,QAAAA,KAAK,EAAE,IAAR;AAAaC,QAAAA,MAAM,EAAE;AAArB;AAAlB,KAApC,EAAkFC,IAAlF,CAAwFC,WAAD,IAAe;AACpG,UAAGA,WAAH,EAAe;AACbV,QAAAA,MAAM,CAACU,WAAP,GAAqBA,WAArB;AACA,YAAIC,UAAU,GAAGD,WAAW,CAACE,cAAZ,GAA6B,CAA7B,CAAjB;AACA,YAAIC,UAAU,GAAGH,WAAW,CAACI,cAAZ,GAA6B,CAA7B,CAAjB;AACA5C,QAAAA,gBAAgB,CAAC,CAACyC,UAAD,EAAYE,UAAZ,CAAD,CAAhB;AACAb,QAAAA,MAAM,CAACW,UAAP,GAAkBA,UAAlB;AACAvC,QAAAA,eAAe,CAAC,IAAD,CAAf;AACD,OAPD,MAOO;AACLA,QAAAA,eAAe,CAAC,KAAD,CAAf;AACD;AACF,KAXD,EAWG2C,KAXH,CAWUC,GAAG,IAAI;AACf1B,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsByB,GAAlC;AACA5C,MAAAA,eAAe,CAAC,KAAD,CAAf;AACH,KAdC;AAgBD,GAjBQ,EAmBR,EAnBQ,CAAT;AAqBAxB,EAAAA,SAAS,CAAC,MAAI;AACZqB,IAAAA,aAAa,IAAIN,UAAU,CAAC6B,OAA5B,KAAwC7B,UAAU,CAAC6B,OAAX,CAAmByB,SAAnB,GAA6B,IAAIC,WAAJ,CAAgBjD,aAAhB,CAArE;AACAN,IAAAA,UAAU,CAAC6B,OAAX,CAAmB2B,KAAnB,GAAyB,IAAzB;AACAnB,IAAAA,MAAM,CAAC/B,aAAP,GAAqBA,aAArB;AACD,GAJQ,EAIP,CAACA,aAAD,CAJO,CAAT,CApF4C,CA2FpC;AACA;AACA;AACA;AACA;;AAGN,QAAMmD,YAAY,GAAGC,CAAC,IAAI;AACxB,QAAIC,OAAO,GAAGD,CAAC,CAAC3B,MAAF,CAAS6B,KAAvB;AACAjD,IAAAA,OAAO,CAACgD,OAAD,CAAP;AACH,GAHC;;AAME,sBACA;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAII;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFJ,eAMI;AAAK,IAAA,KAAK,EAAE;AAACE,MAAAA,QAAQ,EAAC,UAAV;AAAsBC,MAAAA,UAAU,EAAC,OAAjC;AAA0CC,MAAAA,WAAW,EAAC,OAAtD;AAA+DC,MAAAA,OAAO,EAAE,MAAxE;AAAgFC,MAAAA,UAAU,EAAC,MAA3F;AAAmGC,MAAAA,MAAM,EAAE,sBAA3G;AAAmIC,MAAAA,eAAe,EAAC;AAAnJ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACM;AAAK,IAAA,KAAK,EAAE;AAACC,MAAAA,UAAU,EAAC,OAAZ;AAAoBC,MAAAA,OAAO,EAAC,GAA5B;AAAgCC,MAAAA,MAAM,EAAC;AAAvC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGL9D,YAAY,gBAET;AAAO,IAAA,SAAS,EAAC,aAAjB;AAA+B,IAAA,QAAQ,EAAE,IAAzC;AAA+C,IAAA,GAAG,EAAER,UAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFS,gBAIT;AAAG,IAAA,KAAK,EAAE;AAAC6C,MAAAA,MAAM,EAAC,OAAR;AAAgBD,MAAAA,KAAK,EAAC,OAAtB;AAA8B2B,MAAAA,YAAY,EAAC,MAA3C;AAAkDH,MAAAA,UAAU,EAAC,OAA7D;AAAqEI,MAAAA,MAAM,EAAC,MAA5E;AAAmFC,MAAAA,KAAK,EAAC,OAAzF;AAAiGC,MAAAA,UAAU,EAAC,QAA5G;AAAsHC,MAAAA,SAAS,EAAC,YAAhI;AAA6IX,MAAAA,OAAO,EAAC,MAArJ;AAA4JE,MAAAA,MAAM,EAAC;AAAnK,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEACgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADhC,eACqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADrC,iFACwG;AAAG,IAAA,KAAK,EAAE;AAACU,MAAAA,MAAM,EAAC;AAAR,KAAV;AAA8B,IAAA,OAAO,EAAG,MAAI;AAACvC,MAAAA,MAAM,CAACwC,QAAP,CAAgBC,MAAhB;AAAyB,KAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADxG,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,eAEK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFL,uBAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJA,eAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,MAAM,EAAC,QAAV;AAAmB,IAAA,IAAI,EAAC,qHAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,IAAI,EAAE,mCAAT;AAA+C,IAAA,MAAM,EAAC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CANF,CALA,CAPE,EA8BC9E,UAAU,CAAC6B,OAAX,IAAsBrB,YAAtB,iBACG;AAAK,IAAA,KAAK,EAAE;AAACqD,MAAAA,QAAQ,EAAC,UAAV;AAAqBkB,MAAAA,OAAO,EAAC,MAA7B;AAAoCC,MAAAA,aAAa,EAAC,KAAlD;AAAwDC,MAAAA,cAAc,EAAC,QAAvE;AAAgFC,MAAAA,MAAM,EAAC,MAAvF;AAA+FtC,MAAAA,KAAK,EAAC,OAArG;AAA6GC,MAAAA,MAAM,EAAC,KAApH;AAA0H2B,MAAAA,MAAM,EAAC;AAAjI,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,iBAAb;AAA+B,IAAA,OAAO,EAAE,MAAI;AAAC3E,MAAAA,kBAAkB,CAAC,CAACD,eAAF,CAAlB;AAAqC,KAAlF;AAAoF,IAAA,GAAG,EAAEQ,QAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEOR,eAAe,gBACf;AAAK,IAAA,OAAO,EAAE,MAAIC,kBAAkB,CAAC,KAAD,CAApC;AAA4C,IAAA,KAAK,EAAE;AAACgE,MAAAA,QAAQ,EAAC,UAAV;AAAqBqB,MAAAA,MAAM,EAAC,KAA5B;AAAkCC,MAAAA,IAAI,EAAC;AAAvC,KAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,aAAD;AAAe,IAAA,IAAI,EAAC,OAApB;AAA4B,IAAA,IAAI,EAAC,OAAjC;AAAyC,IAAA,MAAM,EAAE,CAAC7E,aAAD,EAAeC,gBAAf,CAAjD;AAAmF,IAAA,GAAG,EAAEF,WAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADe,GAKhB,IAPN,CADJ,eAUI;AAAK,IAAA,KAAK,EAAE;AAACuC,MAAAA,KAAK,EAAC;AAAP,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,eAYI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,iBAAb;AAA+B,IAAA,OAAO,EAAE,MAAI;AAACjD,MAAAA,kBAAkB,CAAC,CAACD,eAAF,CAAlB;AAAqC,KAAlF;AAAoF,IAAA,GAAG,EAAEO,QAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEOP,eAAe,gBACb;AAAK,IAAA,OAAO,EAAE,MAAIC,kBAAkB,CAAC,KAAD,CAApC;AAA6C,IAAA,KAAK,EAAE;AAACkE,MAAAA,QAAQ,EAAC,UAAV;AAAqBqB,MAAAA,MAAM,EAAC,KAA5B;AAAkCC,MAAAA,IAAI,EAAC,MAAvC;AAA8CC,MAAAA,SAAS,EAAC;AAAxD,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,aAAD;AAAe,IAAA,IAAI,EAAC,OAApB;AAA4B,IAAA,IAAI,EAAC,OAAjC;AAAyC,IAAA,GAAG,EAAEjF,WAA9C;AAA4D,IAAA,MAAM,EAAE,CAACG,aAAD,EAAeC,gBAAf,CAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADa,GAKhB,IAPN,CAZJ,CA/BJ,CADN,EA0DGC,YAAY,iBACX;AAAI,IAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAM,IAAA,QAAQ,EAAGkD,CAAD,IAAKA,CAAC,CAAC2B,cAAF,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,YAAY,EAAC,KAAhC;AAAsC,IAAA,KAAK,EAAE;AAAClB,MAAAA,eAAe,EAAE,oBAAlB;AAAwCmB,MAAAA,QAAQ,EAAC,MAAjD;AAAyD1C,MAAAA,KAAK,EAAE,OAAhE;AAAyEC,MAAAA,MAAM,EAAE,MAAjF;AAAyF0C,MAAAA,SAAS,EAAC,QAAnG;AAA6GC,MAAAA,UAAU,EAAC;AAAxH,KAA7C;AAAiL,IAAA,GAAG,EAAE/F,QAAtL;AAAgM,IAAA,KAAK,EAAE0B,OAAO,CAACc,IAA/M;AAAqN,IAAA,OAAO,EAAE,MAAK;AAAC,UAAId,OAAO,CAACc,IAAR,KAAe,iBAAnB,EAAsC;AAACtB,QAAAA,OAAO,CAAC,EAAD,CAAP;AAAY;AAAC,KAAxR;AAA0R,IAAA,QAAQ,EAAE+C,CAAC,IAAED,YAAY,CAACC,CAAD,CAAnT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAC8T;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD9T,eACmU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADnU,eAEI;AAAO,IAAA,SAAS,EAAC,UAAjB;AAA4B,IAAA,KAAK,EAAE;AAACd,MAAAA,KAAK,EAAC,OAAP;AAAgB6B,MAAAA,KAAK,EAAC,SAAtB;AAAiCa,MAAAA,QAAQ,EAAE;AAA3C,KAAnC;AAAuF,IAAA,IAAI,EAAC,QAA5F;AAAqG,IAAA,IAAI,EAAC,QAA1G;AAAmH,IAAA,KAAK,EAAC,eAAzH;AAAyI,IAAA,OAAO,EAAEtD,SAAlJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAFJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,CA3DJ,CANJ,CADJ,CAJJ,CADA;AA6FD","sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\nimport MyContext from '../../../MyContext';\n\n\n\n//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n\n/**\n * Props:\n * -\n * -\n */\n export default function StartScreen(props) {\n    const userIDEl = useRef(null);\n    const [showMicSettings,setShowMicSettings] = useState(false);\n    const [showCamSettings,setShowCamSettings] = useState(false);\n    const begin = props.onClick;\n    const lobbyVideo = useRef(null);\n    const micCaret = React.createRef();\n    const micSettings = React.createRef();\n    const camCaret = React.createRef();\n    const camSettings = React.createRef();\n    const [initialInputs,setInitialInputs] = useState(null);\n    const [hasUserMedia,setHasUserMedia] = useState(true);\n    const { myStateArray, \n      setName, \n      setRole,\n      setUserList,\n      setViewMode,\n      setCamOnAtSessionStart,\n      setMicOnAtSessionStart,\n      setAmAdmin, \n      setNumber,\n    } = useContext(MyContext);\n    const [ myState,setMyState ] = myStateArray;\n  \n\n    useEffect(()=> {\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n  \n  \n      return function cleanup() {\n          document.removeEventListener(\"mousedown\", handleClickOutside);\n          };\n    })\n\n    const handleClickOutside = (event) => {\n      console.log('handling click');\n      if (micSettings.current &&\n        !micSettings.current.contains(event.target) &&\n        !micCaret.current.contains(event.target)\n      ) {\n        setShowMicSettings(false);\n      } else if (camSettings.current &&\n        !camSettings.current.contains(event.target) &&\n        !camCaret.current.contains(event.target)\n      ) {\n        setShowCamSettings(false);\n      } \n      \n    }\n \n    \n\n  function setMyName() {\n      console.log('setting user ID as ' + myState.name);\n      if (myState.name === '' || myState.name==='Your first name' || myState.name.length<=1) {\n        alert('Please enter your name to help your partner identify you.')\n      } else {\n        myState.name = myState.role === 'Admin' ? myState.name + '_Admin' : myState.name; //apend '_Admin\" to my name if I'm an admin\n        window.myName=myState.name; //todo: delete. for debugging purposes.\n        begin();\n      }\n  }\nuseEffect(()=>{\n  navigator.mediaDevices.getUserMedia({audio:true,video:{width: 1280,height: 720}}).then((mediaStream)=>{\n    if(mediaStream){\n      window.mediaStream = mediaStream;\n      let localAudio = mediaStream.getAudioTracks()[0];\n      let localVideo = mediaStream.getVideoTracks()[0];  \n      setInitialInputs([localAudio,localVideo]);\n      window.localAudio=localAudio;\n      setHasUserMedia(true);\n    } else {\n      setHasUserMedia(false);\n    }\n  }).catch( err => {\n    console.log(\"You got an error:\" + err);\n    setHasUserMedia(false);\n});\n\n}\n\n,[])\n\nuseEffect(()=>{\n  initialInputs && lobbyVideo.current && (lobbyVideo.current.srcObject=new MediaStream(initialInputs));\n  lobbyVideo.current.muted=true;\n  window.initialInputs=initialInputs;\n},[initialInputs]);\n    \n\n        // if(localAudio && localAudio.length > 0)\n        //     {\n        //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n        //     }\n        //     else {}:\n\n  \n  const handleChange = e => {\n    let newName = e.target.value;\n    setName(newName);\n}\n\n\n    return (\n    <div className='container'>\n\n        <div className='start-screen-background'></div>\n  \n        <div className='instructions'> \n            <div className='fixed-width'>\n          \n                <h2>Welcome to SecondBody.</h2>\n\n               \n\n                <div style={{position:'relative', marginLeft:'180px', marginRight:'180px', padding: '20px', paddingTop:'40px', border: '4px solid whitesmoke', backgroundColor:'white'}}>\n                      <div style={{background:'white',opacity:'1',zIndex:'1000'}}>\n                      \n                      \n                {hasUserMedia ? \n\n                    <video className='lobby-video' autoPlay={true} ref={lobbyVideo}/>\n                    :\n                    <p style={{height:'198px',width:'352px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder', boxSizing:'border-box',padding:'24px',border:'2px yellow solid'}}>\n                    ❌ Your camera / mic is blocked ❌<br/><br/>Please give this site access to your camera and mic, and then <u style={{cursor:'pointer'}} onClick={(()=>{window.location.reload()})}>refresh the page.</u>\n                    <br/><br/>\n                    How?\n                    <br/>\n                    <ul>\n                      <li>\n                          <a target='_blank' href='https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?'>\n                          Option 1\n                          </a>\n                      </li>\n                      <li>\n                          <a href={'https://youtu.be/GceAjizU5WU?t=39'}  target='_blank'>Option 2</a>\n                      </li>\n                      </ul>\n                      </p>\n                  }\n                      \n                      \n\n             {/* <img src={Unblock} style={{width:'100px'}} /> */}\n                      \n                      \n                      {lobbyVideo.current && hasUserMedia && (\n                          <div style={{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px', width:'250px',height:'0px',margin:'auto'}}>\n                              <div >\n                                <p className=\"selector-button\" onClick={()=>{setShowCamSettings(!showCamSettings)}} ref={camCaret}>Select Camera ^</p>\n                                    {showCamSettings ? \n                                    (<div onClick={()=>setShowCamSettings(false)}style={{position:'relative',bottom:'0px',left:'80px'}}>\n                                      <InputSelector type='video' page='intro' inputs={[initialInputs,setInitialInputs]} ref={camSettings} />\n                                    </div>)\n                                    : \n                                    null}\n                              </div>\n                              <div style={{width:'15px'}}></div>\n\n                              <div>\n                                <p className=\"selector-button\" onClick={()=>{setShowMicSettings(!showMicSettings)}} ref={micCaret}>Select Mic ^</p>\n                                    {showMicSettings ? \n                                      (<div onClick={()=>setShowMicSettings(false)} style={{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}}>\n                                        <InputSelector type='audio' page='intro' ref={micSettings}  inputs={[initialInputs,setInitialInputs]}/>\n                                      </div>)\n                                    : \n                                    null}\n                              </div>\n                          </div>\n                      )}\n\n                  </div>\n                    \n                 { hasUserMedia && (\n                    <h4 className='signin'>\n            \n                        <form onSubmit={(e)=>e.preventDefault()}>\n                            <input type=\"text\" autoComplete=\"off\" style={{backgroundColor: 'rgb(230, 240, 249)', fontSize:'15px', width: '200px', height: '30px', textAlign:'center', fontFamily:'poppins'}} ref={userIDEl} value={myState.name} onFocus={()=> {if (myState.name==='Your first name') {setName('')}}} onChange={e=>handleChange(e)} /><br/><br/>\n                            <input className='new-card' style={{width:'150px', color:'#1b8bc4', fontSize: '17px'}} type=\"submit\" type=\"submit\" value='Enter session' onClick={setMyName} />\n                        </form>\n\n                        <br/>\n                    </h4>\n                  )}\n                    \n                </div>\n        \n  \n            </div>\n        </div>\n  \n    \n  \n       \n    </div>\n    );\n  }\n\n              \n                \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}