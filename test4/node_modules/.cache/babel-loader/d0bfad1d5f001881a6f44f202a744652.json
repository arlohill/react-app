{"ast":null,"code":"var _jsxFileName = \"/Users/arlosb/Documents/GitHub/new react app/test3/src/components/StartScreen/StartScreen.js\";\nimport React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\nimport MyContext from '../../MyContext'; //   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n/**\n * Props:\n * -\n * -\n */\n\nexport default function StartScreen(props) {\n  const {\n    myState\n  } = useContext(MyContext);\n  const [my, setMy] = myState;\n  const userIDEl = useRef(null);\n  const [showMicSettings, setShowMicSettings] = useState(false);\n  const [showCamSettings, setShowCamSettings] = useState(false);\n  const begin = props.onClick; // const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\n  // const [ userID, setUserID ] = useState('Your first name');\n\n  const lobbyVideo = useRef(null);\n  const micCaret = React.createRef();\n  const micSettings = React.createRef();\n  const camCaret = React.createRef();\n  const camSettings = React.createRef();\n  const [initialInputs, setInitialInputs] = useState(null);\n  const [hasUserMedia, setHasUserMedia] = useState(true);\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside); ///temp\n\n    window.testMy = my;\n    return function cleanup() {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n\n  const handleClickOutside = event => {\n    console.log('handling click');\n\n    if (micSettings.current && !micSettings.current.contains(event.target) && !micCaret.current.contains(event.target)) {\n      setShowMicSettings(false);\n    } else if (camSettings.current && !camSettings.current.contains(event.target) && !camCaret.current.contains(event.target)) {\n      setShowCamSettings(false);\n    }\n  }; //   if (parent.myRole.includes('Viewer')) {\n  //     document.getElementById('welcome-instructions').innerHTML='You are in view-only mode. <br/><br/>Click below to enter. <br/><br/>  <button class=\"new-card\" id=\"enter-button\" onclick=\"setUserID()\">Enter session</button>'\n  //   }\n  // useEffect(()=> {\n  //     if(window.myRole==='Admin') {\n  //         window.myName='Admin';\n  //         begin();\n  //     };\n  //     },[])\n\n\n  function setMyName() {\n    console.log('setting user ID as ' + my.name); //   if (parent.myRole.includes('Viewer')) {   //enter session immediately if no need to enter name\n    //     begin();\n    //     return;\n    //   }\n\n    if (my.name === '' || my.name === 'Your first name' || my.name.length <= 1) {\n      alert('Please enter your name to help your partner identify you.');\n    } else {\n      window.myName = my.name; // setMy((prev)=>({\n      //   ...prev,\n      //   name: my.name,\n      // }));\n\n      begin();\n    }\n  }\n\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: {\n        width: 1280,\n        height: 720\n      }\n    }).then(mediaStream => {\n      if (mediaStream) {\n        window.mediaStream = mediaStream;\n        let localAudio = mediaStream.getAudioTracks()[0];\n        let localVideo = mediaStream.getVideoTracks()[0];\n        setInitialInputs([localAudio, localVideo]);\n        window.localAudio = localAudio;\n        setHasUserMedia(true);\n      } else {\n        setHasUserMedia(false);\n      }\n    }).catch(err => {\n      console.log(\"You got an error:\" + err);\n      setHasUserMedia(false);\n    });\n  }, []);\n  useEffect(() => {\n    initialInputs && lobbyVideo.current && (lobbyVideo.current.srcObject = new MediaStream(initialInputs));\n    lobbyVideo.current.muted = true;\n    window.initialInputs = initialInputs;\n  }, [initialInputs]); // if(localAudio && localAudio.length > 0)\n  //     {\n  //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n  //     }\n  //     else {}:\n\n  function updateName(e) {\n    // setUserID(e.target.value);\n    // window.userID=userID;\n    setMy(prevState => ({ ...prevState,\n      name: e.target.value\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"start-screen-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fixed-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, \"Welcome to SecondBody.\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative',\n      marginLeft: '180px',\n      marginRight: '180px',\n      padding: '20px',\n      paddingTop: '40px',\n      border: '4px solid whitesmoke',\n      backgroundColor: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: 'white',\n      opacity: '1',\n      zIndex: '1000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 23\n    }\n  }, hasUserMedia ? /*#__PURE__*/React.createElement(\"video\", {\n    className: \"lobby-video\",\n    autoPlay: true,\n    ref: lobbyVideo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      height: '198px',\n      width: '352px',\n      borderRadius: '20px',\n      background: 'black',\n      margin: 'auto',\n      color: 'white',\n      fontWeight: 'bolder',\n      boxSizing: 'border-box',\n      padding: '24px',\n      border: '2px yellow solid'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, \"\\u274C Your camera / mic is blocked \\u274C\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 53\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 58\n    }\n  }), \"Please give this site access to your camera and mic, and then \", /*#__PURE__*/React.createElement(\"u\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => {\n      window.location.reload();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 125\n    }\n  }, \"refresh the page.\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 26\n    }\n  }), \"How?\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    target: \"_blank\",\n    href: \"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 27\n    }\n  }, \"Option 1\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: 'https://youtu.be/GceAjizU5WU?t=39',\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 27\n    }\n  }, \"Option 2\")))), lobbyVideo.current && hasUserMedia && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative',\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'center',\n      bottom: '40px',\n      width: '250px',\n      height: '0px',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selector-button\",\n    onClick: () => {\n      setShowCamSettings(!showCamSettings);\n    },\n    ref: camCaret,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 33\n    }\n  }, \"Select Camera ^\"), showCamSettings ? /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setShowCamSettings(false),\n    style: {\n      position: 'relative',\n      bottom: '0px',\n      left: '80px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 38\n    }\n  }, /*#__PURE__*/React.createElement(InputSelector, {\n    type: \"video\",\n    page: \"intro\",\n    inputs: [initialInputs, setInitialInputs],\n    ref: camSettings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 39\n    }\n  })) : null), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '15px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"selector-button\",\n    onClick: () => {\n      setShowMicSettings(!showMicSettings);\n    },\n    ref: micCaret,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 33\n    }\n  }, \"Select Mic ^\"), showMicSettings ? /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setShowMicSettings(false),\n    style: {\n      position: 'relative',\n      bottom: '0px',\n      left: '72px',\n      overflowY: 'visible'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 40\n    }\n  }, /*#__PURE__*/React.createElement(InputSelector, {\n    type: \"audio\",\n    page: \"intro\",\n    ref: micSettings,\n    inputs: [initialInputs, setInitialInputs],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 41\n    }\n  })) : null))), hasUserMedia && /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    autoComplete: \"off\",\n    style: {\n      backgroundColor: 'rgb(230, 240, 249)',\n      fontSize: '15px',\n      width: '200px',\n      height: '30px',\n      textAlign: 'center',\n      fontFamily: 'poppins'\n    },\n    ref: userIDEl,\n    value: my.name,\n    onFocus: () => {\n      if (my.name === 'Your first name') {\n        setMy(prevState => ({ ...prevState,\n          name: ''\n        }));\n      }\n    },\n    onChange: e => updateName(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 372\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 377\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"new-card\",\n    style: {\n      width: '150px',\n      color: '#1b8bc4',\n      fontSize: '17px'\n    },\n    type: \"submit\",\n    type: \"submit\",\n    value: \"Enter session\",\n    onClick: setMyName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 25\n    }\n  }))))));\n}","map":{"version":3,"sources":["/Users/arlosb/Documents/GitHub/new react app/test3/src/components/StartScreen/StartScreen.js"],"names":["React","useEffect","useRef","useContext","useState","InputSelector","MyContext","StartScreen","props","myState","my","setMy","userIDEl","showMicSettings","setShowMicSettings","showCamSettings","setShowCamSettings","begin","onClick","lobbyVideo","micCaret","createRef","micSettings","camCaret","camSettings","initialInputs","setInitialInputs","hasUserMedia","setHasUserMedia","document","addEventListener","handleClickOutside","window","testMy","cleanup","removeEventListener","event","console","log","current","contains","target","setMyName","name","length","alert","myName","navigator","mediaDevices","getUserMedia","audio","video","width","height","then","mediaStream","localAudio","getAudioTracks","localVideo","getVideoTracks","catch","err","srcObject","MediaStream","muted","updateName","e","prevState","value","position","marginLeft","marginRight","padding","paddingTop","border","backgroundColor","background","opacity","zIndex","borderRadius","margin","color","fontWeight","boxSizing","cursor","location","reload","display","flexDirection","justifyContent","bottom","left","overflowY","preventDefault","fontSize","textAlign","fontFamily"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\nimport MyContext from '../../MyContext';\n\n\n\n//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n\n/**\n * Props:\n * -\n * -\n */\n export default function StartScreen(props) {\n    const { myState } = useContext(MyContext);\n    const [ my,setMy] = myState;\n    const userIDEl = useRef(null);\n    const [showMicSettings,setShowMicSettings] = useState(false);\n    const [showCamSettings,setShowCamSettings] = useState(false);\n    const begin = props.onClick;\n    // const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\n    // const [ userID, setUserID ] = useState('Your first name');\n    const lobbyVideo = useRef(null);\n    const micCaret = React.createRef();\n    const micSettings = React.createRef();\n    const camCaret = React.createRef();\n    const camSettings = React.createRef();\n    const [initialInputs,setInitialInputs] = useState(null);\n    const [hasUserMedia,setHasUserMedia] = useState(true);\n\n\n    useEffect(()=> {\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      ///temp\n      window.testMy = my;\n  \n  \n   return function cleanup() {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    })\n\n    const handleClickOutside = (event) => {\n      console.log('handling click');\n      if (micSettings.current &&\n        !micSettings.current.contains(event.target) &&\n        !micCaret.current.contains(event.target)\n      ) {\n        setShowMicSettings(false);\n      } else if (camSettings.current &&\n        !camSettings.current.contains(event.target) &&\n        !camCaret.current.contains(event.target)\n      ) {\n        setShowCamSettings(false);\n      } \n      \n    }\n \n    \n\n    //   if (parent.myRole.includes('Viewer')) {\n//     document.getElementById('welcome-instructions').innerHTML='You are in view-only mode. <br/><br/>Click below to enter. <br/><br/>  <button class=\"new-card\" id=\"enter-button\" onclick=\"setUserID()\">Enter session</button>'\n//   }\n\n// useEffect(()=> {\n//     if(window.myRole==='Admin') {\n//         window.myName='Admin';\n//         begin();\n//     };\n//     },[])\n\n  function setMyName() {\n      console.log('setting user ID as ' + my.name);\n    //   if (parent.myRole.includes('Viewer')) {   //enter session immediately if no need to enter name\n    //     begin();\n    //     return;\n    //   }\n      if (my.name === '' || my.name==='Your first name' || my.name.length<=1) {\n        alert('Please enter your name to help your partner identify you.')\n      } else {\n        window.myName=my.name;\n        // setMy((prev)=>({\n        //   ...prev,\n        //   name: my.name,\n        // }));\n        begin();\n      }\n  }\nuseEffect(()=>{\n  navigator.mediaDevices.getUserMedia({audio:true,video:{width: 1280,height: 720}}).then((mediaStream)=>{\n    if(mediaStream){\n      window.mediaStream = mediaStream;\n      let localAudio = mediaStream.getAudioTracks()[0];\n      let localVideo = mediaStream.getVideoTracks()[0];  \n      setInitialInputs([localAudio,localVideo]);\n      window.localAudio=localAudio;\n      setHasUserMedia(true);\n    } else {\n      setHasUserMedia(false);\n    }\n  }).catch( err => {\n    console.log(\"You got an error:\" + err);\n    setHasUserMedia(false);\n});\n\n}\n\n,[])\n\nuseEffect(()=>{\n  initialInputs && lobbyVideo.current && (lobbyVideo.current.srcObject=new MediaStream(initialInputs));\n  lobbyVideo.current.muted=true;\n  window.initialInputs=initialInputs;\n},[initialInputs]);\n    \n\n        // if(localAudio && localAudio.length > 0)\n        //     {\n        //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n        //     }\n        //     else {}:\n\n  \n  function updateName(e) {\n    // setUserID(e.target.value);\n    // window.userID=userID;\n    setMy((prevState)=>({\n                          ...prevState,\n                          name: e.target.value,\n                        })\n          );\n}\n\n\n    return (\n    <div className='container'>\n\n        <div className='start-screen-background'></div>\n  \n        <div className='instructions'> \n            <div className='fixed-width'>\n          \n                <h2>Welcome to SecondBody.</h2>\n\n               \n\n                <div style={{position:'relative', marginLeft:'180px', marginRight:'180px', padding: '20px', paddingTop:'40px', border: '4px solid whitesmoke', backgroundColor:'white'}}>\n                      <div style={{background:'white',opacity:'1',zIndex:'1000'}}>\n                      \n                      \n                {hasUserMedia ? \n\n                    <video className='lobby-video' autoPlay={true} ref={lobbyVideo}/>\n                    :\n                    <p style={{height:'198px',width:'352px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder', boxSizing:'border-box',padding:'24px',border:'2px yellow solid'}}>\n                    ❌ Your camera / mic is blocked ❌<br/><br/>Please give this site access to your camera and mic, and then <u style={{cursor:'pointer'}} onClick={(()=>{window.location.reload()})}>refresh the page.</u>\n                    <br/><br/>\n                    How?\n                    <br/>\n                    <ul>\n                      <li>\n                          <a target='_blank' href='https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?'>\n                          Option 1\n                          </a>\n                      </li>\n                      <li>\n                          <a href={'https://youtu.be/GceAjizU5WU?t=39'}  target='_blank'>Option 2</a>\n                      </li>\n                      </ul>\n                      </p>\n                  }\n                      \n                      \n\n             {/* <img src={Unblock} style={{width:'100px'}} /> */}\n                      \n                      \n                      {lobbyVideo.current && hasUserMedia && (\n                          <div style={{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px', width:'250px',height:'0px',margin:'auto'}}>\n                              <div >\n                                <p className=\"selector-button\" onClick={()=>{setShowCamSettings(!showCamSettings)}} ref={camCaret}>Select Camera ^</p>\n                                    {showCamSettings ? \n                                    (<div onClick={()=>setShowCamSettings(false)}style={{position:'relative',bottom:'0px',left:'80px'}}>\n                                      <InputSelector type='video' page='intro' inputs={[initialInputs,setInitialInputs]} ref={camSettings} />\n                                    </div>)\n                                    : \n                                    null}\n                              </div>\n                              <div style={{width:'15px'}}></div>\n\n                              <div>\n                                <p className=\"selector-button\" onClick={()=>{setShowMicSettings(!showMicSettings)}} ref={micCaret}>Select Mic ^</p>\n                                    {showMicSettings ? \n                                      (<div onClick={()=>setShowMicSettings(false)} style={{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}}>\n                                        <InputSelector type='audio' page='intro' ref={micSettings}  inputs={[initialInputs,setInitialInputs]}/>\n                                      </div>)\n                                    : \n                                    null}\n                              </div>\n                          </div>\n                      )}\n\n                  </div>\n                    \n                 { hasUserMedia && (\n                    <h4 className='signin'>\n            \n                        <form onSubmit={(e)=>e.preventDefault()}>\n                            <input type=\"text\" autoComplete=\"off\" style={{backgroundColor: 'rgb(230, 240, 249)', fontSize:'15px', width: '200px', height: '30px', textAlign:'center', fontFamily:'poppins'}} ref={userIDEl} value={my.name} onFocus={()=> {if (my.name==='Your first name') {setMy((prevState)=>({...prevState,name: '',}));}   }} onChange={(e)=>updateName(e)} /><br/><br/>\n                            <input className='new-card' style={{width:'150px', color:'#1b8bc4', fontSize: '17px'}} type=\"submit\" type=\"submit\" value='Enter session' onClick={setMyName} />\n                        </form>\n\n                        <br/>\n                    </h4>\n                  )}\n                    \n                </div>\n        \n  \n            </div>\n        </div>\n  \n    \n  \n       \n    </div>\n    );\n  }\n\n              \n                \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}