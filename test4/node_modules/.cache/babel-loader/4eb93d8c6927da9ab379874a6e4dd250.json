{"ast":null,"code":"import _defineProperty from\"/Users/arlosb/Documents/GitHub/new react app/test4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/arlosb/Documents/GitHub/new react app/test4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useContext,useState}from'react';import'./StartScreen.css';import InputSelector from'../InputSelector/InputSelector';import MyContext from'../../../MyContext';import Logo from'../../../assets/LivestormSecondBody.png';//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n/**\n * Props:\n * -\n * -\n */export default function StartScreen(props){var _React$createElement;var userIDEl=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMicSettings=_useState2[0],setShowMicSettings=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCamSettings=_useState4[0],setShowCamSettings=_useState4[1];var begin=props.onClick;var lobbyVideo=useRef(null);var micCaret=React.createRef();var micSettings=React.createRef();var camCaret=React.createRef();var camSettings=React.createRef();var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),initialInputs=_useState6[0],setInitialInputs=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),hasUserMedia=_useState8[0],setHasUserMedia=_useState8[1];var _useContext=useContext(MyContext),myStateArray=_useContext.myStateArray,setName=_useContext.setName,setRole=_useContext.setRole,setUserList=_useContext.setUserList,setViewMode=_useContext.setViewMode,setCamOnAtSessionStart=_useContext.setCamOnAtSessionStart,setMicOnAtSessionStart=_useContext.setMicOnAtSessionStart,setAmAdmin=_useContext.setAmAdmin,setNumber=_useContext.setNumber;var _myStateArray=_slicedToArray(myStateArray,2),myState=_myStateArray[0],setMyState=_myStateArray[1];var usersWithAccess=['Arlo','Omid','Jennifer','Sam','Julia','Marissa','Benjamin','SÃ©bastien','Bryan'];useEffect(function(){document.addEventListener(\"mousedown\",handleClickOutside);return function cleanup(){document.removeEventListener(\"mousedown\",handleClickOutside);};});var handleClickOutside=function handleClickOutside(event){console.log('handling click');if(micSettings.current&&!micSettings.current.contains(event.target)&&!micCaret.current.contains(event.target)){setShowMicSettings(false);}else if(camSettings.current&&!camSettings.current.contains(event.target)&&!camCaret.current.contains(event.target)){setShowCamSettings(false);}};function setMyName(){console.log('setting user ID as '+myState.name);if(usersWithAccess.includes(myState.name)){myState.name=myState.role==='Admin'?myState.name+'_Admin':myState.name;//apend '_Admin\" to my name if I'm an admin\nwindow.myName=myState.name;//todo: delete. for debugging purposes.\nbegin();}else if(myState.name==='Username'||myState.name===''){alert('Please enter your username.');}else{alert(\"Sorry, username \\\"\".concat(myState.name,\"\\\" does not have access to this meeting.\"));}}useEffect(function(){navigator.mediaDevices.getUserMedia({audio:true,video:{width:1280,height:720}}).then(function(mediaStream){if(mediaStream){window.mediaStream=mediaStream;var localAudio=mediaStream.getAudioTracks()[0];var localVideo=mediaStream.getVideoTracks()[0];setInitialInputs([localAudio,localVideo]);window.localAudio=localAudio;setHasUserMedia(true);}else{setHasUserMedia(false);}}).catch(function(err){console.log(\"You got an error:\"+err);setHasUserMedia(false);});},[]);useEffect(function(){initialInputs&&lobbyVideo.current&&(lobbyVideo.current.srcObject=new MediaStream(initialInputs));lobbyVideo.current.muted=true;window.initialInputs=initialInputs;},[initialInputs]);// if(localAudio && localAudio.length > 0)\n//     {\n//       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n//     }\n//     else {}:\nvar handleChange=function handleChange(e){var newName=e.target.value;setName(newName);};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"start-screen-background\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"instructions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-width\"},/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',marginLeft:'180px',marginTop:'50px',marginRight:'180px',padding:'20px',paddingTop:'40px',border:'4px solid whitesmoke',backgroundColor:'white'}},/*#__PURE__*/React.createElement(\"img\",{src:Logo,style:{width:'220px',paddingBottom:'25px'}}),/*#__PURE__*/React.createElement(\"div\",{style:{background:'white',opacity:'1',zIndex:'1000'}},hasUserMedia?/*#__PURE__*/React.createElement(\"video\",{className:\"lobby-video\",autoPlay:true,ref:lobbyVideo}):/*#__PURE__*/React.createElement(\"p\",{style:{height:'198px',width:'352px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder',boxSizing:'border-box',padding:'24px',border:'2px yellow solid'}},\"\\u274C Your camera / mic is blocked \\u274C\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then \",/*#__PURE__*/React.createElement(\"u\",{style:{cursor:'pointer'},onClick:function onClick(){window.location.reload();}},\"refresh the page.\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"How?\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:'https://youtu.be/GceAjizU5WU?t=39',target:\"_blank\"},\"Option 2\")))),lobbyVideo.current&&hasUserMedia&&/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px',width:'250px',height:'0px',margin:'auto'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowCamSettings(!showCamSettings);},ref:camCaret},\"Select Camera ^\"),showCamSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowCamSettings(false);},style:{position:'relative',bottom:'0px',left:'80px'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"video\",page:\"intro\",inputs:[initialInputs,setInitialInputs],ref:camSettings})):null),/*#__PURE__*/React.createElement(\"div\",{style:{width:'15px'}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowMicSettings(!showMicSettings);},ref:micCaret},\"Select Mic ^\"),showMicSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowMicSettings(false);},style:{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"audio\",page:\"intro\",ref:micSettings,inputs:[initialInputs,setInitialInputs]})):null))),hasUserMedia&&/*#__PURE__*/React.createElement(\"h4\",{className:\"signin\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return e.preventDefault();}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:'rgb(230, 240, 249)',fontSize:'15px',width:'200px',height:'30px',textAlign:'center',fontFamily:'poppins'},ref:userIDEl,value:myState.name,onFocus:function onFocus(){if(myState.name==='Username'){setName('');}},onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",(_React$createElement={className:\"new-card\",style:{width:'150px',color:'#1b8bc4',fontSize:'17px'},type:\"submit\"},_defineProperty(_React$createElement,\"type\",\"submit\"),_defineProperty(_React$createElement,\"value\",\"Enter session\"),_defineProperty(_React$createElement,\"onClick\",setMyName),_React$createElement))),/*#__PURE__*/React.createElement(\"br\",null))))));}","map":null,"metadata":{},"sourceType":"module"}