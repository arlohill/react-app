{"ast":null,"code":"import _defineProperty from\"/Users/arlosb/Documents/GitHub/new react app/test3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/arlosb/Documents/GitHub/new react app/test3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useContext,useState}from'react';import'./StartScreen.css';import InputSelector from'../InputSelector/InputSelector';//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n/**\n * Props:\n * -\n * -\n */export default function StartScreen(props){var _React$createElement;var userIDEl=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMicSettings=_useState2[0],setShowMicSettings=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCamSettings=_useState4[0],setShowCamSettings=_useState4[1];var begin=props.onClick;// const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\nvar _useState5=useState('Your first name'),_useState6=_slicedToArray(_useState5,2),userID=_useState6[0],setUserID=_useState6[1];var lobbyVideo=useRef(null);var micCaret=React.createRef();var micSettings=React.createRef();var camCaret=React.createRef();var camSettings=React.createRef();var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),initialInputs=_useState8[0],setInitialInputs=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),hasUserMedia=_useState10[0],setHasUserMedia=_useState10[1];useEffect(function(){document.addEventListener(\"mousedown\",handleClickOutside);return function cleanup(){document.removeEventListener(\"mousedown\",handleClickOutside);};});var handleClickOutside=function handleClickOutside(event){console.log('handling click');if(micSettings.current&&!micSettings.current.contains(event.target)&&!micCaret.current.contains(event.target)){setShowMicSettings(false);}else if(camSettings.current&&!camSettings.current.contains(event.target)&&!camCaret.current.contains(event.target)){setShowCamSettings(false);}};//   if (parent.myRole.includes('Viewer')) {\n//     document.getElementById('welcome-instructions').innerHTML='You are in view-only mode. <br/><br/>Click below to enter. <br/><br/>  <button class=\"new-card\" id=\"enter-button\" onclick=\"setUserID()\">Enter session</button>'\n//   }\n// useEffect(()=> {\n//     if(window.myRole==='Admin') {\n//         window.myName='Admin';\n//         begin();\n//     };\n//     },[])\nfunction setMyName(){console.log('setting user ID as '+userID);//   if (parent.myRole.includes('Viewer')) {   //enter session immediately if no need to enter name\n//     begin();\n//     return;\n//   }\nif(userID===''||userID==='Your first name'||userID.length<=1){alert('Please enter your name to help your partner identify you.');}else{console.log('***GOT HERE***');window.myName=userID;begin();}}useEffect(function(){navigator.mediaDevices.getUserMedia({audio:true,video:true}).then(function(mediaStream){if(mediaStream){window.mediaStream=mediaStream;var localAudio=mediaStream.getAudioTracks();var localVideo=mediaStream.getVideoTracks();setInitialInputs([localAudio[0],localVideo[0]]);window.localAudio=localAudio[0];setHasUserMedia(true);}else{setHasUserMedia(false);}}).catch(function(err){console.log(\"You got an error:\"+err);setHasUserMedia(false);});},[]);useEffect(function(){initialInputs&&lobbyVideo.current&&(lobbyVideo.current.srcObject=new MediaStream(initialInputs));lobbyVideo.current.muted=true;window.initialInputs=initialInputs;},[initialInputs]);// if(localAudio && localAudio.length > 0)\n//     {\n//       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n//     }\n//     else {}:\nfunction onFieldChange(value){setUserID(value);window.userID=userID;}return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"start-screen-background\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"instructions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-width\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Welcome to SecondBody.\"),/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',marginLeft:'180px',marginRight:'180px',padding:'20px',border:'4px solid whitesmoke'}},/*#__PURE__*/React.createElement(\"div\",{style:{background:'white',opacity:'1',zIndex:'1000'}},hasUserMedia?/*#__PURE__*/React.createElement(\"video\",{autoPlay:true,ref:lobbyVideo,style:{height:'180px',width:'320px',objectFit:'cover',borderRadius:'20px',background:'white',zIndex:'99'}}):/*#__PURE__*/React.createElement(\"p\",{style:{height:'180px',width:'320px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder',boxSizing:'border-box',padding:'20px',border:'2px yellow solid'}},\"\\u274C Your camera / mic is blocked \\u274C\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then refresh.\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"How?\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:'https://youtu.be/GceAjizU5WU?t=39',target:\"_blank\"},\"Option 2\")))),lobbyVideo.current&&lobbyVideo.current.srcObject&&hasUserMedia&&/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px',width:'250px',height:'10px',margin:'auto'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowCamSettings(!showCamSettings);},ref:camCaret},\"Select Camera ^\"),showCamSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowCamSettings(false);},style:{position:'relative',bottom:'0px',left:'80px'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"video\",page:\"intro\",inputs:[initialInputs,setInitialInputs],ref:camSettings})):null),/*#__PURE__*/React.createElement(\"div\",{style:{width:'15px'}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowMicSettings(!showMicSettings);},ref:micCaret},\"Select Mic ^\"),showMicSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowMicSettings(false);},style:{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"audio\",page:\"intro\",ref:micSettings,inputs:[initialInputs,setInitialInputs]})):null))),hasUserMedia&&/*#__PURE__*/React.createElement(\"h4\",{id:\"welcome-instructions\"},/*#__PURE__*/React.createElement(\"form\",{id:\"form\",onSubmit:function onSubmit(e){return e.preventDefault();}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:'rgb(230, 240, 249)',fontSize:'15px',width:'200px',height:'30px',textAlign:'center',fontFamily:'poppins'},ref:userIDEl,value:userID,onFocus:function onFocus(){if(userID==='Your first name'){setUserID('');}},onChange:function onChange(e){return onFieldChange(e.target.value);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",(_React$createElement={className:\"new-card\",style:{width:'150px',color:'#1b8bc4',fontSize:'17px'},type:\"submit\"},_defineProperty(_React$createElement,\"type\",\"submit\"),_defineProperty(_React$createElement,\"value\",\"Enter session\"),_defineProperty(_React$createElement,\"onClick\",setMyName),_React$createElement))),/*#__PURE__*/React.createElement(\"br\",null))))));}","map":{"version":3,"sources":["/Users/arlosb/Documents/GitHub/new react app/test3/src/components/StartScreen/StartScreen.js"],"names":["React","useEffect","useRef","useContext","useState","InputSelector","StartScreen","props","userIDEl","showMicSettings","setShowMicSettings","showCamSettings","setShowCamSettings","begin","onClick","userID","setUserID","lobbyVideo","micCaret","createRef","micSettings","camCaret","camSettings","initialInputs","setInitialInputs","hasUserMedia","setHasUserMedia","document","addEventListener","handleClickOutside","cleanup","removeEventListener","event","console","log","current","contains","target","setMyName","length","alert","window","myName","navigator","mediaDevices","getUserMedia","audio","video","then","mediaStream","localAudio","getAudioTracks","localVideo","getVideoTracks","catch","err","srcObject","MediaStream","muted","onFieldChange","value","position","marginLeft","marginRight","padding","border","background","opacity","zIndex","height","width","objectFit","borderRadius","margin","color","fontWeight","boxSizing","display","flexDirection","justifyContent","bottom","left","overflowY","e","preventDefault","backgroundColor","fontSize","textAlign","fontFamily"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\n\n\n\n//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n\n/**\n * Props:\n * -\n * -\n */\n export default function StartScreen(props) {\n\n    const userIDEl = useRef(null);\n    const [showMicSettings,setShowMicSettings] = useState(false);\n    const [showCamSettings,setShowCamSettings] = useState(false);\n    const begin = props.onClick;\n    // const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\n    const [ userID, setUserID ] = useState('Your first name');\n    const lobbyVideo = useRef(null);\n    const micCaret = React.createRef();\n    const micSettings = React.createRef();\n    const camCaret = React.createRef();\n    const camSettings = React.createRef();\n    const [initialInputs,setInitialInputs] = useState([]);\n    const [hasUserMedia,setHasUserMedia] = useState(true);\n\n\n    useEffect(()=> {\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n  \n  \n   return function cleanup() {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    })\n\n    const handleClickOutside = (event) => {\n      console.log('handling click');\n      if (micSettings.current &&\n        !micSettings.current.contains(event.target) &&\n        !micCaret.current.contains(event.target)\n      ) {\n        setShowMicSettings(false);\n      } else if (camSettings.current &&\n        !camSettings.current.contains(event.target) &&\n        !camCaret.current.contains(event.target)\n      ) {\n        setShowCamSettings(false);\n      } \n      \n    }\n \n    \n\n    //   if (parent.myRole.includes('Viewer')) {\n//     document.getElementById('welcome-instructions').innerHTML='You are in view-only mode. <br/><br/>Click below to enter. <br/><br/>  <button class=\"new-card\" id=\"enter-button\" onclick=\"setUserID()\">Enter session</button>'\n//   }\n\n// useEffect(()=> {\n//     if(window.myRole==='Admin') {\n//         window.myName='Admin';\n//         begin();\n//     };\n//     },[])\n\n  function setMyName() {\n      console.log('setting user ID as ' + userID);\n    //   if (parent.myRole.includes('Viewer')) {   //enter session immediately if no need to enter name\n    //     begin();\n    //     return;\n    //   }\n      if (userID === '' || userID==='Your first name' || userID.length<=1) {\n        alert('Please enter your name to help your partner identify you.')\n      } else {\n          console.log('***GOT HERE***');\n        window.myName=userID;\n        begin();\n      }\n  }\nuseEffect(()=>{\n  navigator.mediaDevices.getUserMedia({audio:true,video:true}).then((mediaStream)=>{\n    if(mediaStream){\n      window.mediaStream = mediaStream;\n      let localAudio = mediaStream.getAudioTracks();\n      let localVideo = mediaStream.getVideoTracks();  \n      setInitialInputs([localAudio[0],localVideo[0]]);\n      window.localAudio=localAudio[0];\n      setHasUserMedia(true);\n    } else {\n      setHasUserMedia(false);\n    }\n  }).catch( err => {\n    console.log(\"You got an error:\" + err);\n    setHasUserMedia(false);\n});\n\n}\n\n,[])\n\nuseEffect(()=>{\n  initialInputs && lobbyVideo.current && (lobbyVideo.current.srcObject=new MediaStream(initialInputs));\n  lobbyVideo.current.muted=true;\n  window.initialInputs=initialInputs;\n},[initialInputs]);\n    \n\n        // if(localAudio && localAudio.length > 0)\n        //     {\n        //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n        //     }\n        //     else {}:\n\n  \n  function onFieldChange(value) {\n    setUserID(value);\n    window.userID=userID;\n}\n\n\n    return (\n    <div className='container'>\n\n        <div className='start-screen-background'></div>\n  \n        <div className='instructions'> \n            <div className='fixed-width'>\n          \n                <h2>Welcome to SecondBody.</h2>\n\n               \n\n                <div style={{position:'relative', marginLeft:'180px', marginRight:'180px', padding: '20px', border: '4px solid whitesmoke'}}>\n                  <div style={{background:'white',opacity:'1',zIndex:'1000'}}>\n\n                      {hasUserMedia ? \n                        <video autoPlay={true} ref={lobbyVideo} style={{height:'180px',width:'320px',objectFit: 'cover', borderRadius:'20px', background:'white',zIndex:'99'}} />\n                        :\n                        <p style={{height:'180px',width:'320px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder', boxSizing:'border-box',padding:'20px',border:'2px yellow solid'}}>\n                        ❌ Your camera / mic is blocked ❌<br/><br/>Please give this site access to your camera and mic, and then refresh.\n                        <br/><br/>\n                        How?\n                        <br/>\n                        <ul>\n                          <li>\n                              <a target='_blank' href='https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?'>\n                              Option 1\n                              </a>\n                          </li>\n                          <li>\n                              <a href={'https://youtu.be/GceAjizU5WU?t=39'}  target='_blank'>Option 2</a>\n                          </li>\n                          </ul>\n                          </p>\n                      }\n                      \n\n             {/* <img src={Unblock} style={{width:'100px'}} /> */}\n                      \n                      \n                      {lobbyVideo.current && lobbyVideo.current.srcObject && hasUserMedia && (\n                          <div style={{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px', width:'250px',height:'10px',margin:'auto'}}>\n                              <div >\n                                <p className=\"selector-button\" onClick={()=>{setShowCamSettings(!showCamSettings)}} ref={camCaret}>Select Camera ^</p>\n                                    {showCamSettings ? \n                                    (<div onClick={()=>setShowCamSettings(false)}style={{position:'relative',bottom:'0px',left:'80px'}}>\n                                      <InputSelector type='video' page='intro' inputs={[initialInputs,setInitialInputs]} ref={camSettings} />\n                                    </div>)\n                                    : \n                                    null}\n                              </div>\n                              <div style={{width:'15px'}}></div>\n\n                              <div>\n                                <p className=\"selector-button\" onClick={()=>{setShowMicSettings(!showMicSettings)}} ref={micCaret}>Select Mic ^</p>\n                                    {showMicSettings ? \n                                      (<div onClick={()=>setShowMicSettings(false)} style={{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}}>\n                                        <InputSelector type='audio' page='intro' ref={micSettings}  inputs={[initialInputs,setInitialInputs]}/>\n                                      </div>)\n                                    : \n                                    null}\n                              </div>\n                          </div>\n                      )}\n\n                  </div>\n                    \n                 { hasUserMedia && (\n                    <h4 id='welcome-instructions'>\n            \n                        <form id='form' onSubmit={(e)=>e.preventDefault()}>\n                            {/* <label for=\"userID\"></label><br/><br/> */}\n                            <input type=\"text\" autoComplete=\"off\" style={{backgroundColor: 'rgb(230, 240, 249)', fontSize:'15px', width: '200px', height: '30px', textAlign:'center', fontFamily:'poppins'}} ref={userIDEl} value={userID} onFocus={()=> {if (userID==='Your first name') {setUserID('')}}} onChange={e => onFieldChange(e.target.value)} /><br/><br/>\n                            <input className='new-card' style={{width:'150px', color:'#1b8bc4', fontSize: '17px'}} type=\"submit\" type=\"submit\" value='Enter session' onClick={setMyName} />\n                        </form>\n\n                        <br/>\n                    </h4>\n                  )}\n                    \n                </div>\n        \n  \n            </div>\n        </div>\n  \n    \n  \n       \n    </div>\n    );\n  }\n\n              \n                \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}