{"ast":null,"code":"import _defineProperty from\"/Users/arlosb/Documents/GitHub/new react app/test3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/arlosb/Documents/GitHub/new react app/test3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/arlosb/Documents/GitHub/new react app/test3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useContext,useState}from'react';import'./StartScreen.css';import InputSelector from'../InputSelector/InputSelector';import MyContext from'../../MyContext';//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n/**\n * Props:\n * -\n * -\n */export default function StartScreen(props){var _React$createElement;var _useContext=useContext(MyContext),myState=_useContext.myState;var _myState=_slicedToArray(myState,2),my=_myState[0],setMy=_myState[1];var userIDEl=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMicSettings=_useState2[0],setShowMicSettings=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCamSettings=_useState4[0],setShowCamSettings=_useState4[1];var begin=props.onClick;// const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\n// const [ userID, setUserID ] = useState('Your first name');\nvar lobbyVideo=useRef(null);var micCaret=React.createRef();var micSettings=React.createRef();var camCaret=React.createRef();var camSettings=React.createRef();var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),initialInputs=_useState6[0],setInitialInputs=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),hasUserMedia=_useState8[0],setHasUserMedia=_useState8[1];useEffect(function(){document.addEventListener(\"mousedown\",handleClickOutside);///temp\nwindow.testMy=my;return function cleanup(){document.removeEventListener(\"mousedown\",handleClickOutside);};});var handleClickOutside=function handleClickOutside(event){console.log('handling click');if(micSettings.current&&!micSettings.current.contains(event.target)&&!micCaret.current.contains(event.target)){setShowMicSettings(false);}else if(camSettings.current&&!camSettings.current.contains(event.target)&&!camCaret.current.contains(event.target)){setShowCamSettings(false);}};function setMyName(){console.log('setting user ID as '+my.name);if(my.name===''||my.name==='Your first name'||my.name.length<=1){alert('Please enter your name to help your partner identify you.');}else{my.name=window.myRole==='Admin'?my.name+'_Admin':my.name;window.myName=my.name;begin();}}useEffect(function(){navigator.mediaDevices.getUserMedia({audio:true,video:{width:1280,height:720}}).then(function(mediaStream){if(mediaStream){window.mediaStream=mediaStream;var localAudio=mediaStream.getAudioTracks()[0];var localVideo=mediaStream.getVideoTracks()[0];setInitialInputs([localAudio,localVideo]);window.localAudio=localAudio;setHasUserMedia(true);}else{setHasUserMedia(false);}}).catch(function(err){console.log(\"You got an error:\"+err);setHasUserMedia(false);});},[]);useEffect(function(){initialInputs&&lobbyVideo.current&&(lobbyVideo.current.srcObject=new MediaStream(initialInputs));lobbyVideo.current.muted=true;window.initialInputs=initialInputs;},[initialInputs]);// if(localAudio && localAudio.length > 0)\n//     {\n//       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n//     }\n//     else {}:\nvar handleChange=function handleChange(e){// setUserID(e.target.value);\n// window.userID=userID;\nvar newName=e.target.value;setMy(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{name:newName});});};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"start-screen-background\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"instructions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-width\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Welcome to SecondBody.\"),/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',marginLeft:'180px',marginRight:'180px',padding:'20px',paddingTop:'40px',border:'4px solid whitesmoke',backgroundColor:'white'}},/*#__PURE__*/React.createElement(\"div\",{style:{background:'white',opacity:'1',zIndex:'1000'}},hasUserMedia?/*#__PURE__*/React.createElement(\"video\",{className:\"lobby-video\",autoPlay:true,ref:lobbyVideo}):/*#__PURE__*/React.createElement(\"p\",{style:{height:'198px',width:'352px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder',boxSizing:'border-box',padding:'24px',border:'2px yellow solid'}},\"\\u274C Your camera / mic is blocked \\u274C\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Please give this site access to your camera and mic, and then \",/*#__PURE__*/React.createElement(\"u\",{style:{cursor:'pointer'},onClick:function onClick(){window.location.reload();}},\"refresh the page.\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"How?\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",href:\"https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?\"},\"Option 1\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:'https://youtu.be/GceAjizU5WU?t=39',target:\"_blank\"},\"Option 2\")))),lobbyVideo.current&&hasUserMedia&&/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px',width:'250px',height:'0px',margin:'auto'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowCamSettings(!showCamSettings);},ref:camCaret},\"Select Camera ^\"),showCamSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowCamSettings(false);},style:{position:'relative',bottom:'0px',left:'80px'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"video\",page:\"intro\",inputs:[initialInputs,setInitialInputs],ref:camSettings})):null),/*#__PURE__*/React.createElement(\"div\",{style:{width:'15px'}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"selector-button\",onClick:function onClick(){setShowMicSettings(!showMicSettings);},ref:micCaret},\"Select Mic ^\"),showMicSettings?/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setShowMicSettings(false);},style:{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}},/*#__PURE__*/React.createElement(InputSelector,{type:\"audio\",page:\"intro\",ref:micSettings,inputs:[initialInputs,setInitialInputs]})):null))),hasUserMedia&&/*#__PURE__*/React.createElement(\"h4\",{className:\"signin\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return e.preventDefault();}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",autoComplete:\"off\",style:{backgroundColor:'rgb(230, 240, 249)',fontSize:'15px',width:'200px',height:'30px',textAlign:'center',fontFamily:'poppins'},ref:userIDEl,value:my.name,onFocus:function onFocus(){if(my.name==='Your first name'){setMy(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{name:''});});}},onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",(_React$createElement={className:\"new-card\",style:{width:'150px',color:'#1b8bc4',fontSize:'17px'},type:\"submit\"},_defineProperty(_React$createElement,\"type\",\"submit\"),_defineProperty(_React$createElement,\"value\",\"Enter session\"),_defineProperty(_React$createElement,\"onClick\",setMyName),_React$createElement))),/*#__PURE__*/React.createElement(\"br\",null))))));}","map":{"version":3,"sources":["/Users/arlosb/Documents/GitHub/new react app/test3/src/components/StartScreen/StartScreen.js"],"names":["React","useEffect","useRef","useContext","useState","InputSelector","MyContext","StartScreen","props","myState","my","setMy","userIDEl","showMicSettings","setShowMicSettings","showCamSettings","setShowCamSettings","begin","onClick","lobbyVideo","micCaret","createRef","micSettings","camCaret","camSettings","initialInputs","setInitialInputs","hasUserMedia","setHasUserMedia","document","addEventListener","handleClickOutside","window","testMy","cleanup","removeEventListener","event","console","log","current","contains","target","setMyName","name","length","alert","myRole","myName","navigator","mediaDevices","getUserMedia","audio","video","width","height","then","mediaStream","localAudio","getAudioTracks","localVideo","getVideoTracks","catch","err","srcObject","MediaStream","muted","handleChange","e","newName","value","prevState","position","marginLeft","marginRight","padding","paddingTop","border","backgroundColor","background","opacity","zIndex","borderRadius","margin","color","fontWeight","boxSizing","cursor","location","reload","display","flexDirection","justifyContent","bottom","left","overflowY","preventDefault","fontSize","textAlign","fontFamily"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport './StartScreen.css';\nimport InputSelector from '../InputSelector/InputSelector';\nimport MyContext from '../../MyContext';\n\n\n\n//   if (parent.myRole=='Actor') {\n//     document.getElementById('instructions').remove();\n//     document.getElementById('actor-instructions').style.visibility='visible';\n//     let qrCode = '../images/Audio' + parent.myNumber + '.png';\n//     document.getElementById('QR-code').src=qrCode;\n//   }\n\n\n/**\n * Props:\n * -\n * -\n */\n export default function StartScreen(props) {\n    const { myState } = useContext(MyContext);\n    const [ my,setMy] = myState;\n    const userIDEl = useRef(null);\n    const [showMicSettings,setShowMicSettings] = useState(false);\n    const [showCamSettings,setShowCamSettings] = useState(false);\n    const begin = props.onClick;\n    // const [ myInfo, setMyInfo ] = useContext(MyInfoContext);\n    // const [ userID, setUserID ] = useState('Your first name');\n    const lobbyVideo = useRef(null);\n    const micCaret = React.createRef();\n    const micSettings = React.createRef();\n    const camCaret = React.createRef();\n    const camSettings = React.createRef();\n    const [initialInputs,setInitialInputs] = useState(null);\n    const [hasUserMedia,setHasUserMedia] = useState(true);\n  \n\n    useEffect(()=> {\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      ///temp\n      window.testMy = my;\n  \n  \n   return function cleanup() {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    })\n\n    const handleClickOutside = (event) => {\n      console.log('handling click');\n      if (micSettings.current &&\n        !micSettings.current.contains(event.target) &&\n        !micCaret.current.contains(event.target)\n      ) {\n        setShowMicSettings(false);\n      } else if (camSettings.current &&\n        !camSettings.current.contains(event.target) &&\n        !camCaret.current.contains(event.target)\n      ) {\n        setShowCamSettings(false);\n      } \n      \n    }\n \n    \n\n\n  function setMyName() {\n      console.log('setting user ID as ' + my.name);\n      if (my.name === '' || my.name==='Your first name' || my.name.length<=1) {\n        alert('Please enter your name to help your partner identify you.')\n      } else {\n        my.name = window.myRole === 'Admin' ? my.name + '_Admin' : my.name;\n        window.myName = my.name;\n        begin();\n      }\n  }\nuseEffect(()=>{\n  navigator.mediaDevices.getUserMedia({audio:true,video:{width: 1280,height: 720}}).then((mediaStream)=>{\n    if(mediaStream){\n      window.mediaStream = mediaStream;\n      let localAudio = mediaStream.getAudioTracks()[0];\n      let localVideo = mediaStream.getVideoTracks()[0];  \n      setInitialInputs([localAudio,localVideo]);\n      window.localAudio=localAudio;\n      setHasUserMedia(true);\n    } else {\n      setHasUserMedia(false);\n    }\n  }).catch( err => {\n    console.log(\"You got an error:\" + err);\n    setHasUserMedia(false);\n});\n\n}\n\n,[])\n\nuseEffect(()=>{\n  initialInputs && lobbyVideo.current && (lobbyVideo.current.srcObject=new MediaStream(initialInputs));\n  lobbyVideo.current.muted=true;\n  window.initialInputs=initialInputs;\n},[initialInputs]);\n    \n\n        // if(localAudio && localAudio.length > 0)\n        //     {\n        //       newCallObject.join({ url, userName:window.myName, audioSource: localSrc[0]});\n        //     }\n        //     else {}:\n\n  \n  const handleChange = e => {\n    // setUserID(e.target.value);\n    // window.userID=userID;\n    let newName = e.target.value;\n    setMy((prevState)=>({\n                          ...prevState,\n                          name: newName,\n                        })\n          );\n}\n\n\n    return (\n    <div className='container'>\n\n        <div className='start-screen-background'></div>\n  \n        <div className='instructions'> \n            <div className='fixed-width'>\n          \n                <h2>Welcome to SecondBody.</h2>\n\n               \n\n                <div style={{position:'relative', marginLeft:'180px', marginRight:'180px', padding: '20px', paddingTop:'40px', border: '4px solid whitesmoke', backgroundColor:'white'}}>\n                      <div style={{background:'white',opacity:'1',zIndex:'1000'}}>\n                      \n                      \n                {hasUserMedia ? \n\n                    <video className='lobby-video' autoPlay={true} ref={lobbyVideo}/>\n                    :\n                    <p style={{height:'198px',width:'352px',borderRadius:'20px',background:'black',margin:'auto',color:'white',fontWeight:'bolder', boxSizing:'border-box',padding:'24px',border:'2px yellow solid'}}>\n                    ❌ Your camera / mic is blocked ❌<br/><br/>Please give this site access to your camera and mic, and then <u style={{cursor:'pointer'}} onClick={(()=>{window.location.reload()})}>refresh the page.</u>\n                    <br/><br/>\n                    How?\n                    <br/>\n                    <ul>\n                      <li>\n                          <a target='_blank' href='https://downloads.intercomcdn.com/i/o/193872927/17dc7d06694d2c9bcd47b17a/Web+Meeting+Permissions+Blocked+Modal.jpg?'>\n                          Option 1\n                          </a>\n                      </li>\n                      <li>\n                          <a href={'https://youtu.be/GceAjizU5WU?t=39'}  target='_blank'>Option 2</a>\n                      </li>\n                      </ul>\n                      </p>\n                  }\n                      \n                      \n\n             {/* <img src={Unblock} style={{width:'100px'}} /> */}\n                      \n                      \n                      {lobbyVideo.current && hasUserMedia && (\n                          <div style={{position:'relative',display:'flex',flexDirection:'row',justifyContent:'center',bottom:'40px', width:'250px',height:'0px',margin:'auto'}}>\n                              <div >\n                                <p className=\"selector-button\" onClick={()=>{setShowCamSettings(!showCamSettings)}} ref={camCaret}>Select Camera ^</p>\n                                    {showCamSettings ? \n                                    (<div onClick={()=>setShowCamSettings(false)}style={{position:'relative',bottom:'0px',left:'80px'}}>\n                                      <InputSelector type='video' page='intro' inputs={[initialInputs,setInitialInputs]} ref={camSettings} />\n                                    </div>)\n                                    : \n                                    null}\n                              </div>\n                              <div style={{width:'15px'}}></div>\n\n                              <div>\n                                <p className=\"selector-button\" onClick={()=>{setShowMicSettings(!showMicSettings)}} ref={micCaret}>Select Mic ^</p>\n                                    {showMicSettings ? \n                                      (<div onClick={()=>setShowMicSettings(false)} style={{position:'relative',bottom:'0px',left:'72px',overflowY:'visible'}}>\n                                        <InputSelector type='audio' page='intro' ref={micSettings}  inputs={[initialInputs,setInitialInputs]}/>\n                                      </div>)\n                                    : \n                                    null}\n                              </div>\n                          </div>\n                      )}\n\n                  </div>\n                    \n                 { hasUserMedia && (\n                    <h4 className='signin'>\n            \n                        <form onSubmit={(e)=>e.preventDefault()}>\n                            <input type=\"text\" autoComplete=\"off\" style={{backgroundColor: 'rgb(230, 240, 249)', fontSize:'15px', width: '200px', height: '30px', textAlign:'center', fontFamily:'poppins'}} ref={userIDEl} value={my.name} onFocus={()=> {if (my.name==='Your first name') {setMy((prevState)=>({...prevState,name: '',}));}}} onChange={e=>handleChange(e)} /><br/><br/>\n                            <input className='new-card' style={{width:'150px', color:'#1b8bc4', fontSize: '17px'}} type=\"submit\" type=\"submit\" value='Enter session' onClick={setMyName} />\n                        </form>\n\n                        <br/>\n                    </h4>\n                  )}\n                    \n                </div>\n        \n  \n            </div>\n        </div>\n  \n    \n  \n       \n    </div>\n    );\n  }\n\n              \n                \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}